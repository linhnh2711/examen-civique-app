/*! For license information please see main.b03e98e7.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,f(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(_,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var u=0;u<e.length;u++){var c=s+T(o=e[u],u);l+=I(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,c=s+T(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},A={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function q(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=q,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=q,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!f)if(null!==r(u))f=!0,A(k);else{var t=r(c);null!==t&&j(w,t.startTime-e)}}function k(e,n){f=!1,g&&(g=!1,y(E),E=-1),m=!0;var s=p;try{for(x(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(u)&&i(u),x(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&j(w,d.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,N=null,E=-1,_=5,T=-1;function I(){return!(t.unstable_now()-T<_)}function L(){if(null!==N){var e=t.unstable_now();T=e;var n=!0;try{n=N(!0,e)}finally{n?S():(C=!1,N=null)}}else C=!1}if("function"===typeof b)S=function(){b(L)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=L,S=function(){R.postMessage(null)}}else S=function(){v(L,0)};function A(e){N=e,C||(C=!0,S())}function j(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,A(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(y(E),E=-1):g=!0,j(w,s-a))):(e.sortIndex=o,n(u,e),f||m||(f=!0,A(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},555(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579(e,t,n){e.exports=n(153)},730(e,t,n){var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var D,O=Object.assign;function M(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function V(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case N:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ne(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Le=!1;function Pe(e,t,n){if(Le)return e(t,n);Le=!0;try{return Te(e,t,n)}finally{Le=!1,(null!==Se||null!==Ce)&&(Ie(),_e())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ae=!1;if(c)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ce){Ae=!1}function qe(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var De=!1,Oe=null,Me=!1,Fe=null,Ue={onError:function(e){De=!0,Oe=e}};function Ve(e,t,n,r,i,s,a,o,l){De=!1,Oe=null,qe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Ct,Nt,Et=!1,_t=[],Tt=null,It=null,Lt=null,Pt=new Map,Rt=new Map,At=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Nt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){Mt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Mt(Tt)&&(Tt=null),null!==It&&Mt(It)&&(It=null),null!==Lt&&Mt(Lt)&&(Lt=null),Pt.forEach(Ft),Rt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<_t.length){Vt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==It&&Vt(It,e),null!==Lt&&Vt(Lt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Ot(n),null===n.blockedOn&&At.shift()}var Bt=x.ReactCurrentBatchConfig,Ht=!0;function Qt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Gt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Wt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),qt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,i),!0;case"dragenter":return It=Dt(It,e,t,n,r,i),!0;case"mouseover":return Lt=Dt(Lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Dt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Dt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(qt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Jt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),dn=O({},un,{view:0,detail:0}),hn=sn(dn),pn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(O({},pn,{dataTransfer:0})),gn=sn(O({},dn,{relatedTarget:0})),vn=sn(O({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),xn=sn(O({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Nn(){return Cn}var En=O({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=sn(En),Tn=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Ln=sn(O({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),An=[9,13,27,32],jn=c&&"CompositionEvent"in window,qn=null;c&&"documentMode"in document&&(qn=document.documentMode);var Dn=c&&"TextEvent"in window&&!qn,On=c&&(!jn||qn&&8<qn&&11>=qn),Mn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Kn(e){Mr(e,0)}function Jn(e){if(W(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(c){var $n;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Qn(t,Wn,e,we(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function sr(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Cr={};function Nr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Nr("animationend"),_r=Nr("animationiteration"),Tr=Nr("animationstart"),Ir=Nr("transitionend"),Lr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Lr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Pr.length;Ar++){var jr=Pr[Ar];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(_r,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(Ve.apply(this,arguments),De){if(!De)throw Error(s(198));var c=Oe;De=!1,Oe=null,Me||(Me=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,u),s=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Fr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Xt(t)){case 1:var i=Qt;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=s,i=we(n),a=[];e:{var o=Lr.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Er:case _r:case Tr:l=vn;break;case Ir:l=Ln;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Re(m,h))&&c.push(Qr(m,f,p)))),d)break;m=m.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:xi(l),p=null==u?o:xi(u),(o=new c(f,m+"leave",l,n,i)).target=d,o.relatedTarget=p,f=null,yi(i)===r&&((c=new c(h,m+"enter",u,n,i)).target=p,c.relatedTarget=d,f=c),d=f,l&&u)e:{for(h=u,m=0,p=c=l;p;p=Wr(p))m++;for(p=0,f=h;f;f=Wr(f))p++;for(;0<m-p;)c=Wr(c),m--;for(;0<p-m;)h=Wr(h),p--;for(;m--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==l&&Kr(a,o,l,c,!1),null!==u&&null!==d&&Kr(a,d,u,c,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Yn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Qn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(v=Gr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!jn&&Un(e,t)?(e=en(),Zt=$t=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Mr(a,t)})}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Qr(e,s,i)),null!=(s=Re(e,t))&&r.push(Qr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Re(n,s))&&a.unshift(Qr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(Qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,fi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var ki=[],Si=-1;function Ci(e){return{current:e}}function Ni(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ei(e,t){Si++,ki[Si]=e.current,e.current=t}var _i={},Ti=Ci(_i),Ii=Ci(!1),Li=_i;function Pi(e,t){var n=e.type.contextTypes;if(!n)return _i;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ni(Ii),Ni(Ti)}function ji(e,t,n){if(Ti.current!==_i)throw Error(s(168));Ei(Ti,t),Ei(Ii,n)}function qi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return O({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_i,Li=Ti.current,Ei(Ti,e),Ei(Ii,Ii.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=qi(e,t,Li),r.__reactInternalMemoizedMergedChildContext=e,Ni(Ii),Ni(Ti),Ei(Ti,e)):Ni(Ii),Ei(Ii,n)}var Mi=null,Fi=!1,Ui=!1;function Vi(e){null===Mi?Mi=[e]:Mi.push(e)}function zi(){if(!Ui&&null!==Mi){Ui=!0;var e=0,t=bt;try{var n=Mi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Fi=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),We(Ze,zi),i}finally{bt=t,Ui=!1}}return null}var Bi=[],Hi=0,Qi=null,Gi=0,Wi=[],Ki=0,Ji=null,Xi=1,Yi="";function $i(e,t){Bi[Hi++]=Gi,Bi[Hi++]=Qi,Qi=e,Gi=t}function Zi(e,t,n){Wi[Ki++]=Xi,Wi[Ki++]=Yi,Wi[Ki++]=Ji,Ji=e;var r=Xi;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Yi=s+e}else Xi=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Qi;)Qi=Bi[--Hi],Bi[Hi]=null,Gi=Bi[--Hi],Bi[Hi]=null;for(;e===Ji;)Ji=Wi[--Ki],Wi[Ki]=null,Yi=Wi[--Ki],Wi[Ki]=null,Xi=Wi[--Ki],Wi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ui(e.nextSibling)}function ps(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=x.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ju(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Du(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case k:return(t=Fu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||q(t))return(t=Du(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||q(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||q(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function f(i,s,o,l){for(var u=null,c=null,d=s,f=s=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=p(i,d,o[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,f),null===c?u=v:c.sibling=v,c=v,d=g}if(f===o.length)return n(i,d),is&&$i(i,f),u;if(null===d){for(;f<o.length;f++)null!==(d=h(i,o[f],l))&&(s=a(d,s,f),null===c?u=d:c.sibling=d,c=d);return is&&$i(i,f),u}for(d=r(i,d);f<o.length;f++)null!==(g=m(d,i,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),s=a(g,s,f),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),is&&$i(i,f),u}function g(i,o,l,u){var c=q(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=p(i,f,y.value,u);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(i,f),o=a(b,o,g),null===d?c=b:d.sibling=b,d=b,f=v}if(y.done)return n(i,f),is&&$i(i,g),c;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,u))&&(o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return is&&$i(i,g),c}for(f=r(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,u))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?c=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(i,e)}),is&&$i(i,g),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&ys(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=gs(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((s=Du(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=qu(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case k:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fu(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return f(r,s,a,l);if(q(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Mu(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var xs=bs(!0),ws=bs(!1),ks=Ci(null),Ss=null,Cs=null,Ns=null;function Es(){Ns=Cs=Ss=null}function _s(e){var t=ks.current;Ni(ks),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ss=e,Ns=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Ss)throw Error(s(308));Cs=e,Ss.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var qs=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;qs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,c=u=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=O({},d,h);break e;case 2:qs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Qs={},Gs=Ci(Qs),Ws=Ci(Qs),Ks=Ci(Qs);function Js(e){if(e===Qs)throw Error(s(174));return e}function Xs(e,t){switch(Ei(Ks,t),Ei(Ws,e),Ei(Gs,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Gs),Ei(Gs,t)}function Ys(){Ni(Gs),Ni(Ws),Ni(Ks)}function $s(e){Js(Ks.current);var t=Js(Gs.current),n=le(t,e.type);t!==n&&(Ei(Ws,e),Ei(Gs,n))}function Zs(e){Ws.current===e&&(Ni(Gs),Ni(Ws))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ua=null,ca=!1,da=!1,ha=0,pa=0;function ma(){throw Error(s(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function va(e,t,n,r,i,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?eo:to,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(s(301));a+=1,ua=la=null,t.updateQueue=null,ia.current=no,e=n(r,i)}while(da)}if(ia.current=Za,t=null!==la&&null!==la.next,aa=0,ua=la=oa=null,ca=!1,t)throw Error(s(300));return e}function ya(){var e=0!==ha;return ha=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?oa.memoizedState=ua=e:ua=ua.next=e,ua}function xa(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ua?oa.memoizedState:ua.next;if(null!==t)ua=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ua?oa.memoizedState=ua=e:ua=ua.next=e}return ua}function wa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,o=r):u=u.next=h,oa.lanes|=d,Ol|=d}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,oa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ca(){}function Na(e,t){var n=oa,r=xa(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Oa(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Ra(9,_a.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(s(349));0!==(30&aa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&La(e)}function Ta(e,t,n){return n(function(){Ia(t)&&La(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function La(e){var t=js(e,1);null!==t&&ru(t,e,1,-1)}function Pa(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,oa,e),[t.memoizedState,e]}function Ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return xa().memoizedState}function ja(e,t,n,r){var i=ba();oa.flags|=e,i.memoizedState=Ra(1|t,n,void 0,void 0===r?null:r)}function qa(e,t,n,r){var i=xa();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&fa(r,a.deps))return void(i.memoizedState=Ra(t,n,s,r))}oa.flags|=e,i.memoizedState=Ra(1|t,n,s,r)}function Da(e,t){return ja(8390656,8,e,t)}function Oa(e,t){return qa(2048,8,e,t)}function Ma(e,t){return qa(4,2,e,t)}function Fa(e,t){return qa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qa(4,4,Ua.bind(null,t,e),n)}function za(){}function Ba(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),oa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Wa(){return xa().memoizedState}function Ka(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=As(e,t,n,r))){ru(n,e,r,tu()),$a(n,t,r)}}function Ja(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=As(e,t,i,r))&&(ru(n,e,r,i=tu()),$a(n,t,r))}}function Xa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Ya(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Ls,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},eo={readContext:Ls,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ls,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Pa,useDebugValue:za,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ga.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,i=ba();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ll)throw Error(s(349));0!==(30&aa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Ra(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Ll.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Ls,useCallback:Ba,useContext:Ls,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Ha,useReducer:ka,useRef:Aa,useState:function(){return ka(wa)},useDebugValue:za,useDeferredValue:function(e){return Qa(xa(),la.memoizedState,e)},useTransition:function(){return[ka(wa)[0],xa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1},no={readContext:Ls,useCallback:Ba,useContext:Ls,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Ha,useReducer:Sa,useRef:Aa,useState:function(){return Sa(wa)},useDebugValue:za,useDeferredValue:function(e){var t=xa();return null===la?t.memoizedState=e:Qa(t,la.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],xa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Na,useId:Wa,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function io(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(ru(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(ru(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(ru(t,e,r,n),Vs(t,e,r))}};function ao(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oo(e,t,n){var r=!1,i=_i,s=t.contextType;return"object"===typeof s&&null!==s?s=Ls(s):(i=Ri(t)?Li:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):_i),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function uo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ls(s):(s=Ri(t)?Li:Ti.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(io(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&so.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function po(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Gl=r),po(0,t)},n}function go(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){po(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){po(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xo=x.ReactCurrentOwner,wo=!1;function ko(e,t,n,r){t.child=null===e?ws(t,null,n,r):xs(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=va(e,t,n,r,s,i),n=ya(),null===e||wo?(is&&n&&es(t),t.flags|=1,ko(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qo(e,t,i))}function Co(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Au(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Qo(e,t,i)}return t.flags|=1,(e=ju(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qo(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(jl,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(jl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ei(jl,Al),Al|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ei(jl,Al),Al|=r;return ko(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,i){var s=Ri(n)?Li:Ti.current;return s=Pi(t,s),Is(t,i),n=va(e,t,n,r,s,i),r=ya(),null===e||wo?(is&&r&&es(t),t.flags|=1,ko(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qo(e,t,i))}function Io(e,t,n,r,i){if(Ri(n)){var s=!0;Di(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ho(e,t),oo(t,n,r),uo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ls(u):u=Pi(t,u=Ri(n)?Li:Ti.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&lo(t,a,r,u),qs=!1;var h=t.memoizedState;a.state=h,Bs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ii.current||qs?("function"===typeof c&&(io(t,n,c,r),l=t.memoizedState),(o=qs||ao(t,n,o,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ro(t.type,o),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ls(l):l=Pi(t,l=Ri(n)?Li:Ti.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,a,r,l),qs=!1,h=t.memoizedState,a.state=h,Bs(t,r,a,i);var m=t.memoizedState;o!==d||h!==m||Ii.current||qs?("function"===typeof p&&(io(t,n,p,r),m=t.memoizedState),(u=qs||ao(t,n,u,r,h,m,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Lo(e,t,n,r,s,i)}function Lo(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Oi(t,n,!1),Qo(e,t,s);r=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):ko(e,t,o,s),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Xs(e,t.containerInfo)}function Ro(e,t,n,r,i){return ps(),ms(i),t.flags|=256,ko(e,t,n,r),t.child}var Ao,jo,qo,Do={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ou(l,i,0,null),e=Du(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Do,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=ho(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ou({mode:"visible",children:r.children},i,0,null),(a=Du(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=ho(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Ll)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,js(e,i),ru(r,e,i,-1))}return gu(),Uo(e,t,o,r=ho(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Ki++]=Xi,Wi[Ki++]=Yi,Wi[Ki++]=Ji,Xi=e.id,Yi=e.overflow,Ji=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=ju(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=ju(r,o):(o=Du(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,i}return e=(o=e.child).sibling,i=ju(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Ou({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ms(r),xs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ko(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ju(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ju(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ri(t.type)&&Ai(),Wo(t),null;case 3:return r=t.stateNode,Ys(),Ni(Ii),Ni(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Wo(t),null;case 5:Zs(t);var i=Js(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)jo(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Js(Gs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<qr.length;i++)Fr(qr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ao(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<qr.length;i++)Fr(qr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Fr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)qo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Js(Ks.current),Js(Gs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ni(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ou(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===ql&&(ql=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Ys(),null===e&&zr(t.stateNode.containerInfo),Wo(t),null;case 10:return _s(t.type._context),Wo(t),null;case 19:if(Ni(ea),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==ql||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Bl&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Ye()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ea.current,Ei(ea,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Jo(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ni(Ii),Ni(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ni(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(ea),null;case 4:return Ys(),null;case 10:return _s(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Js(Gs.current);var s,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Nu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Yo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nu(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,pl(e,t,n),Yo=r):pl(e,t,n);break;default:pl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=Iu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(a,o,i),dl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Nu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Nu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Nu(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Nu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(i,a),be(l,o);var c=be(l,a);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(i,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Nu(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Nu(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Nu(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ye())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(c=Yo)||d,gl(t,e),Yo=c):gl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(m=(p=Zo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Nu(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){kl(h);continue}}null!==m?(m.return=p,Zo=m):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=fe("display",o))}catch(g){Nu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Nu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,ll(e),a);break;default:throw Error(s(161))}}catch(ga){Nu(e,e.return,ga)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var u=Yo;if(Xo=a,(Yo=l)&&!u)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Zo=l):Sl(i);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=i,Xo=o,Yo=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&sl(t)}catch(p){Nu(t,t.return,p)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(ga){Nu(t,n,ga)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ga){Nu(t,i,ga)}}var s=t.return;try{sl(t)}catch(ga){Nu(t,s,ga)}break;case 5:var a=t.return;try{sl(t)}catch(ga){Nu(t,a,ga)}}}catch(ga){Nu(t,t.return,ga)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Cl,Nl=Math.ceil,El=x.ReactCurrentDispatcher,_l=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Il=0,Ll=null,Pl=null,Rl=0,Al=0,jl=Ci(0),ql=0,Dl=null,Ol=0,Ml=0,Fl=0,Ul=null,Vl=null,zl=0,Bl=1/0,Hl=null,Ql=!1,Gl=null,Wl=null,Kl=!1,Jl=null,Xl=0,Yl=0,$l=null,Zl=-1,eu=0;function tu(){return 0!==(6&Il)?Ye():-1!==Zl?Zl:Zl=Ye()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==fs.transition?(0===eu&&(eu=ft()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<Yl)throw Yl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Ll||(e===Ll&&(0===(2&Il)&&(Ml|=n),4===ql&&lu(e,Rl)),iu(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Ye()+500,Fi&&zi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Ll?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(uu.bind(null,e)):Vi(uu.bind(null,e)),ai(function(){0===(6&Il)&&zi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=ht(e,e===Ll?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Il;Il|=2;var a=fu();for(Ll===e&&Rl===t||(Hl=null,Bl=Ye()+500,pu(e,t));;)try{bu();break}catch(l){mu(e,l)}Es(),El.current=a,Il=i,null!==Pl?t=0:(Ll=null,Rl=0,t=ql)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=au(e,i))),1===t)throw n=Dl,pu(e,0),lu(e,r),iu(e,Ye()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(a=mt(e))&&(r=a,t=au(e,a))),1===t))throw n=Dl,pu(e,0),lu(e,r),iu(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:ku(e,Vl,Hl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(ku.bind(null,e,Vl,Hl),t);break}ku(e,Vl,Hl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ri(ku.bind(null,e,Vl,Hl),r);break}ku(e,Vl,Hl);break;default:throw Error(s(329))}}}return iu(e,Ye()),e.callbackNode===n?su.bind(null,e):null}function au(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Vl,Vl=n,null!==t&&ou(t)),e}function ou(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lu(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Il))throw Error(s(327));Su();var t=ht(e,0);if(0===(1&t))return iu(e,Ye()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Dl,pu(e,0),lu(e,t),iu(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,Vl,Hl),iu(e,Ye()),null}function cu(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Ye()+500,Fi&&zi())}}function du(e){null!==Jl&&0===Jl.tag&&0===(6&Il)&&Su();var t=Il;Il|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Il=t))&&zi()}}function hu(){Al=jl.current,Ni(jl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Ys(),Ni(Ii),Ni(Ti),ra();break;case 5:Zs(r);break;case 4:Ys();break;case 13:case 19:Ni(ea);break;case 10:_s(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Ll=e,Pl=e=ju(e.current,null),Rl=Al=t,ql=0,Dl=null,Fl=Ml=Ol=0,Vl=Ul=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function mu(e,t){for(;;){var n=Pl;try{if(Es(),ia.current=Za,ca){for(var r=oa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,ua=la=oa=null,da=!1,ha=0,_l.current=null,null===n||null===n.return){ql=1,Dl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=yo(o);if(null!==m){m.flags&=-257,bo(m,o,l,0,t),1&m.mode&&vo(a,c,t),u=c;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(u),t.updateQueue=g}else f.add(u);break e}if(0===(1&t)){vo(a,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=yo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bo(v,o,l,0,t),ms(co(u,l));break e}}a=u=co(u,l),4!==ql&&(ql=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,u,t));break e;case 1:l=u;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}wu(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fu(){var e=El.current;return El.current=Za,null===e?Za:e}function gu(){0!==ql&&3!==ql&&2!==ql||(ql=4),null===Ll||0===(268435455&Ol)&&0===(268435455&Ml)||lu(Ll,Rl)}function vu(e,t){var n=Il;Il|=2;var r=fu();for(Ll===e&&Rl===t||(Hl=null,pu(e,t));;)try{yu();break}catch(i){mu(e,i)}if(Es(),Il=n,El.current=r,null!==Pl)throw Error(s(261));return Ll=null,Rl=0,ql}function yu(){for(;null!==Pl;)xu(Pl)}function bu(){for(;null!==Pl&&!Je();)xu(Pl)}function xu(e){var t=Cl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?wu(e):Pl=t,_l.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Al)))return void(Pl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return ql=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===ql&&(ql=5)}function ku(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{Su()}while(null!==Jl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Ll&&(Pl=Ll=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Lu(tt,function(){return Su(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,_l.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Os){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(u=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++c===i&&(l=o),p===a&&++d===r&&(u=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(Os){Nu(t,t.return,Os)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=nl,nl=!1}(e,n),vl(n,e),mr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Xe(),Il=l,bt=o,Tl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Xl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ql)throw Ql=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&Su(),a=e.pendingLanes,0!==(1&a)?e===$l?Yl++:(Yl=0,$l=e):Yl=0,zi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function Su(){if(null!==Jl){var e=xt(Xl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Xl=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zo=c;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var p=(d=Zo).sibling,m=d.return;if(al(d),d===c){Zo=null;break}if(null!==p){p.return=m,Zo=p;break}Zo=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zo=y;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){Nu(l,l.return,k)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Il=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Cu(e,t,n){e=Us(e,t=fo(0,t=co(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function Nu(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=go(t,e=co(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Rl&n)===n&&(4===ql||3===ql&&(130023424&Rl)===Rl&&500>Ye()-zl?pu(e,0):Fl|=n),iu(e,t)}function _u(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=js(e,t))&&(vt(e,t,n),iu(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_u(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),_u(e,n)}function Lu(e,t){return We(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Pu(e,t,n,r)}function Au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ju(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Au(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Du(n.children,i,a,t);case C:o=8,i|=8;break;case N:return(e=Ru(12,n,t,2|i)).elementType=N,e.lanes=a,e;case I:return(e=Ru(13,n,t,i)).elementType=I,e.lanes=a,e;case L:return(e=Ru(19,n,t,i)).elementType=L,e.lanes=a,e;case A:return Ou(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case _:o=9;break e;case T:o=11;break e;case P:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ru(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Du(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Ou(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vu(e,t,n,r,i,s,a,o,l){return e=new Uu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ru(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function zu(e){if(!e)return _i;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return qi(e,n,t)}return t}function Bu(e,t,n,r,i,s,a,o,l){return(e=Vu(n,r,!0,e,0,s,0,o,l)).context=zu(null),n=e.current,(s=Fs(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function Hu(e,t,n,r){var i=t.current,s=tu(),a=nu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(ru(e,i,a,s),Vs(e,i,a)),a}function Qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ps();break;case 5:$s(t);break;case 1:Ri(t.type)&&Di(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ks,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ei(ea,1&ea.current),null!==(e=Qo(e,t,n))?e.sibling:null);Ei(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Qo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Is(t,n),i=va(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=so,t.stateNode=i,i._reactInternals=t,uo(t,r,e,n),t=Lo(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),ko(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Au(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=ro(r,e),i){case 0:t=To(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=Co(null,t,r,ro(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ro(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Ro(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Qo(e,t,n);break e}ko(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),_o(e,t),ko(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Mo(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):ko(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ei(ks,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ii.current){t=Qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Fs(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Ts(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ts(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}ko(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ls(i)),t.flags|=1,ko(e,t,r,n),t.child;case 14:return i=ro(r=t.type,t.pendingProps),Co(e,t,r,i=ro(r.type,i),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ro(r,i),Ho(e,t),t.tag=1,Ri(r)?(e=!0,Di(t)):e=!1,Is(t,n),oo(t,r,i),uo(t,r,i,n),Lo(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Qu(a);o.call(e)}}Hu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Qu(a);s.call(e)}}var a=Bu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=a,e[mi]=a.current,zr(8===e.nodeType?e.parentNode:e),du(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Qu(l);o.call(e)}}var l=Vu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[mi]=l.current,zr(8===e.nodeType?e.parentNode:e),du(function(){Hu(t,l,n,r)}),l}(n,t,e,i,r);return Qu(a)}Xu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hu(e,t,null,null)},Xu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du(function(){Hu(null,e,null,null)}),t[mi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Ye()),0===(6&Il)&&(Bl=Ye()+500,zi()))}break;case 13:du(function(){var t=js(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}}),Wu(e,1)}},kt=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)ru(t,e,134217728,tu());Wu(e,134217728)}},St=function(e){if(13===e.tag){var t=nu(e),n=js(e,t);if(null!==n)ru(n,e,t,tu());Wu(e,t)}},Ct=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));W(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cu,Ie=du;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Ee,_e,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(s(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vu(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bu(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(s(40));return!!e._reactRootContainer&&(du(function(){ec(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},856(e,t,n){n.r(t),n.d(t,{TOTAL_QUESTIONS:()=>c,getAllQuestions:()=>l,getQuestionsByType:()=>a,getRandomQuestions:()=>o,getTotalQuestionsByType:()=>u,questionsDB:()=>i});var r=n(555);const i=[{id:1,question:"Les dirigeants sont \xe9lus par les citoyens dans :",options:["Une monarchie","Une d\xe9mocratie","Une dictature","Une th\xe9ocratie"],correct:1,explanation:"Dans une d\xe9mocratie, les dirigeants sont \xe9lus par les citoyens lors d'\xe9lections libres. La France est une r\xe9publique d\xe9mocratique o\xf9 le peuple exerce sa souverainet\xe9 par le vote.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:2,question:"A-t-on le droit de ne pas respecter une loi ?",options:["Oui, si on n'est pas d'accord avec elle","Oui, si elle est ancienne","Non, jamais","Oui, si la majorit\xe9 des citoyens la refuse"],correct:2,explanation:"Non, personne n'a le droit de ne pas respecter une loi en vigueur. Toute loi vot\xe9e doit \xeatre respect\xe9e par tous, m\xeame si on n'est pas d'accord avec elle.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:3,question:"Qui doit respecter la loi ?",options:["Seulement les citoyens fran\xe7ais","Seulement les personnes majeures","Tout le monde sans exception","Seulement les personnes qui ont vot\xe9"],correct:2,explanation:"Tout le monde doit respecter la loi sans exception : citoyens, \xe9trangers, gouvernants, y compris le pr\xe9sident de la R\xe9publique. Le principe d'\xe9galit\xe9 devant la loi est fondamental.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:4,question:"Quel est le r\xf4le de l'autorit\xe9 judiciaire ?",options:["Voter les lois","Faire respecter la loi et punir ceux qui ne la respectent pas","Proposer de nouvelles lois","\xc9lire le pr\xe9sident de la R\xe9publique"],correct:1,explanation:"L'autorit\xe9 judiciaire a pour mission de faire appliquer la loi et de sanctionner ceux qui ne la respectent pas. Elle garantit le respect des droits et libert\xe9s.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:5,question:"Quel pouvoir d\xe9tient un juge ? Le pouvoir :",options:["L\xe9gislatif","Ex\xe9cutif","Judiciaire","Constituant"],correct:2,explanation:"Un juge d\xe9tient le pouvoir judiciaire, distinct du pouvoir l\xe9gislatif (qui vote les lois) et du pouvoir ex\xe9cutif (qui gouverne). C'est le principe de s\xe9paration des pouvoirs.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:6,question:"L'autorit\xe9 judiciaire est exerc\xe9e par :",options:["Le pr\xe9sident de la R\xe9publique","Les d\xe9put\xe9s et s\xe9nateurs","Les juges et magistrats","Les ministres"],correct:2,explanation:"L'autorit\xe9 judiciaire est exerc\xe9e par les juges et magistrats qui rendent la justice de mani\xe8re ind\xe9pendante. Le pr\xe9sident de la R\xe9publique en est le garant.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:7,question:"Que se passe-t-il si un ministre ne respecte pas la loi ?",options:["Il ne peut pas \xeatre poursuivi","Il peut \xeatre poursuivi comme tout citoyen","Il est automatiquement d\xe9mis de ses fonctions","Il doit seulement pr\xe9senter des excuses"],correct:1,explanation:"Un ministre qui ne respecte pas la loi peut \xeatre poursuivi devant la justice comme tout citoyen. Nul n'est au-dessus de la loi, principe fondamental de l'\xc9tat de droit.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:8,question:"Qui est \xe9lu lors des \xe9lections l\xe9gislatives ?",options:["Les s\xe9nateurs","Les d\xe9put\xe9s","Le pr\xe9sident de la R\xe9publique","Les maires"],correct:1,explanation:"Les \xe9lections l\xe9gislatives permettent d'\xe9lire les 577 d\xe9put\xe9s qui si\xe8gent \xe0 l'Assembl\xe9e nationale. Elles ont lieu tous les cinq ans au suffrage universel direct.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:9,question:"Combien de d\xe9put\xe9s composent l'Assembl\xe9e nationale ?",options:["348","577","450","622"],correct:1,explanation:"L'Assembl\xe9e nationale est compos\xe9e de 577 d\xe9put\xe9s \xe9lus au suffrage universel direct pour cinq ans. Ils repr\xe9sentent les circonscriptions l\xe9gislatives fran\xe7aises.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:10,question:"Quand sont \xe9lus les s\xe9nateurs ?",options:["Au suffrage universel direct","Par les d\xe9put\xe9s","Au suffrage universel indirect","Par le pr\xe9sident de la R\xe9publique"],correct:2,explanation:"Les s\xe9nateurs sont \xe9lus au suffrage universel indirect par des grands \xe9lecteurs (\xe9lus locaux). Contrairement aux d\xe9put\xe9s, ils ne sont pas \xe9lus directement par tous les citoyens.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:11,question:"Qui est \xe9lu lors des \xe9lections municipales ?",options:["Les d\xe9put\xe9s","Les maires directement","Les conseillers municipaux","Les pr\xe9fets"],correct:2,explanation:"Les \xe9lections municipales permettent d'\xe9lire les conseillers municipaux qui ensuite \xe9lisent le maire parmi eux. Elles ont lieu tous les six ans.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:12,question:"Qui est \xe9lu lors des \xe9lections pr\xe9sidentielles ?",options:["Le Premier ministre","Le pr\xe9sident du S\xe9nat","Le pr\xe9sident de l'Assembl\xe9e nationale","Le pr\xe9sident de la R\xe9publique"],correct:3,explanation:"Les \xe9lections pr\xe9sidentielles permettent d'\xe9lire le pr\xe9sident de la R\xe9publique fran\xe7aise au suffrage universel direct pour un mandat de cinq ans.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:13,question:"\xc0 partir de quel \xe2ge a-t-on le droit de voter ?",options:["16 ans","21 ans","18 ans","25 ans"],correct:2,explanation:"Le droit de vote est accord\xe9 \xe0 partir de 18 ans en France. C'est l'\xe2ge de la majorit\xe9 civile et politique depuis 1974.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:14,question:"Pour combien de temps est \xe9lu le pr\xe9sident de la R\xe9publique fran\xe7aise ?",options:["4 ans","5 ans","7 ans","6 ans"],correct:1,explanation:"Le pr\xe9sident de la R\xe9publique est \xe9lu pour un mandat de 5 ans (quinquennat) renouvelable une fois. Ce mandat \xe9tait de 7 ans avant la r\xe9forme de 2000.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:15,question:"Pour combien de temps sont \xe9lus les d\xe9put\xe9s ?",options:["3 ans","4 ans","5 ans","6 ans"],correct:2,explanation:"Les d\xe9put\xe9s de l'Assembl\xe9e nationale sont \xe9lus pour un mandat de 5 ans. L'Assembl\xe9e peut \xeatre dissoute avant la fin du mandat par le pr\xe9sident de la R\xe9publique.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:16,question:"Pour combien de temps sont \xe9lus les s\xe9nateurs ?",options:["5 ans","6 ans","7 ans","9 ans"],correct:1,explanation:"Les s\xe9nateurs sont \xe9lus pour un mandat de 6 ans. Le S\xe9nat est renouvel\xe9 par moiti\xe9 tous les trois ans, assurant ainsi une continuit\xe9 institutionnelle.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:17,question:"Qui poss\xe8de le pouvoir ex\xe9cutif ?",options:["L'Assembl\xe9e nationale","Le pr\xe9sident de la R\xe9publique et le gouvernement","Le S\xe9nat","Le Conseil constitutionnel"],correct:1,explanation:"Le pouvoir ex\xe9cutif est d\xe9tenu par le pr\xe9sident de la R\xe9publique et le gouvernement dirig\xe9 par le Premier ministre. Ils sont charg\xe9s d'appliquer les lois et de gouverner.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:18,question:"Quelle condition est n\xe9cessaire pour voter aux \xe9lections ?",options:["Avoir un dipl\xf4me","\xcatre propri\xe9taire","\xcatre inscrit sur les listes \xe9lectorales","Payer des imp\xf4ts"],correct:2,explanation:"Pour voter, il faut obligatoirement \xeatre inscrit sur les listes \xe9lectorales de sa commune. L'inscription peut se faire en mairie ou en ligne.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:19,question:"Qui peut voter aux \xe9lections en France ?",options:["Tous les r\xe9sidents majeurs","Tous les citoyens fran\xe7ais majeurs","Tous les europ\xe9ens majeurs r\xe9sidents","Toute personne travaillant en France"],correct:1,explanation:"Peuvent voter aux \xe9lections nationales tous les citoyens fran\xe7ais majeurs (18 ans) jouissant de leurs droits civiques et inscrits sur les listes \xe9lectorales.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:20,question:"Que signifie \xab suffrage universel \xbb ?",options:["Seuls les hommes peuvent voter","Seuls les riches peuvent voter","Tous les citoyens majeurs peuvent voter","Seuls les dipl\xf4m\xe9s peuvent voter"],correct:2,explanation:"Le suffrage universel signifie que tous les citoyens majeurs ont le droit de voter, sans distinction de sexe, de fortune, de capacit\xe9 ou de race. C'est un principe d\xe9mocratique fondamental.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:21,question:"Concernant les partis politiques, quelle proposition est correcte ?",options:["Les partis politiques sont interdits en France","Les partis politiques concourent \xe0 l'expression du suffrage","Il ne peut exister que deux partis politiques en France","Les partis politiques sont nomm\xe9s par le Pr\xe9sident de la R\xe9publique"],correct:1,explanation:"Selon l'article 4 de la Constitution, les partis et groupements politiques concourent \xe0 l'expression du suffrage et se forment et exercent leur activit\xe9 librement.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:22,question:"Quel est le r\xf4le des d\xe9put\xe9s ?",options:["Ils dirigent les r\xe9gions","Ils votent les lois \xe0 l'Assembl\xe9e nationale","Ils nomment les ministres","Ils jugent les affaires p\xe9nales"],correct:1,explanation:"Les d\xe9put\xe9s sont \xe9lus pour si\xe9ger \xe0 l'Assembl\xe9e nationale o\xf9 ils examinent, discutent et votent les lois avec les s\xe9nateurs.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:23,question:"La s\xe9paration des pouvoirs est un principe fondamental. Quels sont les trois pouvoirs concern\xe9s ?",options:["Le pouvoir militaire, le pouvoir \xe9conomique et le pouvoir m\xe9diatique","Le pouvoir ex\xe9cutif, le pouvoir l\xe9gislatif et le pouvoir judiciaire","Le pouvoir pr\xe9sidentiel, le pouvoir minist\xe9riel et le pouvoir pr\xe9fectoral","Le pouvoir national, le pouvoir r\xe9gional et le pouvoir local"],correct:1,explanation:"La s\xe9paration des pouvoirs, th\xe9oris\xe9e par Montesquieu, distingue le pouvoir ex\xe9cutif (gouvernement), le pouvoir l\xe9gislatif (Parlement) et le pouvoir judiciaire (tribunaux) pour garantir l'\xe9quilibre d\xe9mocratique.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:24,question:"Qui poss\xe8de le pouvoir l\xe9gislatif ?",options:["Le Pr\xe9sident de la R\xe9publique seul","Le Parlement compos\xe9 de l'Assembl\xe9e nationale et du S\xe9nat","Le Premier ministre et son gouvernement","Le Conseil constitutionnel"],correct:1,explanation:"Le pouvoir l\xe9gislatif appartient au Parlement, compos\xe9 de l'Assembl\xe9e nationale et du S\xe9nat, qui vote les lois.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:25,question:"Qui sanctionne l'auteur d'un vol ?",options:["Le maire de la commune","Le Pr\xe9sident de la R\xe9publique","Le juge du tribunal","Le pr\xe9fet du d\xe9partement"],correct:2,explanation:"C'est le pouvoir judiciaire, repr\xe9sent\xe9 par un juge du tribunal, qui sanctionne l'auteur d'une infraction p\xe9nale comme le vol.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:26,question:"Qui \xe9lit les d\xe9put\xe9s ?",options:["Le Pr\xe9sident de la R\xe9publique","Les citoyens fran\xe7ais inscrits sur les listes \xe9lectorales","Les s\xe9nateurs","Les conseillers municipaux"],correct:1,explanation:"Les d\xe9put\xe9s sont \xe9lus au suffrage universel direct par les citoyens fran\xe7ais majeurs inscrits sur les listes \xe9lectorales lors des \xe9lections l\xe9gislatives.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:27,question:"Qui vote les lois ?",options:["Le gouvernement","Le Parlement (Assembl\xe9e nationale et S\xe9nat)","Le Conseil d'\xc9tat","Les pr\xe9fets"],correct:1,explanation:"Le Parlement, compos\xe9 de l'Assembl\xe9e nationale et du S\xe9nat, est l'institution qui vote les lois en France.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:28,question:"Qui r\xe9side au palais de l'\xc9lys\xe9e ?",options:["Le Premier ministre","Le Pr\xe9sident de l'Assembl\xe9e nationale","Le Pr\xe9sident de la R\xe9publique","Le Pr\xe9sident du S\xe9nat"],correct:2,explanation:"Le palais de l'\xc9lys\xe9e, situ\xe9 \xe0 Paris, est la r\xe9sidence officielle et le lieu de travail du Pr\xe9sident de la R\xe9publique fran\xe7aise.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:29,question:"Combien y a-t-il de d\xe9partements en France ?",options:["96 d\xe9partements","101 d\xe9partements","85 d\xe9partements","110 d\xe9partements"],correct:1,explanation:"La France compte 101 d\xe9partements : 96 en m\xe9tropole et 5 d\xe9partements d'outre-mer (Guadeloupe, Martinique, Guyane, La R\xe9union, Mayotte).",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:30,question:"Qui repr\xe9sente l'\xc9tat dans un d\xe9partement ?",options:["Le pr\xe9sident du conseil d\xe9partemental","Le pr\xe9fet","Le maire du chef-lieu","Le d\xe9put\xe9"],correct:1,explanation:"Le pr\xe9fet est le repr\xe9sentant de l'\xc9tat dans le d\xe9partement et veille \xe0 l'application des lois et des d\xe9cisions du gouvernement.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:31,question:"Qui dirige la commune ?",options:["Le pr\xe9fet","Le pr\xe9sident du conseil d\xe9partemental","Le maire","Le sous-pr\xe9fet"],correct:2,explanation:"Le maire est \xe9lu par le conseil municipal et dirige la commune. Il exerce \xe0 la fois des comp\xe9tences communales et repr\xe9sente l'\xc9tat dans la commune.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:32,question:"Est-ce que le pr\xe9sident de la R\xe9publique a tous les pouvoirs ?",options:["Oui, il peut faire tout ce qu'il veut","Non, ses pouvoirs sont d\xe9finis et limit\xe9s par la Constitution","Oui, mais seulement en temps de guerre","Non, il n'a aucun pouvoir r\xe9el"],correct:1,explanation:"Le Pr\xe9sident de la R\xe9publique dispose de pouvoirs importants mais d\xe9finis et limit\xe9s par la Constitution. La s\xe9paration des pouvoirs garantit l'\xe9quilibre d\xe9mocratique.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:33,question:"Qui est le pr\xe9fet ?",options:["Un \xe9lu local choisi par les citoyens du d\xe9partement","Le repr\xe9sentant de l'\xc9tat dans le d\xe9partement","Le pr\xe9sident du conseil r\xe9gional","Un magistrat nomm\xe9 par le ministre de la Justice"],correct:1,explanation:"Le pr\xe9fet est un haut fonctionnaire nomm\xe9 par le Pr\xe9sident de la R\xe9publique qui repr\xe9sente l'\xc9tat et le gouvernement dans le d\xe9partement.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:34,question:"Quel est le r\xf4le du Parlement ?",options:["Juger les criminels","Voter les lois et contr\xf4ler l'action du gouvernement","Diriger l'arm\xe9e","Nommer les pr\xe9fets"],correct:1,explanation:"Le Parlement vote les lois, vote le budget de l'\xc9tat et contr\xf4le l'action du gouvernement par divers moyens (questions, commissions d'enqu\xeate, motion de censure).",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:35,question:"Quel est le r\xe9gime politique de la France aujourd'hui ?",options:["Une monarchie constitutionnelle","Une R\xe9publique","Une dictature","Un empire"],correct:1,explanation:"La France est une R\xe9publique, actuellement la Cinqui\xe8me R\xe9publique fond\xe9e en 1958. C'est un r\xe9gime d\xe9mocratique o\xf9 le pouvoir appartient au peuple.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:36,question:"Combien d'\xc9tats font partie de l'Union europ\xe9enne au 1er janvier 2025 ?",options:["25 \xc9tats membres","27 \xc9tats membres","28 \xc9tats membres","30 \xc9tats membres"],correct:1,explanation:"L'Union europ\xe9enne compte 27 \xc9tats membres depuis le retrait du Royaume-Uni en 2020 (Brexit).",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:37,question:"Quel \xc9tat n'est pas membre de l'Union europ\xe9enne ?",options:["L'Allemagne","La Suisse","L'Espagne","La Belgique"],correct:1,explanation:"La Suisse n'est pas membre de l'Union europ\xe9enne. Elle a choisi de rester en dehors tout en maintenant des accords bilat\xe9raux avec l'UE.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:38,question:"Quelle condition est n\xe9cessaire pour voter aux \xe9lections europ\xe9ennes ?",options:["Avoir plus de 25 ans","\xcatre citoyen de l'Union europ\xe9enne et \xeatre inscrit sur les listes \xe9lectorales","\xcatre propri\xe9taire d'un bien immobilier","Avoir un dipl\xf4me universitaire"],correct:1,explanation:"Pour voter aux \xe9lections europ\xe9ennes en France, il faut \xeatre citoyen de l'Union europ\xe9enne, avoir 18 ans et \xeatre inscrit sur les listes \xe9lectorales.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:39,question:"\xc0 quelle fr\xe9quence les \xe9lections europ\xe9ennes sont-elles organis\xe9es ?",options:["Tous les 3 ans","Tous les 5 ans","Tous les 7 ans","Tous les 4 ans"],correct:1,explanation:"Les \xe9lections europ\xe9ennes pour \xe9lire les d\xe9put\xe9s du Parlement europ\xe9en ont lieu tous les 5 ans dans tous les \xc9tats membres de l'Union europ\xe9enne.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:40,question:"Quel pays est un pays fondateur de l'Union europ\xe9enne ?",options:["Le Royaume-Uni","La France","L'Espagne","La Su\xe8de"],correct:1,explanation:"La France fait partie des six pays fondateurs de la Communaut\xe9 europ\xe9enne en 1957 avec l'Allemagne, l'Italie, la Belgique, les Pays-Bas et le Luxembourg.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:41,question:"Quelle est la monnaie utilis\xe9e en France ?",options:["Le franc fran\xe7ais","L'euro","Le dollar europ\xe9en","La livre sterling"],correct:1,explanation:"La France utilise l'euro depuis 2002, la monnaie unique de la zone euro adopt\xe9e par 20 pays de l'Union europ\xe9enne.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:42,question:"Qui \xe9lit les d\xe9put\xe9s europ\xe9ens ?",options:["Les gouvernements des \xc9tats membres","Le Pr\xe9sident de la R\xe9publique","Les citoyens europ\xe9ens au suffrage universel direct","Le Parlement national de chaque pays"],correct:2,explanation:"Les d\xe9put\xe9s europ\xe9ens sont \xe9lus au suffrage universel direct par les citoyens de l'Union europ\xe9enne tous les 5 ans.",category:"Syst\xe8me institutionnel",tags:["CSP"]},{id:43,question:"Quand c\xe9l\xe8bre-t-on la journ\xe9e de l'Europe ?",options:["Le 14 juillet","Le 1er mai","Le 9 mai","Le 8 mai"],correct:2,explanation:"La journ\xe9e de l'Europe est c\xe9l\xe9br\xe9e le 9 mai, en comm\xe9moration de la d\xe9claration Schuman de 1950 qui marque le d\xe9but de la construction europ\xe9enne.",category:"Syst\xe8me institutionnel",tags:["CSP","CR"]},{id:44,question:"Comment s'appelle la Constitution actuelle de la France ?",options:["La Constitution de la IVe R\xe9publique","La Constitution de la Ve R\xe9publique","La Constitution de 1789","La Constitution europ\xe9enne"],correct:1,explanation:"La Constitution actuelle de la France est celle de la Ve R\xe9publique, adopt\xe9e en 1958 sous l'impulsion du g\xe9n\xe9ral de Gaulle.",category:"Droits et devoirs",tags:["CSP"]},{id:45,question:"Comment s'appelle le texte qui \xe9nonce les droits et devoirs des personnes r\xe9sidant en France ?",options:["Le Code p\xe9nal","La Constitution","Le Code de la nationalit\xe9","Le trait\xe9 de Maastricht"],correct:1,explanation:"La Constitution fran\xe7aise, ainsi que les textes qui lui sont associ\xe9s comme la D\xe9claration des droits de l'homme et du citoyen, \xe9noncent les droits et devoirs des personnes en France.",category:"Droits et devoirs",tags:["CSP"]},{id:46,question:"Concernant les droits individuels, quelle proposition est correcte ?",options:["Ils peuvent \xeatre exerc\xe9s sans aucune limite","Ils ne s'appliquent qu'aux citoyens fran\xe7ais","Ils s'exercent dans le respect de la loi et des droits d'autrui","Ils sont d\xe9finis par chaque r\xe9gion"],correct:2,explanation:"Les droits individuels s'exercent dans le respect de la loi et des droits d'autrui, garantissant ainsi un \xe9quilibre entre libert\xe9 individuelle et vie en soci\xe9t\xe9.",category:"Droits et devoirs",tags:["CSP"]},{id:47,question:"De quelle ann\xe9e date la D\xe9claration des droits de l'homme et du citoyen ?",options:["1789","1848","1945","1958"],correct:0,explanation:"La D\xe9claration des droits de l'homme et du citoyen a \xe9t\xe9 adopt\xe9e le 26 ao\xfbt 1789, pendant la R\xe9volution fran\xe7aise.",category:"Droits et devoirs",tags:["CSP"]},{id:48,question:"Lequel de ces droits est un droit fondamental ?",options:["Le droit de conduire sans permis","Le droit de ne pas payer d'imp\xf4ts","Le droit \xe0 l'\xe9ducation","Le droit de refuser toute loi"],correct:2,explanation:"Le droit \xe0 l'\xe9ducation est un droit fondamental garanti par la Constitution, l'instruction \xe9tant obligatoire pour tous les enfants.",category:"Droits et devoirs",tags:["CSP"]},{id:49,question:"Parmi ces textes, lequel garantit les droits et libert\xe9s en France ?",options:["Le Code du travail","La D\xe9claration des droits de l'homme et du citoyen","Le r\xe8glement int\xe9rieur des \xe9coles","Le Code de la route"],correct:1,explanation:"La D\xe9claration des droits de l'homme et du citoyen de 1789 fait partie du bloc de constitutionnalit\xe9 et garantit les droits et libert\xe9s fondamentaux en France.",category:"Droits et devoirs",tags:["CSP"]},{id:50,question:"Qu'est-ce que la libert\xe9 d'expression ?",options:["Le droit de dire tout ce qu'on veut sans cons\xe9quence","Le droit d'exprimer ses opinions dans le respect de la loi","Le droit r\xe9serv\xe9 aux journalistes","Le droit de critiquer uniquement le gouvernement"],correct:1,explanation:"La libert\xe9 d'expression est le droit d'exprimer ses opinions et id\xe9es dans le respect de la loi, notamment sans tenir de propos diffamatoires, injurieux ou incitant \xe0 la haine.",category:"Droits et devoirs",tags:["CSP"]},{id:51,question:"Quel droit permet \xe0 une personne de se d\xe9fendre devant la justice ?",options:["Le droit de vote","Le droit d'asile","Le droit \xe0 un proc\xe8s \xe9quitable","Le droit de propri\xe9t\xe9"],correct:2,explanation:"Le droit \xe0 un proc\xe8s \xe9quitable garantit \xe0 toute personne le droit de se d\xe9fendre devant un tribunal impartial, avec l'assistance d'un avocat.",category:"Droits et devoirs",tags:["CSP"]},{id:52,question:"Quel est le texte fondateur \xe9tablissant en France les droits et les devoirs de chaque citoyen ?",options:["Le Code civil","La D\xe9claration des droits de l'homme et du citoyen","Le trait\xe9 de Rome","La Charte de l'environnement"],correct:1,explanation:"La D\xe9claration des droits de l'homme et du citoyen de 1789 est le texte fondateur qui \xe9tablit les droits et devoirs des citoyens fran\xe7ais.",category:"Droits et devoirs",tags:["CSP"]},{id:53,question:"Quel texte a \xe9t\xe9 adopt\xe9 pendant la R\xe9volution fran\xe7aise ?",options:["La Constitution de la Ve R\xe9publique","Le Code Napol\xe9on","La D\xe9claration des droits de l'homme et du citoyen","La Charte sociale europ\xe9enne"],correct:2,explanation:"La D\xe9claration des droits de l'homme et du citoyen a \xe9t\xe9 adopt\xe9e le 26 ao\xfbt 1789, au d\xe9but de la R\xe9volution fran\xe7aise.",category:"Droits et devoirs",tags:["CSP"]},{id:54,question:"Quelle libert\xe9 permet \xe0 une personne de ne pas avoir de religion ?",options:["La libert\xe9 d'association","La libert\xe9 de conscience et de culte","La libert\xe9 d'expression","La libert\xe9 de circulation"],correct:1,explanation:"La libert\xe9 de conscience permet \xe0 chacun de choisir sa religion ou de n'en avoir aucune, principe fondamental de la la\xefcit\xe9 fran\xe7aise.",category:"Droits et devoirs",tags:["CSP"]},{id:55,question:"Une femme peut avorter :",options:["Jamais, c'est interdit en France","Uniquement avec l'autorisation de son conjoint","Librement jusqu'\xe0 14 semaines de grossesse","Uniquement en cas de danger pour sa vie"],correct:2,explanation:"En France, l'interruption volontaire de grossesse (IVG) est l\xe9gale et peut \xeatre pratiqu\xe9e jusqu'\xe0 14 semaines de grossesse depuis la loi de 2022.",category:"Droits et devoirs",tags:["CSP"]},{id:56,question:"Est-il toujours possible de divorcer ?",options:["Non, il faut l'accord des deux \xe9poux","Oui, le divorce est toujours possible","Non, seulement en cas de faute grave","Oui, mais uniquement apr\xe8s 10 ans de mariage"],correct:1,explanation:"Le divorce est toujours possible en France, soit par consentement mutuel, soit par acceptation du principe de la rupture, soit pour faute ou alt\xe9ration d\xe9finitive du lien conjugal.",category:"Droits et devoirs",tags:["CSP","CR"]},{id:57,question:"La peine de mort est :",options:["Appliqu\xe9e pour les crimes les plus graves","Abolie en France depuis 1981","Autoris\xe9e uniquement en temps de guerre","D\xe9cid\xe9e par r\xe9f\xe9rendum au cas par cas"],correct:1,explanation:"La peine de mort a \xe9t\xe9 abolie en France en 1981 sous la pr\xe9sidence de Fran\xe7ois Mitterrand, avec la loi port\xe9e par Robert Badinter.",category:"Droits et devoirs",tags:["CSP","CR"]},{id:58,question:"Concernant les limites aux libert\xe9s individuelles, quelle proposition est correcte ?",options:["Il n'y a aucune limite aux libert\xe9s individuelles","Les libert\xe9s sont limit\xe9es par le respect de l'ordre public et des droits d'autrui","Les libert\xe9s peuvent \xeatre suspendues \xe0 tout moment","Seul le Pr\xe9sident peut limiter les libert\xe9s"],correct:1,explanation:"Les libert\xe9s individuelles s'exercent dans le cadre de la loi et sont limit\xe9es par le respect de l'ordre public et des droits d'autrui.",category:"Droits et devoirs",tags:["CSP"]},{id:59,question:"En France, est-ce l\xe9gal d'\xeatre mari\xe9 \xe0 plusieurs personnes en m\xeame temps ?",options:["Oui, si toutes les parties sont consentantes","Oui, mais limit\xe9 \xe0 deux \xe9poux","Non, la polygamie est interdite","Oui, pour certaines religions uniquement"],correct:2,explanation:"La polygamie est strictement interdite en France. Le mariage ne peut unir que deux personnes et la bigamie est un d\xe9lit p\xe9nal.",category:"Droits et devoirs",tags:["CSP"]},{id:60,question:"Faut-il r\xe9duire ses d\xe9chets ?",options:["Non, c'est uniquement la responsabilit\xe9 des entreprises","Oui, c'est un devoir citoyen et environnemental","Non, le recyclage suffit","C'est une recommandation sans importance"],correct:1,explanation:"R\xe9duire ses d\xe9chets est un devoir citoyen et environnemental inscrit dans la Charte de l'environnement, partie int\xe9grante de la Constitution fran\xe7aise depuis 2005.",category:"Droits et devoirs",tags:["CSP"]},{id:61,question:"Jeter une bouteille dans la rue est :",options:["Autoris\xe9 si c'est biod\xe9gradable","Interdit et puni d'une amende","Permis la nuit uniquement","Tol\xe9r\xe9 si c'est occasionnel"],correct:1,explanation:"Jeter des d\xe9chets sur la voie publique constitue une infraction sanctionn\xe9e par une amende pouvant aller jusqu'\xe0 68 euros selon le Code de la sant\xe9 publique.",category:"Droits et devoirs",tags:["CSP"]},{id:62,question:"Pourquoi les libert\xe9s individuelles peuvent-elles \xeatre limit\xe9es ?",options:["Pour des raisons \xe9conomiques","Pour prot\xe9ger l'ordre public et les droits d'autrui","Selon la d\xe9cision du maire uniquement","Pendant les p\xe9riodes \xe9lectorales"],correct:1,explanation:"Les libert\xe9s individuelles peuvent \xeatre limit\xe9es pour pr\xe9server l'ordre public, la s\xe9curit\xe9 et les droits des autres citoyens, conform\xe9ment \xe0 la D\xe9claration des droits de l'homme et du citoyen.",category:"Droits et devoirs",tags:["CSP"]},{id:63,question:"Que doit faire une personne en cas d'accident ?",options:["Quitter les lieux rapidement","Porter secours aux victimes et alerter les secours","Attendre l'arriv\xe9e spontan\xe9e de la police","Prendre des photos uniquement"],correct:1,explanation:"Toute personne t\xe9moin d'un accident a l'obligation l\xe9gale de porter assistance aux victimes et d'alerter les secours, sous peine de poursuites pour non-assistance \xe0 personne en danger.",category:"Droits et devoirs",tags:["CSP"]},{id:64,question:"Que permet la citoyennet\xe9 fran\xe7aise ?",options:["D'\xeatre exempt\xe9 d'imp\xf4ts","De voter et d'\xeatre \xe9lu","De travailler sans contrat","D'ignorer certaines lois"],correct:1,explanation:"La citoyennet\xe9 fran\xe7aise conf\xe8re des droits politiques essentiels, notamment le droit de voter et d'\xeatre \xe9lu aux \xe9lections, ainsi que l'acc\xe8s \xe0 certains emplois publics.",category:"Droits et devoirs",tags:["CSP"]},{id:65,question:"Que risque une personne qui ne respecte pas la loi ?",options:["Un simple avertissement oral","Des sanctions p\xe9nales (amende, prison)","Une demande de d\xe9m\xe9nagement","Rien si c'est la premi\xe8re fois"],correct:1,explanation:"Le non-respect de la loi expose \xe0 des sanctions p\xe9nales proportionn\xe9es \xe0 la gravit\xe9 de l'infraction, allant de l'amende \xe0 la peine d'emprisonnement.",category:"Droits et devoirs",tags:["CSP"]},{id:66,question:"Quel est le r\xf4le de la gendarmerie ?",options:["Collecter les imp\xf4ts","Assurer la s\xe9curit\xe9 publique et faire respecter la loi","G\xe9rer les h\xf4pitaux","Organiser les \xe9lections"],correct:1,explanation:"La gendarmerie nationale est une force de s\xe9curit\xe9 militaire charg\xe9e de missions de police administrative et judiciaire, principalement dans les zones rurales et p\xe9riurbaines.",category:"Droits et devoirs",tags:["CSP"]},{id:67,question:"Quel est le r\xf4le de la police ?",options:["D\xe9fendre le territoire national","Maintenir l'ordre public et lutter contre la d\xe9linquance","Juger les infractions","Voter les lois"],correct:1,explanation:"La police nationale assure le maintien de l'ordre public, la protection des personnes et des biens, et la lutte contre la criminalit\xe9, principalement en zones urbaines.",category:"Droits et devoirs",tags:["CSP","CR"]},{id:68,question:"Qu'est-ce qu'une infraction ?",options:["Une demande administrative","Un acte contraire \xe0 la loi","Un droit du citoyen","Une proc\xe9dure judiciaire"],correct:1,explanation:"Une infraction est un comportement interdit par la loi et sanctionn\xe9 p\xe9nalement. Elle se classe en trois cat\xe9gories : contravention, d\xe9lit et crime.",category:"Droits et devoirs",tags:["CSP"]},{id:69,question:"Comment peut-on r\xe9duire ses d\xe9chets ?",options:["En les jetant dans la nature","En triant, recyclant et r\xe9duisant sa consommation","En les br\xfblant chez soi","En les cachant"],correct:1,explanation:"La r\xe9duction des d\xe9chets passe par le tri s\xe9lectif, le recyclage, le compostage et l'adoption de modes de consommation responsables pour limiter la production de d\xe9chets.",category:"Droits et devoirs",tags:["CSP"]},{id:70,question:"D\xe9poser une machine \xe0 laver cass\xe9e sur le trottoir est :",options:["Autoris\xe9 les jours de collecte","Interdit, c'est un d\xe9p\xf4t sauvage passible d'amende","Permis si on pr\xe9vient la mairie","Tol\xe9r\xe9 dans les grandes villes"],correct:1,explanation:"Abandonner des d\xe9chets encombrants sur la voie publique constitue un d\xe9p\xf4t sauvage sanctionn\xe9 par une amende pouvant atteindre 1 500 euros. Il faut utiliser les d\xe9chetteries ou les services de collecte adapt\xe9s.",category:"Droits et devoirs",tags:["CSP"]},{id:71,question:"En quoi consiste la traite des \xeatres humains ?",options:["Le transport l\xe9gal de personnes","L'exploitation de personnes par la force, la tromperie ou la contrainte","Un contrat de travail international","L'aide humanitaire aux migrants"],correct:1,explanation:"La traite des \xeatres humains est un crime qui consiste \xe0 exploiter des personnes (travail forc\xe9, prostitution, pr\xe9l\xe8vement d'organes) par la violence, la menace ou la tromperie.",category:"Droits et devoirs",tags:["CSP"]},{id:72,question:"Que doit faire une victime de violences ?",options:["Garder le silence par honte","Porter plainte et demander de l'aide","Se venger elle-m\xeame","D\xe9m\xe9nager sans rien dire"],correct:1,explanation:"Une victime de violences doit porter plainte aupr\xe8s de la police ou de la gendarmerie et peut contacter des associations d'aide aux victimes. Le num\xe9ro 3919 est disponible pour les violences conjugales.",category:"Droits et devoirs",tags:["CSP","CR"]},{id:73,question:"Quelle est l'infraction la plus grave ?",options:["La contravention","Le crime","Le d\xe9lit","L'avertissement"],correct:1,explanation:"Le crime est l'infraction la plus grave, jug\xe9e par la cour d'assises et passible de peines pouvant aller jusqu'\xe0 la r\xe9clusion criminelle \xe0 perp\xe9tuit\xe9.",category:"Droits et devoirs",tags:["CSP","CR"]},{id:74,question:"En quelle ann\xe9e a d\xe9but\xe9 la R\xe9volution fran\xe7aise ?",options:["1789","1799","1804","1815"],correct:0,explanation:"La R\xe9volution fran\xe7aise a d\xe9but\xe9 en 1789 avec la prise de la Bastille le 14 juillet, marquant la fin de la monarchie absolue et l'av\xe8nement des id\xe9aux de libert\xe9, \xe9galit\xe9 et fraternit\xe9.",category:"Histoire et culture",tags:["CSP"]},{id:75,question:"Qui \xe9tait Napol\xe9on Ier ?",options:["Un philosophe des Lumi\xe8res","Un empereur fran\xe7ais qui a r\xe9gn\xe9 de 1804 \xe0 1815","Un roi de France du Moyen \xc2ge","Un pr\xe9sident de la R\xe9publique"],correct:1,explanation:"Napol\xe9on Bonaparte a \xe9t\xe9 empereur des Fran\xe7ais de 1804 \xe0 1815. Il a marqu\xe9 l'histoire par ses r\xe9formes (Code civil) et ses conqu\xeates militaires en Europe.",category:"Histoire et culture",tags:["CSP"]},{id:76,question:"Lequel de ces personnages historiques est fran\xe7ais ?",options:["Winston Churchill","Louis Pasteur","Leonardo da Vinci","William Shakespeare"],correct:1,explanation:"Louis Pasteur \xe9tait un scientifique fran\xe7ais c\xe9l\xe8bre pour ses d\xe9couvertes sur les vaccins et la pasteurisation, qui ont r\xe9volutionn\xe9 la m\xe9decine et l'hygi\xe8ne au XIXe si\xe8cle.",category:"Histoire et culture",tags:["CSP"]},{id:77,question:"Dans quelle R\xe9publique est-on aujourd'hui ?",options:["IIIe R\xe9publique","IVe R\xe9publique","Ve R\xe9publique","VIe R\xe9publique"],correct:2,explanation:"La France vit sous la Ve R\xe9publique depuis 1958, instaur\xe9e par le g\xe9n\xe9ral de Gaulle. Cette R\xe9publique se caract\xe9rise par un r\xe9gime semi-pr\xe9sidentiel.",category:"Histoire et culture",tags:["CSP"]},{id:78,question:"Qu'est-ce que la Shoah ?",options:["Une bataille de la Premi\xe8re Guerre mondiale","Le g\xe9nocide des Juifs par les nazis pendant la Seconde Guerre mondiale","Un trait\xe9 de paix europ\xe9en","Une r\xe9volution industrielle"],correct:1,explanation:"La Shoah d\xe9signe le g\xe9nocide syst\xe9matique des Juifs d'Europe par le r\xe9gime nazi pendant la Seconde Guerre mondiale, qui a caus\xe9 la mort de six millions de personnes.",category:"Histoire et culture",tags:["CSP"]},{id:79,question:"Quel pays ou r\xe9gion du monde a \xe9t\xe9 colonis\xe9 par la France ?",options:["L'Inde","L'Alg\xe9rie","Le Br\xe9sil","L'Australie"],correct:1,explanation:"L'Alg\xe9rie a \xe9t\xe9 colonis\xe9e par la France de 1830 \xe0 1962. La France a \xe9galement colonis\xe9 d'autres territoires en Afrique, en Asie et dans les Cara\xefbes.",category:"Histoire et culture",tags:["CSP"]},{id:80,question:"Qui a rendu l'\xe9cole gratuite, la\xefque et obligatoire ?",options:["Napol\xe9on Bonaparte","Jules Ferry","Victor Hugo","Jean Jaur\xe8s"],correct:1,explanation:"Jules Ferry, ministre de l'Instruction publique, a instaur\xe9 les lois de 1881-1882 rendant l'\xe9cole primaire gratuite, la\xefque et obligatoire pour tous les enfants de 6 \xe0 13 ans.",category:"Histoire et culture",tags:["CSP"]},{id:81,question:"Quand a eu lieu la Seconde Guerre mondiale ?",options:["1914-1918","1939-1945","1870-1871","1950-1953"],correct:1,explanation:"La Seconde Guerre mondiale s'est d\xe9roul\xe9e de 1939 \xe0 1945, opposant les Alli\xe9s aux puissances de l'Axe, et s'est termin\xe9e par la capitulation de l'Allemagne en mai 1945 et du Japon en septembre 1945.",category:"Histoire et culture",tags:["CSP"]},{id:82,question:"Quand a eu lieu la Premi\xe8re Guerre mondiale ?",options:["1870-1871","1914-1918","1939-1945","1905-1910"],correct:1,explanation:"La Premi\xe8re Guerre mondiale s'est d\xe9roul\xe9e de 1914 \xe0 1918, d\xe9butant apr\xe8s l'assassinat de l'archiduc Fran\xe7ois-Ferdinand et se terminant par l'armistice du 11 novembre 1918.",category:"Histoire et culture",tags:["CSP"]},{id:83,question:"En quelle ann\xe9e a \xe9t\xe9 cr\xe9\xe9e la Communaut\xe9 \xc9conomique Europ\xe9enne (CEE) ?",options:["1945","1951","1957","1992"],correct:2,explanation:"La CEE a \xe9t\xe9 cr\xe9\xe9e en 1957 par le trait\xe9 de Rome, sign\xe9 par six pays fondateurs dont la France, \xe9tablissant un march\xe9 commun europ\xe9en.",category:"Histoire et culture",tags:["CSP"]},{id:84,question:"Le 11 novembre est un jour f\xe9ri\xe9. \xc0 quoi correspond cette date ?",options:["La lib\xe9ration de Paris","L'armistice de la Premi\xe8re Guerre mondiale","La fin de la Seconde Guerre mondiale","La f\xeate de la Victoire de 1945"],correct:1,explanation:"Le 11 novembre comm\xe9more l'armistice de 1918 qui mit fin aux combats de la Premi\xe8re Guerre mondiale. C'est un jour de m\xe9moire pour honorer tous les morts pour la France.",category:"Histoire et culture",tags:["CSP"]},{id:85,question:"Qui a \xe9t\xe9 le premier Pr\xe9sident \xe9lu sous la Ve R\xe9publique ?",options:["Vincent Auriol","Charles de Gaulle","Georges Pompidou","Fran\xe7ois Mitterrand"],correct:1,explanation:"Charles de Gaulle a \xe9t\xe9 \xe9lu premier Pr\xe9sident de la Ve R\xe9publique en d\xe9cembre 1958, apr\xe8s avoir fond\xe9 cette nouvelle R\xe9publique la m\xeame ann\xe9e.",category:"Histoire et culture",tags:["CSP"]},{id:86,question:"En quelle ann\xe9e l'esclavage a-t-il \xe9t\xe9 aboli d\xe9finitivement en France ?",options:["1789","1794","1848","1865"],correct:2,explanation:"L'esclavage a \xe9t\xe9 d\xe9finitivement aboli en France en 1848 gr\xe2ce au d\xe9cret sign\xe9 par Victor Sch\u0153lcher sous la Seconde R\xe9publique, apr\xe8s une premi\xe8re abolition en 1794 qui avait \xe9t\xe9 annul\xe9e par Napol\xe9on.",category:"Histoire et culture",tags:["CSP"]},{id:87,question:"Depuis quelle ann\xe9e l'\xe9cole publique est-elle gratuite ?",options:["1789","1848","1881","1905"],correct:2,explanation:"L'\xe9cole publique est devenue gratuite en 1881 gr\xe2ce aux lois de Jules Ferry, qui ont \xe9galement rendu l'instruction primaire obligatoire et la\xefque.",category:"Histoire et culture",tags:["CSP"]},{id:88,question:"Combien y a-t-il eu de r\xe9publiques en France ?",options:["3","4","5","6"],correct:2,explanation:"La France a connu cinq r\xe9publiques depuis 1792 : la Premi\xe8re (1792-1804), la Deuxi\xe8me (1848-1852), la Troisi\xe8me (1870-1940), la Quatri\xe8me (1946-1958) et la Cinqui\xe8me depuis 1958.",category:"Histoire et culture",tags:["CSP"]},{id:89,question:"Qui \xe9tait le roi de France au moment de la R\xe9volution fran\xe7aise ?",options:["Louis XIV","Louis XV","Louis XVI","Louis XVIII"],correct:2,explanation:"Louis XVI \xe9tait roi de France lorsque la R\xe9volution fran\xe7aise a \xe9clat\xe9 en 1789. Il a \xe9t\xe9 guillotin\xe9 en 1793 apr\xe8s la proclamation de la R\xe9publique.",category:"Histoire et culture",tags:["CSP"]},{id:90,question:"Qui a fond\xe9 la Ve R\xe9publique ?",options:["Fran\xe7ois Mitterrand","Charles de Gaulle","Georges Pompidou","Ren\xe9 Coty"],correct:1,explanation:"Charles de Gaulle a fond\xe9 la Ve R\xe9publique en 1958, \xe9tablissant une nouvelle Constitution qui renfor\xe7ait les pouvoirs du Pr\xe9sident de la R\xe9publique.",category:"Histoire et culture",tags:["CSP"]},{id:91,question:"Que c\xe9l\xe8bre-t-on le 14 juillet ?",options:["La victoire de 1918","La lib\xe9ration de Paris","La prise de la Bastille","L'abolition de l'esclavage"],correct:2,explanation:"Le 14 juillet comm\xe9more la prise de la Bastille en 1789, \xe9v\xe9nement symbolique du d\xe9but de la R\xe9volution fran\xe7aise et de la fin de l'absolutisme royal.",category:"Histoire et culture",tags:["CSP"]},{id:92,question:"Quelle guerre a eu lieu entre 1914 et 1918 ?",options:["La guerre de Cent Ans","La Premi\xe8re Guerre mondiale","La Seconde Guerre mondiale","La guerre franco-prussienne"],correct:1,explanation:"La Premi\xe8re Guerre mondiale s'est d\xe9roul\xe9e de 1914 \xe0 1918, impliquant la France aux c\xf4t\xe9s des Alli\xe9s contre les Empires centraux.",category:"Histoire et culture",tags:["CSP"]},{id:93,question:"Pourquoi l'ann\xe9e 1958 est importante pour la France ?",options:["Cr\xe9ation de l'Union europ\xe9enne","Fondation de la Ve R\xe9publique","Fin de la Seconde Guerre mondiale","D\xe9but de la IVe R\xe9publique"],correct:1,explanation:"En 1958, la Ve R\xe9publique a \xe9t\xe9 fond\xe9e par Charles de Gaulle avec l'adoption d'une nouvelle Constitution approuv\xe9e par r\xe9f\xe9rendum, rempla\xe7ant la IVe R\xe9publique.",category:"Histoire et culture",tags:["CSP"]},{id:94,question:"Quel fleuve coule en France ?",options:["Le Danube","La Seine","Le Rhin","La Volga"],correct:1,explanation:"La Seine est l'un des principaux fleuves fran\xe7ais, traversant Paris et se jetant dans la Manche. D'autres fleuves fran\xe7ais incluent la Loire, le Rh\xf4ne, la Garonne et le Rhin (fronti\xe8re).",category:"Histoire et culture",tags:["CSP"]},{id:95,question:"Quelle ville est fran\xe7aise ?",options:["Bruxelles","Gen\xe8ve","Lyon","Luxembourg"],correct:2,explanation:"Lyon est une grande ville fran\xe7aise situ\xe9e au confluent du Rh\xf4ne et de la Sa\xf4ne, et est la troisi\xe8me plus grande ville de France apr\xe8s Paris et Marseille.",category:"Histoire et culture",tags:["CSP"]},{id:96,question:"Quel oc\xe9an borde la c\xf4te ouest fran\xe7aise ?",options:["L'oc\xe9an Indien","L'oc\xe9an Arctique","L'oc\xe9an Atlantique","L'oc\xe9an Pacifique"],correct:2,explanation:"L'oc\xe9an Atlantique borde toute la c\xf4te ouest de la France m\xe9tropolitaine, de la Bretagne jusqu'\xe0 la fronti\xe8re espagnole au Pays basque.",category:"Histoire et culture",tags:["CSP"]},{id:97,question:"Qu'est-ce que Paris ?",options:["Un d\xe9partement fran\xe7ais","La capitale et plus grande ville de France","Une r\xe9gion fran\xe7aise","Un fleuve fran\xe7ais"],correct:1,explanation:"Paris est la capitale de la France et sa plus grande ville avec environ 2,2 millions d'habitants intra-muros, situ\xe9e sur la Seine en r\xe9gion \xcele-de-France.",category:"Histoire et culture",tags:["CSP"]},{id:98,question:"Quelle est la capitale de la France ?",options:["Marseille","Lyon","Paris","Bordeaux"],correct:2,explanation:"Paris est la capitale de la France depuis plus de mille ans, si\xe8ge du gouvernement et centre politique, \xe9conomique et culturel du pays.",category:"Histoire et culture",tags:["CSP"]},{id:99,question:"Sur quel continent se situe la France m\xe9tropolitaine ?",options:["L'Asie","L'Afrique","L'Europe","L'Am\xe9rique"],correct:2,explanation:"La France m\xe9tropolitaine est situ\xe9e en Europe occidentale, bord\xe9e par l'oc\xe9an Atlantique, la mer M\xe9diterran\xe9e et plusieurs pays europ\xe9ens.",category:"Histoire et culture",tags:["CSP"]},{id:100,question:"Quelle \xeele est un d\xe9partement d'outre-mer fran\xe7ais ?",options:["La Corse","La Martinique","La Sicile","Malte"],correct:1,explanation:"La Martinique est un d\xe9partement et r\xe9gion d'outre-mer fran\xe7ais situ\xe9 dans les Cara\xefbes. D'autres DOM incluent la Guadeloupe, la Guyane, La R\xe9union et Mayotte.",category:"Histoire et culture",tags:["CSP"]},{id:101,question:"Combien y a-t-il de r\xe9gions en France m\xe9tropolitaine ?",options:["13 r\xe9gions","18 r\xe9gions","22 r\xe9gions","27 r\xe9gions"],correct:0,explanation:"Depuis la r\xe9forme territoriale de 2016, la France m\xe9tropolitaine compte 13 r\xe9gions administratives.",category:"Histoire et culture",tags:["CSP"]},{id:102,question:"Quelle ville est un grand port maritime ?",options:["Lyon","Marseille","Toulouse","Strasbourg"],correct:1,explanation:"Marseille est le plus grand port maritime de France, situ\xe9 sur la mer M\xe9diterran\xe9e.",category:"Histoire et culture",tags:["CSP"]},{id:103,question:"Quelle est la mer au sud de la France m\xe9tropolitaine ?",options:["La mer du Nord","L'oc\xe9an Atlantique","La mer M\xe9diterran\xe9e","La Manche"],correct:2,explanation:"La mer M\xe9diterran\xe9e borde le sud de la France m\xe9tropolitaine, du Languedoc-Roussillon \xe0 la C\xf4te d'Azur.",category:"Histoire et culture",tags:["CSP"]},{id:104,question:"Quelle ville est situ\xe9e au bord de la mer M\xe9diterran\xe9e ?",options:["Bordeaux","Nantes","Nice","La Rochelle"],correct:2,explanation:"Nice est une ville majeure de la C\xf4te d'Azur, situ\xe9e sur le littoral m\xe9diterran\xe9en.",category:"Histoire et culture",tags:["CSP"]},{id:105,question:"O\xf9 se situe la Corse ?",options:["Dans l'oc\xe9an Atlantique","Dans la mer M\xe9diterran\xe9e","Dans la Manche","Dans la mer du Nord"],correct:1,explanation:"La Corse est une \xeele fran\xe7aise situ\xe9e dans la mer M\xe9diterran\xe9e, au sud-est de la France m\xe9tropolitaine.",category:"Histoire et culture",tags:["CSP"]},{id:106,question:"Quelle cha\xeene de montagnes est situ\xe9e entre la France et l'Italie ?",options:["Les Pyr\xe9n\xe9es","Le Massif central","Les Alpes","Les Vosges"],correct:2,explanation:"Les Alpes forment une fronti\xe8re naturelle entre la France et l'Italie, avec le Mont Blanc comme point culminant.",category:"Histoire et culture",tags:["CSP"]},{id:107,question:"Qui \xe9tait Moli\xe8re ?",options:["Un peintre","Un dramaturge et com\xe9dien","Un compositeur","Un sculpteur"],correct:1,explanation:"Moli\xe8re (1622-1673) \xe9tait un dramaturge et com\xe9dien fran\xe7ais, auteur de com\xe9dies c\xe9l\xe8bres comme 'Le Malade imaginaire' et 'L'Avare'.",category:"Histoire et culture",tags:["CSP"]},{id:108,question:"Qui \xe9tait Charles Baudelaire ?",options:["Un architecte","Un po\xe8te","Un homme politique","Un scientifique"],correct:1,explanation:"Charles Baudelaire (1821-1867) \xe9tait un po\xe8te fran\xe7ais majeur, auteur du recueil 'Les Fleurs du mal'.",category:"Histoire et culture",tags:["CSP"]},{id:109,question:"Qui \xe9tait George Sand ?",options:["Une danseuse","Une femme \xe9crivain","Une chanteuse","Une actrice"],correct:1,explanation:"George Sand (1804-1876), de son vrai nom Amantine Aurore Dupin, \xe9tait une femme \xe9crivain fran\xe7aise c\xe9l\xe8bre pour ses romans et sa vie libre.",category:"Histoire et culture",tags:["CSP"]},{id:110,question:"Qui \xe9tait Simone de Beauvoir ?",options:["Une philosophe et \xe9crivain f\xe9ministe","Une actrice","Une chanteuse","Une peintre"],correct:0,explanation:"Simone de Beauvoir (1908-1986) \xe9tait une philosophe, \xe9crivain et f\xe9ministe fran\xe7aise, auteure du 'Deuxi\xe8me Sexe'.",category:"Histoire et culture",tags:["CSP"]},{id:111,question:"Qui \xe9tait Albert Camus ?",options:["Un musicien","Un \xe9crivain et philosophe","Un r\xe9alisateur","Un architecte"],correct:1,explanation:"Albert Camus (1913-1960) \xe9tait un \xe9crivain, philosophe et journaliste fran\xe7ais, prix Nobel de litt\xe9rature en 1957, auteur de 'L'\xc9tranger'.",category:"Histoire et culture",tags:["CSP"]},{id:112,question:"Qui \xe9tait Paul C\xe9zanne ?",options:["Un \xe9crivain","Un peintre","Un compositeur","Un sculpteur"],correct:1,explanation:"Paul C\xe9zanne (1839-1906) \xe9tait un peintre fran\xe7ais post-impressionniste, consid\xe9r\xe9 comme un pr\xe9curseur de l'art moderne.",category:"Histoire et culture",tags:["CSP"]},{id:113,question:"Qui \xe9tait Marc Chagall ?",options:["Un peintre","Un \xe9crivain","Un musicien","Un architecte"],correct:0,explanation:"Marc Chagall (1887-1985) \xe9tait un peintre et artiste d'origine russe naturalis\xe9 fran\xe7ais, c\xe9l\xe8bre pour ses \u0153uvres color\xe9es et po\xe9tiques.",category:"Histoire et culture",tags:["CSP"]},{id:114,question:"Qui \xe9tait Jos\xe9phine Baker ?",options:["Une femme politique","Une chanteuse et danseuse","Une \xe9crivain","Une scientifique"],correct:1,explanation:"Jos\xe9phine Baker (1906-1975) \xe9tait une chanteuse, danseuse et r\xe9sistante franco-am\xe9ricaine, premi\xe8re femme noire au Panth\xe9on en 2021.",category:"Histoire et culture",tags:["CSP"]},{id:115,question:"Qui \xe9tait une chanteuse fran\xe7aise c\xe9l\xe8bre ?",options:["Marie Curie","\xc9dith Piaf","Simone Veil","George Sand"],correct:1,explanation:"\xc9dith Piaf (1915-1963) \xe9tait une chanteuse fran\xe7aise l\xe9gendaire, surnomm\xe9e 'La M\xf4me', c\xe9l\xe8bre pour 'La Vie en rose'.",category:"Histoire et culture",tags:["CSP"]},{id:116,question:"Qu'est-ce que le Louvre ?",options:["Une cath\xe9drale","Un mus\xe9e","Un palais pr\xe9sidentiel","Une universit\xe9"],correct:1,explanation:"Le Louvre est le plus grand mus\xe9e d'art du monde, situ\xe9 \xe0 Paris, abritant notamment la Joconde de L\xe9onard de Vinci.",category:"Histoire et culture",tags:["CSP"]},{id:117,question:"Qui \xe9tait Jean de la Fontaine ?",options:["Un po\xe8te et fabuliste","Un peintre","Un scientifique","Un homme politique"],correct:0,explanation:"Jean de la Fontaine (1621-1695) \xe9tait un po\xe8te fran\xe7ais c\xe9l\xe8bre pour ses Fables mettant en sc\xe8ne des animaux.",category:"Histoire et culture",tags:["CSP"]},{id:118,question:"Quel \xe9crivain est fran\xe7ais ?",options:["William Shakespeare","Victor Hugo","Miguel de Cervantes","Johann Wolfgang von Goethe"],correct:1,explanation:"Victor Hugo (1802-1885) \xe9tait un \xe9crivain fran\xe7ais majeur, auteur des 'Mis\xe9rables' et de 'Notre-Dame de Paris'.",category:"Histoire et culture",tags:["CSP"]},{id:119,question:"Dans quelle ville se trouve la tour Eiffel ?",options:["Lyon","Marseille","Paris","Bordeaux"],correct:2,explanation:"La tour Eiffel, construite en 1889 pour l'Exposition universelle, est situ\xe9e \xe0 Paris et est le monument le plus visit\xe9 au monde.",category:"Histoire et culture",tags:["CSP"]},{id:120,question:"Quand c\xe9l\xe8bre-t-on No\xebl ?",options:["Le 1er janvier","Le 14 juillet","Le 25 d\xe9cembre","Le 11 novembre"],correct:2,explanation:"No\xebl est c\xe9l\xe9br\xe9 le 25 d\xe9cembre en France, c'est une f\xeate chr\xe9tienne devenue tradition culturelle nationale.",category:"Histoire et culture",tags:["CSP"]},{id:121,question:"Quel num\xe9ro d'urgence permet d'appeler le SAMU ?",options:["17","15","18","112"],correct:1,explanation:"Le 15 est le num\xe9ro du SAMU (Service d'Aide M\xe9dicale Urgente) pour toutes les urgences m\xe9dicales en France.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:122,question:"Quel num\xe9ro d'urgence permet d'appeler les pompiers ?",options:["15","17","18","112"],correct:2,explanation:"Le 18 est le num\xe9ro des sapeurs-pompiers en France pour les incendies, accidents et autres situations d'urgence.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:123,question:"Apr\xe8s avoir obtenu le permis de conduire, que faut-il faire pour pouvoir conduire sa voiture ?",options:["Acheter une vignette automobile","Souscrire une assurance obligatoire","S'inscrire \xe0 la pr\xe9fecture","Faire une d\xe9claration en mairie"],correct:1,explanation:"L'assurance automobile est obligatoire en France pour tout v\xe9hicule en circulation. Sans assurance, il est interdit de conduire.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:124,question:"\xc0 quelles conditions un mariage est-il reconnu juridiquement ?",options:["Uniquement s'il est c\xe9l\xe9br\xe9 \xe0 l'\xe9glise","S'il est c\xe9l\xe9br\xe9 \xe0 la mairie par un officier d'\xe9tat civil","S'il est c\xe9l\xe9br\xe9 dans le pays d'origine","S'il est approuv\xe9 par la pr\xe9fecture"],correct:1,explanation:"En France, seul le mariage civil c\xe9l\xe9br\xe9 \xe0 la mairie par un officier d'\xe9tat civil a une valeur juridique. Le mariage religieux est facultatif.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:125,question:"Quand faut-il d\xe9clarer son enfant au service d'\xe9tat civil de la mairie ?",options:["Dans le mois suivant la naissance","Dans les 5 jours suivant la naissance","Dans les 3 mois suivant la naissance","Avant la naissance"],correct:1,explanation:"La d\xe9claration de naissance doit \xeatre faite dans les 5 jours suivant l'accouchement aupr\xe8s de la mairie du lieu de naissance.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:126,question:"Le travail non d\xe9clar\xe9 est :",options:["Autoris\xe9 pour les petits emplois","Interdit et sanctionn\xe9 par la loi","Autoris\xe9 si l'employeur est d'accord","Permis pour les \xe9tudiants"],correct:1,explanation:"Le travail non d\xe9clar\xe9 (travail au noir) est ill\xe9gal en France et expose l'employeur et le salari\xe9 \xe0 des sanctions p\xe9nales et financi\xe8res.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:127,question:"Que doit faire un employeur pour fixer un salaire ?",options:["Le n\xe9gocier librement avec le salari\xe9","Respecter au minimum le SMIC","Demander l'autorisation \xe0 la pr\xe9fecture","Consulter le conseil municipal"],correct:1,explanation:"L'employeur doit respecter le SMIC (Salaire Minimum Interprofessionnel de Croissance) qui est le salaire horaire minimum l\xe9gal en France.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:128,question:"Qu'est-ce que le SMIC ?",options:["Le Syst\xe8me Minimum d'Int\xe9gration Civique","Le Salaire Minimum Interprofessionnel de Croissance","Le Service Municipal d'Information Citoyenne","Le Statut Minimum des Ind\xe9pendants et Commer\xe7ants"],correct:1,explanation:"Le SMIC est le Salaire Minimum Interprofessionnel de Croissance, c'est le salaire horaire minimum en dessous duquel aucun salari\xe9 ne peut \xeatre pay\xe9.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:129,question:"Quelle est la premi\xe8re d\xe9marche \xe0 r\xe9aliser pour chercher un emploi ?",options:["Contacter directement les entreprises","S'inscrire aupr\xe8s de France Travail","Publier une annonce dans le journal","Se pr\xe9senter \xe0 la mairie"],correct:1,explanation:"L'inscription \xe0 France Travail (anciennement P\xf4le emploi) est la premi\xe8re d\xe9marche recommand\xe9e pour b\xe9n\xe9ficier d'un accompagnement dans la recherche d'emploi.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:130,question:"Quelle est la dur\xe9e l\xe9gale du temps de travail par semaine ?",options:["40 heures","35 heures","39 heures","32 heures"],correct:1,explanation:"La dur\xe9e l\xe9gale du travail en France est fix\xe9e \xe0 35 heures par semaine pour un temps plein, au-del\xe0 ce sont des heures suppl\xe9mentaires.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:131,question:"Qui est aid\xe9 par France Travail ?",options:["Uniquement les ch\xf4meurs fran\xe7ais","Toute personne en recherche d'emploi ou de formation","Uniquement les jeunes de moins de 25 ans","Uniquement les personnes sans dipl\xf4me"],correct:1,explanation:"France Travail accompagne toute personne en recherche d'emploi ou souhaitant une formation professionnelle, quelle que soit sa situation.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:132,question:"Une personne \xe9trang\xe8re en situation r\xe9guli\xe8re peut cr\xe9er son entreprise :",options:["Non, c'est interdit aux \xe9trangers","Oui, sans aucune condition particuli\xe8re","Oui, si elle poss\xe8de un titre de s\xe9jour l'autorisant","Seulement apr\xe8s 10 ans de r\xe9sidence"],correct:2,explanation:"Une personne \xe9trang\xe8re peut cr\xe9er une entreprise en France si son titre de s\xe9jour l'y autorise (carte de r\xe9sident, vie priv\xe9e et familiale avec mention entrepreneur, etc.).",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:133,question:"Une femme peut-elle cr\xe9er son entreprise ?",options:["Non, elle doit avoir l'autorisation de son mari","Oui, elle a les m\xeames droits que les hommes","Seulement si elle est c\xe9libataire","Seulement avec un associ\xe9 masculin"],correct:1,explanation:"En France, l'\xe9galit\xe9 entre hommes et femmes est garantie par la loi. Une femme peut cr\xe9er son entreprise librement, comme un homme.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:134,question:"\xc0 partir de quel \xe2ge un mineur peut-il travailler ?",options:["14 ans","16 ans","15 ans","18 ans"],correct:1,explanation:"Un mineur peut travailler \xe0 partir de 16 ans en France, avec certaines restrictions. Entre 14 et 16 ans, seuls des travaux l\xe9gers pendant les vacances sont autoris\xe9s.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:135,question:"Aupr\xe8s de quel organisme faut-il demander le remboursement des frais de sant\xe9 ?",options:["La mairie","L'Assurance Maladie (S\xe9curit\xe9 sociale)","La pr\xe9fecture","France Travail"],correct:1,explanation:"L'Assurance Maladie, qui fait partie de la S\xe9curit\xe9 sociale, est l'organisme qui rembourse les frais de sant\xe9 en France.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:136,question:"Qu'est-ce qu'un num\xe9ro d'urgence ?",options:["Un num\xe9ro pour prendre rendez-vous rapidement","Un num\xe9ro gratuit accessible 24h/24 en cas de danger","Un num\xe9ro r\xe9serv\xe9 aux \xe9trangers","Un num\xe9ro pour les d\xe9marches administratives"],correct:1,explanation:"Un num\xe9ro d'urgence est un num\xe9ro de t\xe9l\xe9phone gratuit, accessible 24h/24 et 7j/7, pour signaler une situation de danger n\xe9cessitant une intervention rapide.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:137,question:"Concernant l'acc\xe8s aux soins, quelle proposition est correcte ?",options:["Seuls les Fran\xe7ais peuvent consulter un m\xe9decin","Toute personne r\xe9sidant en France a droit \xe0 des soins","Les \xe9trangers doivent payer plus cher","Il faut attendre 5 ans pour avoir acc\xe8s aux soins"],correct:1,explanation:"Toute personne r\xe9sidant en France de mani\xe8re stable et r\xe9guli\xe8re a droit \xe0 la protection maladie et peut acc\xe9der aux soins.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP","CR"]},{id:138,question:"En cas de probl\xe8me de sant\xe9 non urgent, \xe0 qui faut-il s'adresser en premier ?",options:["Les urgences de l'h\xf4pital","Son m\xe9decin traitant","La pharmacie","Le SAMU (15)"],correct:1,explanation:"Pour un probl\xe8me de sant\xe9 non urgent, il faut consulter en priorit\xe9 son m\xe9decin traitant qui assure le suivi m\xe9dical r\xe9gulier.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:139,question:"Quel est le r\xf4le du m\xe9decin traitant ?",options:["Traiter uniquement les urgences","Assurer le suivi m\xe9dical r\xe9gulier et coordonner les soins","D\xe9livrer les m\xe9dicaments","Faire les vaccinations obligatoires uniquement"],correct:1,explanation:"Le m\xe9decin traitant assure le suivi m\xe9dical r\xe9gulier du patient, coordonne son parcours de soins et oriente vers des sp\xe9cialistes si n\xe9cessaire.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:140,question:"Dans quelles situations doit-on se rendre aux urgences de l'h\xf4pital ?",options:["Pour un simple rhume","En cas de danger vital ou de probl\xe8me grave n\xe9cessitant des soins imm\xe9diats","Pour tout probl\xe8me de sant\xe9","Pour renouveler une ordonnance"],correct:1,explanation:"Les urgences hospitali\xe8res sont r\xe9serv\xe9es aux situations graves mettant en danger la vie ou n\xe9cessitant des soins m\xe9dicaux imm\xe9diats (accident, malaise s\xe9v\xe8re, etc.).",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:141,question:"Quel est l'objectif des vaccinations obligatoires ?",options:["R\xe9duire les co\xfbts de la S\xe9curit\xe9 sociale","Prot\xe9ger la population contre certaines maladies graves","Permettre l'acc\xe8s aux services publics","Contr\xf4ler les d\xe9placements des citoyens"],correct:1,explanation:"Les vaccinations obligatoires visent \xe0 prot\xe9ger la population, notamment les plus vuln\xe9rables, contre des maladies infectieuses graves et \xe0 \xe9viter les \xe9pid\xe9mies gr\xe2ce \xe0 l'immunit\xe9 collective.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:142,question:"\xc0 quoi sert la carte Vitale ?",options:["\xc0 prouver sa nationalit\xe9 fran\xe7aise","\xc0 attester de son identit\xe9 lors des contr\xf4les","\xc0 faciliter le remboursement des soins m\xe9dicaux par l'Assurance Maladie","\xc0 voter lors des \xe9lections"],correct:2,explanation:"La carte Vitale est la carte d'assur\xe9 social qui permet de b\xe9n\xe9ficier du remboursement des soins par l'Assurance Maladie de mani\xe8re simplifi\xe9e et rapide.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:143,question:"\xc0 quoi sert une mutuelle sant\xe9 ?",options:["\xc0 remplacer compl\xe8tement la S\xe9curit\xe9 sociale","\xc0 compl\xe9ter les remboursements de la S\xe9curit\xe9 sociale","\xc0 permettre l'acc\xe8s gratuit aux h\xf4pitaux priv\xe9s","\xc0 fournir une assurance habitation"],correct:1,explanation:"La mutuelle sant\xe9 est une assurance compl\xe9mentaire qui rembourse tout ou partie des frais de sant\xe9 non pris en charge par la S\xe9curit\xe9 sociale.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:144,question:"Jusqu'\xe0 quel \xe2ge l'\xe9cole est-elle obligatoire ?",options:["14 ans","15 ans","16 ans","18 ans"],correct:2,explanation:"En France, l'instruction est obligatoire pour tous les enfants de 3 \xe0 16 ans, conform\xe9ment au Code de l'\xe9ducation.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:145,question:"L'autorit\xe9 parentale pr\xe9voit l'obligation :",options:["De scolariser son enfant uniquement dans une \xe9cole publique","De prot\xe9ger, \xe9duquer et assurer la s\xe9curit\xe9 de l'enfant","D'inscrire son enfant \xe0 des activit\xe9s sportives","De choisir le m\xe9tier futur de l'enfant"],correct:1,explanation:"L'autorit\xe9 parentale implique des droits et devoirs ayant pour finalit\xe9 l'int\xe9r\xeat de l'enfant, notamment le prot\xe9ger dans sa sant\xe9, sa s\xe9curit\xe9 et sa moralit\xe9, assurer son \xe9ducation et permettre son d\xe9veloppement.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:146,question:"Pour qui l'\xe9cole est-elle obligatoire ?",options:["Uniquement pour les enfants de nationalit\xe9 fran\xe7aise","Pour tous les enfants r\xe9sidant en France de 3 \xe0 16 ans","Uniquement pour les enfants dont les parents travaillent","Pour tous les enfants de 6 \xe0 14 ans seulement"],correct:1,explanation:"L'instruction est obligatoire pour tous les enfants, fran\xe7ais et \xe9trangers, r\xe9sidant sur le territoire fran\xe7ais, de 3 \xe0 16 ans.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:147,question:"Quel dipl\xf4me obtient-on \xe0 la fin du lyc\xe9e ?",options:["Le brevet des coll\xe8ges","Le baccalaur\xe9at","Le certificat d'\xe9tudes","La licence"],correct:1,explanation:"Le baccalaur\xe9at est le dipl\xf4me national qui sanctionne la fin des \xe9tudes secondaires et ouvre l'acc\xe8s \xe0 l'enseignement sup\xe9rieur.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:148,question:"Dans quels \xe9tablissements scolaires vont les \xe9l\xe8ves apr\xe8s l'\xe9cole \xe9l\xe9mentaire ?",options:["Au lyc\xe9e","\xc0 l'universit\xe9","Au coll\xe8ge","En \xe9cole maternelle"],correct:2,explanation:"Apr\xe8s l'\xe9cole \xe9l\xe9mentaire (du CP au CM2), les \xe9l\xe8ves poursuivent leur scolarit\xe9 au coll\xe8ge pendant quatre ans (de la 6e \xe0 la 3e).",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:149,question:"Un enfant inscrit \xe0 l'\xe9cole :",options:["Peut \xeatre absent sans justification","Doit obligatoirement \xeatre pr\xe9sent et assidu","Peut choisir librement ses horaires de pr\xe9sence","N'est pas tenu d'assister aux cours de sport"],correct:1,explanation:"L'assiduit\xe9 scolaire est obligatoire : tout enfant inscrit \xe0 l'\xe9cole doit fr\xe9quenter r\xe9guli\xe8rement les cours et toute absence doit \xeatre justifi\xe9e aupr\xe8s de l'\xe9tablissement.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:150,question:"Les enfants qui ne parlent pas fran\xe7ais :",options:["Ne peuvent pas \xeatre scolaris\xe9s en France","Doivent attendre de parler fran\xe7ais pour \xeatre inscrits","Ont le droit d'\xeatre scolaris\xe9s et b\xe9n\xe9ficient d'un accompagnement adapt\xe9","Sont automatiquement plac\xe9s dans des \xe9coles sp\xe9cialis\xe9es"],correct:2,explanation:"Tous les enfants ont le droit d'\xeatre scolaris\xe9s en France quelle que soit leur ma\xeetrise du fran\xe7ais, et des dispositifs sp\xe9cifiques d'accompagnement linguistique sont mis en place pour faciliter leur int\xe9gration.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CSP"]},{id:151,question:"Parmi les propositions suivantes, laquelle constitue une participation citoyenne ?",options:["Payer ses imp\xf4ts","Voter aux \xe9lections","Respecter le code de la route","Avoir une carte d'identit\xe9"],correct:1,explanation:"Voter aux \xe9lections est un acte de participation citoyenne directe permettant d'exercer sa souverainet\xe9. Les autres sont des obligations ou des droits, mais pas des formes de participation active \xe0 la vie d\xe9mocratique.",category:"Principes et valeurs",tags:["CR"]},{id:152,question:"Que garantit la libert\xe9 d'expression ?",options:["Le droit de tout dire sans limites","Le droit d'exprimer ses opinions dans le respect de la loi","Le droit de critiquer uniquement le gouvernement","Le droit de publier anonymement sur internet"],correct:1,explanation:"La libert\xe9 d'expression garantit le droit d'exprimer ses opinions, mais dans le respect des lois qui interdisent notamment la diffamation, l'injure et l'incitation \xe0 la haine.",category:"Principes et valeurs",tags:["CR"]},{id:153,question:"\xc0 quoi sert un titre de s\xe9jour ?",options:["\xc0 prouver son identit\xe9 en France","\xc0 autoriser un \xe9tranger \xe0 r\xe9sider l\xe9galement en France","\xc0 obtenir la nationalit\xe9 fran\xe7aise","\xc0 voyager dans l'espace Schengen"],correct:1,explanation:"Le titre de s\xe9jour est un document officiel qui autorise un ressortissant \xe9tranger \xe0 r\xe9sider sur le territoire fran\xe7ais de mani\xe8re r\xe9guli\xe8re pour une dur\xe9e d\xe9termin\xe9e.",category:"Principes et valeurs",tags:["CR"]},{id:154,question:"La libert\xe9 de circulation permet \xe0 toute personne de :",options:["Se d\xe9placer librement dans toute l'Union europ\xe9enne","Circuler et s'installer librement sur le territoire fran\xe7ais","Traverser les fronti\xe8res sans contr\xf4le","Conduire sans permis sur les routes fran\xe7aises"],correct:1,explanation:"La libert\xe9 de circulation garantit \xe0 toute personne le droit de circuler librement et de choisir son lieu de r\xe9sidence sur le territoire fran\xe7ais, sous r\xe9serve du respect des lois.",category:"Principes et valeurs",tags:["CR"]},{id:155,question:"Sur quel site internet peut-on retrouver le symbole de la R\xe9publique fran\xe7aise ?",options:["www.france.fr","www.gouvernement.fr","www.republique-francaise.fr","www.service-public.fr"],correct:1,explanation:"Le site www.gouvernement.fr est le portail officiel du gouvernement fran\xe7ais o\xf9 l'on retrouve les symboles de la R\xe9publique, dont Marianne, le drapeau tricolore et la devise.",category:"Principes et valeurs",tags:["CR"]},{id:156,question:'Compl\xe9tez ces paroles de la Marseillaise : "Aux armes [\u2026] ! Formez vos bataillons"',options:["soldats","citoyens","patriots","Fran\xe7ais"],correct:1,explanation:'Le refrain de la Marseillaise dit "Aux armes citoyens ! Formez vos bataillons", rappelant l\'appel aux citoyens \xe0 d\xe9fendre la patrie pendant la R\xe9volution fran\xe7aise.',category:"Principes et valeurs",tags:["CR"]},{id:157,question:'Compl\xe9tez les paroles de la Marseillaise : "Allons enfants de la patrie [\u2026]"',options:["La victoire est arriv\xe9e","Le jour de gloire est arriv\xe9","L'heure de gloire a sonn\xe9","Le moment de combattre est venu"],correct:1,explanation:"Le premier vers de la Marseillaise est \"Allons enfants de la patrie, le jour de gloire est arriv\xe9\". C'est l'hymne national fran\xe7ais compos\xe9 par Rouget de Lisle en 1792.",category:"Principes et valeurs",tags:["CR"]},{id:158,question:"En application de la libert\xe9 individuelle, quelle proposition est correcte ? Une personne peut :",options:["Imposer ses convictions religieuses \xe0 autrui","Choisir librement son mode de vie dans le respect de la loi","Refuser de respecter les lois qui contredisent ses croyances","S'habiller uniquement selon les normes de sa communaut\xe9"],correct:1,explanation:"La libert\xe9 individuelle garantit \xe0 chacun le droit de choisir son mode de vie, ses opinions et ses croyances, dans le respect des lois et des libert\xe9s d'autrui.",category:"Principes et valeurs",tags:["CR"]},{id:159,question:"Concernant la pratique de la religion, quelle proposition est correcte ?",options:["La religion doit \xeatre pratiqu\xe9e uniquement dans les lieux de culte","Chacun est libre de pratiquer la religion de son choix ou de n'en avoir aucune","L'\xc9tat impose une religion officielle en France","Les enfants doivent suivre obligatoirement la religion de leurs parents"],correct:1,explanation:"La la\xefcit\xe9 garantit la libert\xe9 de conscience : chacun peut pratiquer la religion de son choix ou n'en avoir aucune. L'\xc9tat est neutre et ne favorise aucune religion.",category:"Principes et valeurs",tags:["CR"]},{id:160,question:"En tant que parent, peut-on refuser que son enfant participe aux cours de sport \xe0 l'\xe9cole car ils sont mixtes ?",options:["Oui, c'est un droit parental","Non, l'instruction est obligatoire et comprend tous les enseignements","Oui, si c'est pour des raisons religieuses","Non, sauf avec un certificat m\xe9dical"],correct:1,explanation:"L'instruction est obligatoire et les parents ne peuvent refuser la participation de leur enfant aux activit\xe9s scolaires pour des motifs religieux ou personnels. L'\xe9cole r\xe9publicaine est la\xefque et mixte.",category:"Principes et valeurs",tags:["CR"]},{id:161,question:"Quelle est la devise de la France ?",options:["Libert\xe9, \xc9galit\xe9, Solidarit\xe9","Libert\xe9, \xc9galit\xe9, Fraternit\xe9","Libert\xe9, Justice, Fraternit\xe9","Unit\xe9, \xc9galit\xe9, Fraternit\xe9"],correct:1,explanation:'La devise de la R\xe9publique fran\xe7aise est "Libert\xe9, \xc9galit\xe9, Fraternit\xe9". Elle est inscrite sur les frontons des b\xe2timents publics et figure dans la Constitution.',category:"Principes et valeurs",tags:["CR"]},{id:162,question:"La r\xe9pudiation de sa femme est :",options:["Autoris\xe9e si les deux \xe9poux sont d'accord","Interdite en France","Autoris\xe9e pour des motifs religieux","Autoris\xe9e par un juge aux affaires familiales"],correct:1,explanation:"La r\xe9pudiation est strictement interdite en France. Le divorce doit obligatoirement \xeatre prononc\xe9 par un juge, garantissant ainsi l'\xe9galit\xe9 entre les \xe9poux et la protection des droits de chacun.",category:"Principes et valeurs",tags:["CR"]},{id:163,question:"Les imp\xf4ts permettent de financer les d\xe9penses publiques. Quelle proposition est correcte ?",options:["Seuls les salari\xe9s paient des imp\xf4ts","Chacun contribue selon ses ressources","Les imp\xf4ts sont facultatifs","Seuls les propri\xe9taires paient des imp\xf4ts"],correct:1,explanation:"Le syst\xe8me fiscal fran\xe7ais repose sur le principe de progressivit\xe9 : chacun contribue aux charges publiques selon ses capacit\xe9s financi\xe8res, conform\xe9ment \xe0 l'article 13 de la D\xe9claration des droits de l'homme.",category:"Principes et valeurs",tags:["CR"]},{id:164,question:"Peut-on br\xfbler publiquement un drapeau fran\xe7ais ?",options:["Oui, c'est une forme de libert\xe9 d'expression","Non, c'est un d\xe9lit puni par la loi","Oui, si c'est lors d'une manifestation autoris\xe9e","Non, sauf si c'est son propre drapeau"],correct:1,explanation:"Br\xfbler publiquement le drapeau tricolore constitue une outrage \xe0 un symbole de la R\xe9publique, puni par l'article 433-5-1 du Code p\xe9nal d'une amende de 1 500 euros.",category:"Principes et valeurs",tags:["CR"]},{id:165,question:"Que fait l'\xc9tat pour lutter contre les discriminations ?",options:["Il laisse les citoyens r\xe9gler leurs diff\xe9rends","Il adopte des lois et sanctionne les comportements discriminatoires","Il recommande simplement de ne pas discriminer","Il intervient uniquement dans les entreprises publiques"],correct:1,explanation:"L'\xc9tat fran\xe7ais lutte activement contre les discriminations par des lois qui interdisent et sanctionnent p\xe9nalement toute discrimination fond\xe9e sur l'origine, le sexe, la religion ou tout autre crit\xe8re prohib\xe9.",category:"Principes et valeurs",tags:["CR"]},{id:166,question:"Que repr\xe9sente Marianne ?",options:["La premi\xe8re femme pr\xe9sidente de la R\xe9publique","La R\xe9publique fran\xe7aise et ses valeurs","La libert\xe9 uniquement","Une h\xe9ro\xefne de la R\xe9volution fran\xe7aise"],correct:1,explanation:"Marianne est la repr\xe9sentation symbolique de la R\xe9publique fran\xe7aise et de ses valeurs de libert\xe9, d'\xe9galit\xe9 et de fraternit\xe9. Son buste figure dans les mairies.",category:"Principes et valeurs",tags:["CR"]},{id:167,question:"Qu'est-ce que la libert\xe9 d'association ?",options:["Le droit de se r\xe9unir en famille","Le droit de cr\xe9er ou adh\xe9rer \xe0 une association","Le droit de manifester dans la rue","Le droit de cr\xe9er un parti politique"],correct:1,explanation:"La libert\xe9 d'association, garantie par la loi de 1901, permet \xe0 toute personne de cr\xe9er ou d'adh\xe9rer librement \xe0 une association pour d\xe9fendre des int\xe9r\xeats communs, dans le respect de la loi.",category:"Principes et valeurs",tags:["CR"]},{id:168,question:"Qu'est-ce que la libert\xe9 ?",options:["Faire tout ce que l'on veut","Pouvoir agir dans le respect des lois et des droits d'autrui","Ne pas avoir de contraintes professionnelles","Vivre selon ses propres r\xe8gles uniquement"],correct:1,explanation:"La libert\xe9 consiste \xe0 pouvoir faire tout ce qui ne nuit pas \xe0 autrui, dans le respect des lois. Elle s'exerce dans le cadre d\xe9fini par la loi qui garantit l'ordre public et les droits de tous.",category:"Principes et valeurs",tags:["CR"]},{id:169,question:"Sur quel document peut-on voir Marianne ?",options:["Sur les passeports uniquement","Sur les timbres-poste et dans les mairies","Sur les cartes d'identit\xe9 seulement","Sur les billets de banque en euros"],correct:1,explanation:"Marianne figure sur les timbres-poste fran\xe7ais et son buste est pr\xe9sent dans toutes les mairies de France. Elle est le symbole de la R\xe9publique fran\xe7aise.",category:"Principes et valeurs",tags:["CR"]},{id:170,question:"Un employeur refuse d'embaucher des femmes dans son entreprise. Que dit la loi ?",options:["C'est autoris\xe9 si c'est pr\xe9cis\xe9 dans l'annonce","C'est interdit, c'est une discrimination punissable","C'est autoris\xe9 pour certains m\xe9tiers difficiles","C'est autoris\xe9 si l'entreprise est priv\xe9e"],correct:1,explanation:"Refuser d'embaucher une personne en raison de son sexe constitue une discrimination interdite et punissable par la loi. Le principe d'\xe9galit\xe9 entre les femmes et les hommes est garanti.",category:"Principes et valeurs",tags:["CR"]},{id:171,question:"Une des valeurs de la devise r\xe9publicaine est l'\xe9galit\xe9. Qu'est-ce que cela signifie ?",options:["Tous les citoyens ont les m\xeames droits et devoirs sans distinction","Tous les citoyens doivent avoir le m\xeame salaire","Tous les citoyens doivent penser de la m\xeame mani\xe8re","Tous les citoyens doivent exercer le m\xeame m\xe9tier"],correct:0,explanation:"L'\xe9galit\xe9 r\xe9publicaine signifie que tous les citoyens ont les m\xeames droits et les m\xeames devoirs devant la loi, sans distinction d'origine, de religion ou de condition sociale.",category:"Principes et valeurs",tags:["CR"]},{id:172,question:"En quelle ann\xe9e la loi de s\xe9paration des \xc9glises et de l'Etat a-t-elle \xe9t\xe9 vot\xe9e ?",options:["1789","1881","1905","1946"],correct:2,explanation:"La loi de s\xe9paration des \xc9glises et de l'\xc9tat a \xe9t\xe9 vot\xe9e le 9 d\xe9cembre 1905. Elle \xe9tablit la la\xefcit\xe9 de la R\xe9publique et garantit la libert\xe9 de conscience.",category:"Principes et valeurs",tags:["CR"]},{id:173,question:"\xc0 l'\xe9cole publique, qui peut porter des signes religieux tr\xe8s visibles ?",options:["Les \xe9l\xe8ves uniquement","Les enseignants uniquement","Personne, c'est interdit pour tous","Ni les \xe9l\xe8ves ni les enseignants"],correct:3,explanation:"Depuis la loi de 2004, le port de signes religieux ostensibles est interdit aux \xe9l\xe8ves dans les \xe9coles publiques. Les enseignants, en tant qu'agents publics, doivent \xe9galement respecter la neutralit\xe9 religieuse.",category:"Principes et valeurs",tags:["CR"]},{id:174,question:"Selon le principe de la\xefcit\xe9, que signifie la neutralit\xe9 de l'\xc9tat ?",options:["L'\xc9tat interdit toutes les religions","L'\xc9tat ne reconna\xeet, ne salarie ni ne subventionne aucun culte","L'\xc9tat oblige tous les citoyens \xe0 \xeatre ath\xe9es","L'\xc9tat favorise une religion majoritaire"],correct:1,explanation:"La neutralit\xe9 de l'\xc9tat signifie qu'il ne reconna\xeet, ne salarie ni ne subventionne aucun culte. L'\xc9tat garantit la libert\xe9 de conscience et le libre exercice des cultes.",category:"Principes et valeurs",tags:["CR"]},{id:175,question:"Que peut faire un usager du service public dans une mairie ?",options:["Il doit retirer ses signes religieux avant d'entrer","Il peut porter des signes religieux visibles","Il doit cacher son identit\xe9 religieuse","Il doit d\xe9clarer sa religion \xe0 l'accueil"],correct:1,explanation:"Les usagers du service public conservent leur libert\xe9 de conscience et d'expression religieuse. Ils peuvent donc porter des signes religieux visibles dans les services publics.",category:"Principes et valeurs",tags:["CR"]},{id:176,question:"Qui doit respecter le principe de neutralit\xe9 religieuse dans une pr\xe9fecture ?",options:["Uniquement le pr\xe9fet","Tous les usagers du service","Tous les agents publics travaillant dans la pr\xe9fecture","Uniquement les visiteurs \xe9trangers"],correct:2,explanation:"Tous les agents publics doivent respecter le principe de neutralit\xe9 religieuse dans l'exercice de leurs fonctions. Ils ne doivent manifester aucune pr\xe9f\xe9rence religieuse.",category:"Principes et valeurs",tags:["CR"]},{id:177,question:"La la\xefcit\xe9 impose-t-elle aux agents publics d'\xeatre neutres vis-\xe0-vis des usagers ?",options:["Non, ils peuvent exprimer leurs convictions religieuses librement","Oui, ils doivent \xeatre neutres dans l'exercice de leurs fonctions","Oui, mais seulement le vendredi","Non, sauf s'ils travaillent dans une \xe9cole"],correct:1,explanation:"Oui, les agents publics doivent \xeatre neutres dans l'exercice de leurs fonctions et traiter tous les usagers de mani\xe8re \xe9gale, sans distinction de religion.",category:"Principes et valeurs",tags:["CR"]},{id:178,question:"Que garantit le principe de la\xefcit\xe9 ?",options:["L'interdiction de toutes les religions","La libert\xe9 de conscience et l'\xe9galit\xe9 de tous devant la loi","L'obligation d'\xeatre ath\xe9e pour travailler dans le service public","Le financement des lieux de culte par l'\xc9tat"],correct:1,explanation:"Le principe de la\xefcit\xe9 garantit la libert\xe9 de conscience, le libre exercice des cultes et l'\xe9galit\xe9 de tous les citoyens devant la loi sans distinction de religion.",category:"Principes et valeurs",tags:["CR"]},{id:179,question:"A-t-on le droit de changer de religion ?",options:["Non, c'est interdit par la loi fran\xe7aise","Oui, c'est une libert\xe9 fondamentale garantie par la R\xe9publique","Oui, mais seulement avec l'autorisation de la pr\xe9fecture","Non, sauf autorisation du maire"],correct:1,explanation:"La libert\xe9 de conscience garantie par la R\xe9publique permet \xe0 chacun de choisir, de changer ou de ne pas avoir de religion. C'est un droit fondamental.",category:"Principes et valeurs",tags:["CR"]},{id:180,question:"Que repr\xe9sente la la\xefcit\xe9 ?",options:["L'interdiction de pratiquer une religion en France","La s\xe9paration entre l'\xc9tat et les religions, et la libert\xe9 de conscience","L'obligation pour tous les Fran\xe7ais d'\xeatre ath\xe9es","Le contr\xf4le des religions par l'\xc9tat"],correct:1,explanation:"La la\xefcit\xe9 repr\xe9sente la s\xe9paration entre l'\xc9tat et les religions, garantissant la libert\xe9 de conscience et l'\xe9galit\xe9 de tous devant la loi sans distinction religieuse.",category:"Principes et valeurs",tags:["CR"]},{id:181,question:"Qu'est ce qui est interdit par la Charte de la la\xefcit\xe9 \xe0 l'\xe9cole ?",options:["Le port de signes religieux ostensibles par les \xe9l\xe8ves","L'\xe9tude des religions dans les cours d'histoire","Les repas sans porc \xe0 la cantine","La pr\xe9sence d'\xe9l\xe8ves de diff\xe9rentes religions"],correct:0,explanation:"La Charte de la la\xefcit\xe9 \xe0 l'\xe9cole interdit le port de signes ou de tenues manifestant ostensiblement une appartenance religieuse par les \xe9l\xe8ves, conform\xe9ment \xe0 la loi de 2004.",category:"Principes et valeurs",tags:["CR"]},{id:182,question:"Que dit l'article 1er de la Constitution fran\xe7aise ?",options:["La France est une monarchie constitutionnelle","La France est une R\xe9publique indivisible, la\xefque, d\xe9mocratique et sociale","La France est un \xc9tat f\xe9d\xe9ral","La France est une th\xe9ocratie r\xe9publicaine"],correct:1,explanation:"L'article 1er de la Constitution de 1958 proclame que la France est une R\xe9publique indivisible, la\xefque, d\xe9mocratique et sociale qui assure l'\xe9galit\xe9 devant la loi de tous les citoyens.",category:"Principes et valeurs",tags:["CR"]},{id:183,question:"Qu'est-ce que l'\xc9tat de droit ?",options:["Un \xc9tat o\xf9 seul le gouvernement fait les lois","Un \xc9tat o\xf9 tous, y compris les gouvernants, sont soumis au respect de la loi","Un \xc9tat o\xf9 il n'y a pas de Constitution","Un \xc9tat o\xf9 seuls les citoyens doivent respecter les lois"],correct:1,explanation:"L'\xc9tat de droit est un syst\xe8me o\xf9 tous, y compris les gouvernants et les institutions, sont soumis au respect de la loi et o\xf9 les droits fondamentaux sont garantis.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:184,question:"Le pr\xe9sident de la R\xe9publique a commis un crime. Quelle proposition est correcte ?",options:["Il ne peut pas \xeatre poursuivi car il est chef de l'\xc9tat","Il peut \xeatre destitu\xe9 par le Parlement r\xe9uni en Haute Cour","Seul le peuple peut le juger par r\xe9f\xe9rendum","Il doit attendre la fin de son mandat pour \xeatre jug\xe9"],correct:1,explanation:"En cas de manquement \xe0 ses devoirs manifestement incompatible avec l'exercice de son mandat, le pr\xe9sident peut \xeatre destitu\xe9 par le Parlement constitu\xe9 en Haute Cour.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:185,question:"La loi est l'expression de :",options:["La volont\xe9 du pr\xe9sident de la R\xe9publique","La volont\xe9 g\xe9n\xe9rale","La volont\xe9 du Premier ministre","La volont\xe9 des juges"],correct:1,explanation:"Selon l'article 6 de la D\xe9claration des droits de l'homme et du citoyen de 1789, la loi est l'expression de la volont\xe9 g\xe9n\xe9rale, vot\xe9e par les repr\xe9sentants du peuple.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:186,question:"Quelle est la dur\xe9e du mandat du conseil municipal et du maire ?",options:["4 ans","5 ans","6 ans","7 ans"],correct:2,explanation:"Le mandat du conseil municipal et du maire est de 6 ans. Les conseillers municipaux sont \xe9lus au suffrage universel direct et \xe9lisent ensuite le maire parmi eux.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:187,question:"Que garantit l'\xc9tat de droit ?",options:["Que seuls les riches ont acc\xe8s \xe0 la justice","Que tous les citoyens et les pouvoirs publics sont soumis aux m\xeames lois","Que le gouvernement peut faire ce qu'il veut","Que seul le pr\xe9sident fait respecter la loi"],correct:1,explanation:"L'\xc9tat de droit garantit que tous les citoyens et les pouvoirs publics sont soumis aux m\xeames lois, et que chacun peut faire valoir ses droits devant la justice.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:188,question:"Une personne peut-elle voter \xe0 la place d'une autre ?",options:["Oui, si elle a une procuration valide","Oui, si c'est un membre de la famille","Non, c'est strictement interdit dans tous les cas","Oui, si l'autre personne est malade"],correct:0,explanation:"Une personne peut voter \xe0 la place d'une autre uniquement si elle dispose d'une procuration en bonne et due forme, \xe9tablie pr\xe9alablement devant les autorit\xe9s comp\xe9tentes.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:189,question:"Est-ce que le vote est obligatoire ?",options:["Oui, sous peine d'amende","Oui, mais seulement pour les \xe9lections pr\xe9sidentielles","Non, le vote est un droit mais pas une obligation","Oui, pour tous les citoyens majeurs"],correct:2,explanation:"En France, le vote est un droit citoyen mais pas une obligation l\xe9gale. Chaque citoyen est libre de participer ou non aux \xe9lections.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:190,question:"\xc0 la fin de son mandat, le pr\xe9sident de la R\xe9publique peut-il d\xe9cider de rester au pouvoir ?",options:["Oui, s'il le souhaite","Oui, avec l'accord du Premier ministre","Non, il doit respecter la dur\xe9e de son mandat fix\xe9e par la Constitution","Oui, si la situation du pays l'exige"],correct:2,explanation:"Non, le pr\xe9sident doit respecter la dur\xe9e de son mandat fix\xe9e \xe0 5 ans par la Constitution. Il ne peut se maintenir au pouvoir et doit organiser de nouvelles \xe9lections.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:191,question:"Qui dirige l'action du Gouvernement ?",options:["Le Pr\xe9sident de la R\xe9publique","Le Premier ministre","Le Ministre de l'Int\xe9rieur","Le Pr\xe9sident de l'Assembl\xe9e nationale"],correct:1,explanation:"Selon l'article 21 de la Constitution, le Premier ministre dirige l'action du Gouvernement et est responsable de la d\xe9fense nationale.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:192,question:"Quelle est l'organisation administrative de la France ?",options:["Centralis\xe9e uniquement","D\xe9centralis\xe9e avec des collectivit\xe9s territoriales","F\xe9d\xe9rale comme l'Allemagne","R\xe9gionale sans communes"],correct:1,explanation:"La France est organis\xe9e de mani\xe8re d\xe9centralis\xe9e avec trois niveaux de collectivit\xe9s territoriales : les communes, les d\xe9partements et les r\xe9gions.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:193,question:"Qu'est-ce que le pouvoir l\xe9gislatif ? Le pouvoir :",options:["d'appliquer les lois","de faire respecter les lois","de faire les lois","de juger l'application des lois"],correct:2,explanation:"Le pouvoir l\xe9gislatif est le pouvoir de voter et d'adopter les lois. En France, il est exerc\xe9 par le Parlement (Assembl\xe9e nationale et S\xe9nat).",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:194,question:"Pourquoi s\xe9parer les trois pouvoirs dans une d\xe9mocratie ?",options:["Pour r\xe9partir le travail entre plusieurs personnes","Pour emp\xeacher les abus de pouvoir et garantir les libert\xe9s","Pour cr\xe9er plus d'emplois dans l'administration","Pour respecter les traditions historiques"],correct:1,explanation:"La s\xe9paration des pouvoirs (ex\xe9cutif, l\xe9gislatif, judiciaire) permet d'\xe9viter la concentration du pouvoir et prot\xe8ge contre l'arbitraire et les abus.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:195,question:"Quel est le r\xf4le du gouvernement ?",options:["Voter les lois","D\xe9terminer et conduire la politique de la nation","Juger les citoyens","\xc9lire le Pr\xe9sident de la R\xe9publique"],correct:1,explanation:"Le Gouvernement, dirig\xe9 par le Premier ministre, d\xe9termine et conduit la politique de la nation et dispose de l'administration et de la force arm\xe9e.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:196,question:"Qu'est-ce que l'H\xf4tel de Matignon ?",options:["La r\xe9sidence du Pr\xe9sident de la R\xe9publique","La r\xe9sidence du Premier ministre","Le si\xe8ge de l'Assembl\xe9e nationale","Le si\xe8ge du Conseil constitutionnel"],correct:1,explanation:"L'H\xf4tel de Matignon, situ\xe9 rue de Varenne \xe0 Paris, est la r\xe9sidence officielle et le lieu de travail du Premier ministre fran\xe7ais.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:197,question:"Quel est le r\xf4le du pr\xe9sident de la R\xe9publique ?",options:["Diriger l'action du Gouvernement","Veiller au respect de la Constitution et assurer la continuit\xe9 de l'\xc9tat","Voter les lois","Pr\xe9sider l'Assembl\xe9e nationale"],correct:1,explanation:"Le Pr\xe9sident de la R\xe9publique est le garant de la Constitution, de l'ind\xe9pendance nationale et de l'int\xe9grit\xe9 du territoire. Il arbitre et assure le fonctionnement r\xe9gulier des pouvoirs publics.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:198,question:"Quel est le r\xf4le du Premier ministre ?",options:["Nommer les ministres","Diriger l'action du Gouvernement","Dissoudre l'Assembl\xe9e nationale","Promulguer les lois"],correct:1,explanation:"Le Premier ministre dirige l'action du Gouvernement, assure l'ex\xe9cution des lois et exerce le pouvoir r\xe9glementaire.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:199,question:"Qui est le chef du Gouvernement ?",options:["Le Pr\xe9sident de la R\xe9publique","Le Premier ministre","Le Ministre de l'Int\xe9rieur","Le Pr\xe9sident du S\xe9nat"],correct:1,explanation:"Le Premier ministre est le chef du Gouvernement. Il dirige l'action gouvernementale et coordonne le travail des ministres.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:200,question:"Combien y a-t-il de r\xe9gions en France ?",options:["13 r\xe9gions","18 r\xe9gions","22 r\xe9gions","27 r\xe9gions"],correct:1,explanation:"La France compte 18 r\xe9gions au total : 13 r\xe9gions en France m\xe9tropolitaine et 5 r\xe9gions d'outre-mer (Guadeloupe, Martinique, Guyane, La R\xe9union, Mayotte).",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:201,question:"Quel est le r\xf4le du D\xe9fenseur des droits ?",options:["D\xe9fendre la France contre les agressions","D\xe9fendre les droits et libert\xe9s des citoyens face aux administrations","Repr\xe9senter la France \xe0 l'ONU","Diriger la police nationale"],correct:1,explanation:"Le D\xe9fenseur des droits est une autorit\xe9 constitutionnelle ind\xe9pendante qui d\xe9fend les droits des citoyens face aux administrations et lutte contre les discriminations.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:202,question:"Depuis quand l'euro est-elle la monnaie unique ?",options:["1995","1999","2002","2005"],correct:2,explanation:"L'euro est devenu la monnaie fiduciaire (pi\xe8ces et billets) en France et dans la zone euro le 1er janvier 2002, bien que sa cr\xe9ation mon\xe9taire date de 1999.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:203,question:"Quel est le r\xf4le principal du d\xe9partement ?",options:["G\xe9rer les \xe9coles primaires","G\xe9rer l'action sociale et les coll\xe8ges","G\xe9rer les lyc\xe9es","G\xe9rer les universit\xe9s"],correct:1,explanation:"Le d\xe9partement a principalement en charge l'action sociale (aide aux personnes \xe2g\xe9es, handicap\xe9es, \xe0 l'enfance), la gestion des coll\xe8ges et l'entretien des routes d\xe9partementales.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:204,question:"Quel est le r\xf4le principal des communes ?",options:["G\xe9rer les h\xf4pitaux","G\xe9rer les services de proximit\xe9 comme l'\xe9tat civil et l'urbanisme","G\xe9rer les universit\xe9s","G\xe9rer les autoroutes"],correct:1,explanation:"Les communes g\xe8rent les services de proximit\xe9 : \xe9tat civil, urbanisme, \xe9coles maternelles et primaires, voirie communale, action sociale locale.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:205,question:"Combien de communes environ existe-t-il en France ?",options:["5 000 communes","15 000 communes","35 000 communes","50 000 communes"],correct:2,explanation:"La France compte environ 35 000 communes, ce qui en fait le pays d'Europe avec le plus grand nombre de communes.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:206,question:"Quel trait\xe9 concerne la construction de l'Union europ\xe9enne ?",options:["Le trait\xe9 de Versailles","Le trait\xe9 de Maastricht","Le trait\xe9 de l'Atlantique Nord","Le trait\xe9 de Gen\xe8ve"],correct:1,explanation:"Le trait\xe9 de Maastricht, sign\xe9 en 1992, a cr\xe9\xe9 l'Union europ\xe9enne et \xe9tabli les fondements de l'union \xe9conomique et mon\xe9taire.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:207,question:"Quel \xc9tat a quitt\xe9 l'Union europ\xe9enne en 2020 ?",options:["La Norv\xe8ge","La Suisse","Le Royaume-Uni","L'Islande"],correct:2,explanation:"Le Royaume-Uni a officiellement quitt\xe9 l'Union europ\xe9enne le 31 janvier 2020, suite au r\xe9f\xe9rendum du Brexit de 2016.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:208,question:"Quelle est la devise de l'Union europ\xe9enne ?",options:["Libert\xe9, \xc9galit\xe9, Fraternit\xe9","Unie dans la diversit\xe9","Paix et Prosp\xe9rit\xe9","Force et Union"],correct:1,explanation:"La devise de l'Union europ\xe9enne est \xab Unie dans la diversit\xe9 \xbb, soulignant que les Europ\xe9ens \u0153uvrent ensemble pour la paix et la prosp\xe9rit\xe9 tout en conservant leurs cultures diverses.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:209,question:"Quel est l'hymne de l'Union europ\xe9enne ?",options:["La Marseillaise","L'Ode \xe0 la joie","L'hymne \xe0 la paix","Ode \xe0 l'Europe"],correct:1,explanation:"L'hymne de l'Union europ\xe9enne est l'Ode \xe0 la joie, tir\xe9e de la 9e symphonie de Beethoven, symbolisant l'id\xe9al de fraternit\xe9 et d'unit\xe9.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:210,question:"De quoi est compos\xe9 le drapeau europ\xe9en ?",options:["12 \xe9toiles jaunes sur fond bleu","15 \xe9toiles blanches sur fond bleu","12 \xe9toiles blanches sur fond rouge","27 \xe9toiles jaunes sur fond bleu"],correct:0,explanation:"Le drapeau europ\xe9en est compos\xe9 de 12 \xe9toiles dor\xe9es (jaunes) dispos\xe9es en cercle sur fond bleu. Le nombre 12 symbolise la perfection et l'unit\xe9.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:211,question:"De quelle couleur est le drapeau europ\xe9en ?",options:["Rouge avec des \xe9toiles jaunes","Bleu avec des \xe9toiles dor\xe9es","Blanc avec des \xe9toiles argent\xe9es","Vert avec des \xe9toiles blanches"],correct:1,explanation:"Le drapeau europ\xe9en est bleu avec un cercle de douze \xe9toiles dor\xe9es repr\xe9sentant l'union et la solidarit\xe9 entre les peuples d'Europe.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:212,question:"En quelle ann\xe9e le trait\xe9 de Maastricht, qui marque la fondation de l'Union europ\xe9enne, a-t-il \xe9t\xe9 sign\xe9 ?",options:["1989","1992","1995","2000"],correct:1,explanation:"Le trait\xe9 de Maastricht a \xe9t\xe9 sign\xe9 le 7 f\xe9vrier 1992 et est entr\xe9 en vigueur en 1993, cr\xe9ant officiellement l'Union europ\xe9enne.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:213,question:"O\xf9 est le si\xe8ge du Parlement europ\xe9en ?",options:["Bruxelles","Luxembourg","Strasbourg","Paris"],correct:2,explanation:"Le si\xe8ge officiel du Parlement europ\xe9en est \xe0 Strasbourg, en France, o\xf9 se tiennent les sessions pl\xe9ni\xe8res mensuelles.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:214,question:"O\xf9 est le si\xe8ge de la Commission europ\xe9enne ?",options:["Strasbourg","Bruxelles","Luxembourg","Francfort"],correct:1,explanation:"La Commission europ\xe9enne a son si\xe8ge \xe0 Bruxelles, en Belgique, o\xf9 se trouvent ses principaux services administratifs.",category:"Syst\xe8me institutionnel",tags:["CR"]},{id:215,question:"\xc0 quelle libert\xe9 la PMA fait-elle r\xe9f\xe9rence ?",options:["La libert\xe9 de circulation","La libert\xe9 de fonder une famille","La libert\xe9 d'expression","La libert\xe9 de r\xe9union"],correct:1,explanation:"La PMA (Procr\xe9ation M\xe9dicalement Assist\xe9e) se rattache \xe0 la libert\xe9 de fonder une famille et au droit \xe0 la vie priv\xe9e et familiale.",category:"Droits et devoirs",tags:["CR"]},{id:216,question:"Au nom de quoi l'\xc9tat justifie-t-il la restriction des droits ?",options:["De l'efficacit\xe9 \xe9conomique","De l'ordre public","De la tradition historique","De la volont\xe9 majoritaire"],correct:1,explanation:"L'\xc9tat peut restreindre certaines libert\xe9s au nom de l'ordre public, qui comprend la s\xe9curit\xe9 publique, la sant\xe9 publique et la moralit\xe9 publique.",category:"Droits et devoirs",tags:["CR"]},{id:217,question:"Concernant le droit de se marier, quelle proposition est correcte ?",options:["Seuls les couples de sexe diff\xe9rent peuvent se marier","Le mariage est ouvert \xe0 tous les couples majeurs sans distinction de sexe","Le mariage n\xe9cessite l'autorisation de l'\xc9tat","Le mariage religieux a valeur l\xe9gale"],correct:1,explanation:"Depuis la loi du 17 mai 2013, le mariage est ouvert \xe0 tous les couples, sans distinction de sexe, conform\xe9ment au principe d'\xe9galit\xe9.",category:"Droits et devoirs",tags:["CR"]},{id:218,question:"Laquelle de ces citations est inscrite dans la D\xe9claration des Droits de l'homme et du Citoyen de 1789 ?",options:["Libert\xe9, \xc9galit\xe9, Fraternit\xe9","Les hommes naissent et demeurent libres et \xe9gaux en droits","Tous pour un, un pour tous","Le peuple fran\xe7ais proclame solennellement son attachement aux Droits de l'Homme"],correct:1,explanation:'L\'article 1er de la D\xe9claration de 1789 \xe9nonce : "Les hommes naissent et demeurent libres et \xe9gaux en droits", principe fondamental de la R\xe9publique.',category:"Droits et devoirs",tags:["CR"]},{id:219,question:"Le recours \xe0 l'avortement est-il autoris\xe9 ?",options:["Non, il est totalement interdit","Oui, sans aucune condition","Oui, dans les conditions pr\xe9vues par la loi","Uniquement sur autorisation m\xe9dicale"],correct:2,explanation:"Depuis la loi Veil de 1975, l'avortement est autoris\xe9 en France dans les conditions pr\xe9vues par la loi, notamment avant la fin de la 14e semaine de grossesse.",category:"Droits et devoirs",tags:["CR"]},{id:220,question:"Que contient la Constitution ?",options:["Les lois fiscales et budg\xe9taires","Les r\xe8gles d'organisation des pouvoirs publics et les droits fondamentaux","Le code p\xe9nal et civil","Les trait\xe9s internationaux"],correct:1,explanation:"La Constitution d\xe9finit l'organisation des pouvoirs publics (ex\xe9cutif, l\xe9gislatif, judiciaire) et garantit les droits et libert\xe9s fondamentaux des citoyens.",category:"Droits et devoirs",tags:["CR"]},{id:221,question:"Que garantit la libert\xe9 de la presse ?",options:["Le droit de publier sans aucune limite","Le droit d'informer et d'\xeatre inform\xe9 librement","Le monopole des journalistes sur l'information","L'interdiction de toute censure pr\xe9alable uniquement"],correct:1,explanation:"La libert\xe9 de la presse garantit le droit d'informer et d'\xeatre inform\xe9 librement, \xe9l\xe9ment essentiel de la d\xe9mocratie, tout en respectant certaines limites l\xe9gales.",category:"Droits et devoirs",tags:["CR"]},{id:222,question:"Que pr\xe9voit la Charte de l'environnement ?",options:["L'interdiction de toute pollution","Les droits et devoirs relatifs \xe0 la protection de l'environnement","La taxation des entreprises polluantes","La cr\xe9ation de parcs naturels"],correct:1,explanation:"La Charte de l'environnement, int\xe9gr\xe9e \xe0 la Constitution en 2005, consacre les droits et devoirs fondamentaux relatifs \xe0 la protection de l'environnement.",category:"Droits et devoirs",tags:["CR"]},{id:223,question:"Que signifie la dignit\xe9 humaine ?",options:["Le droit \xe0 un niveau de vie d\xe9cent","Le respect absolu de la personne humaine qui ne peut \xeatre trait\xe9e comme un objet","Le droit \xe0 l'honneur et \xe0 la r\xe9putation","L'\xe9galit\xe9 de traitement entre tous"],correct:1,explanation:"La dignit\xe9 humaine est un principe selon lequel tout \xeatre humain m\xe9rite un respect absolu et ne peut \xeatre instrumentalis\xe9 ou trait\xe9 de mani\xe8re d\xe9gradante.",category:"Droits et devoirs",tags:["CR"]},{id:224,question:"Que signifie le droit de manifester ?",options:["Le droit de bloquer la circulation","Le droit d'exprimer collectivement et publiquement une opinion","Le droit de s'opposer aux forces de l'ordre","Le droit de faire gr\xe8ve"],correct:1,explanation:"Le droit de manifester permet d'exprimer collectivement et publiquement une opinion dans le respect de l'ordre public, souvent avec d\xe9claration pr\xe9alable.",category:"Droits et devoirs",tags:["CR"]},{id:225,question:"Que signifie PMA ?",options:["Protection M\xe9dicale Anticip\xe9e","Procr\xe9ation M\xe9dicalement Assist\xe9e","Programme Maternel Adapt\xe9","Pr\xe9vention M\xe9dicale Active"],correct:1,explanation:"PMA signifie Procr\xe9ation M\xe9dicalement Assist\xe9e, ensemble de techniques m\xe9dicales permettant d'aider \xe0 la conception d'un enfant.",category:"Droits et devoirs",tags:["CR"]},{id:226,question:"Quel texte est le plus difficile \xe0 modifier ?",options:["Une loi ordinaire","Un d\xe9cret","La Constitution","Un r\xe8glement"],correct:2,explanation:"La Constitution est le texte le plus difficile \xe0 modifier car sa r\xe9vision n\xe9cessite une proc\xe9dure sp\xe9ciale, souvent avec r\xe9f\xe9rendum ou vote du Congr\xe8s \xe0 la majorit\xe9 des 3/5.",category:"Droits et devoirs",tags:["CR"]},{id:227,question:"Quelle libert\xe9 permet \xe0 une personne de croire en la religion de son choix ?",options:["La libert\xe9 d'expression","La libert\xe9 de conscience et de culte","La libert\xe9 de r\xe9union","La libert\xe9 d'association"],correct:1,explanation:"La libert\xe9 de conscience et de culte garantit \xe0 chacun le droit de choisir sa religion ou de n'en avoir aucune, et de pratiquer son culte.",category:"Droits et devoirs",tags:["CR"]},{id:228,question:"Qu'est-ce que le droit de gr\xe8ve ?",options:["Le droit de refuser tout travail","Le droit de cesser collectivement le travail pour d\xe9fendre des revendications professionnelles","Le droit de manifester dans la rue","Le droit de s'opposer \xe0 son employeur"],correct:1,explanation:"Le droit de gr\xe8ve, reconnu par la Constitution, permet aux salari\xe9s de cesser collectivement le travail pour d\xe9fendre leurs int\xe9r\xeats professionnels.",category:"Droits et devoirs",tags:["CR"]},{id:229,question:"Qu'est-ce que la Constitution ?",options:["L'ensemble des lois d'un pays","La loi fondamentale qui organise les pouvoirs publics et garantit les droits fondamentaux","Le code civil et p\xe9nal","Les d\xe9cisions du Conseil constitutionnel"],correct:1,explanation:"La Constitution est la loi fondamentale et supr\xeame d'un \xc9tat qui organise les pouvoirs publics et garantit les droits et libert\xe9s fondamentaux.",category:"Droits et devoirs",tags:["CR"]},{id:230,question:"Qui peut demander \xe0 avorter ?",options:["Toute femme majeure uniquement","Toute femme enceinte qui le souhaite, dans les conditions l\xe9gales","Uniquement les femmes en danger m\xe9dical","Toute personne avec autorisation m\xe9dicale"],correct:1,explanation:"Toute femme enceinte, majeure ou mineure, qui estime \xeatre en situation de d\xe9tresse peut demander \xe0 avorter dans les d\xe9lais et conditions pr\xe9vus par la loi.",category:"Droits et devoirs",tags:["CR"]},{id:231,question:"Une femme majeure de nationalit\xe9 fran\xe7aise a-t-elle le droit de voter aux \xe9lections ?",options:["Non, elle doit attendre d'avoir 21 ans","Oui, sans aucune condition suppl\xe9mentaire","Oui, si elle est mari\xe9e","Non, seulement aux \xe9lections locales"],correct:1,explanation:"Toute personne majeure de nationalit\xe9 fran\xe7aise jouit du droit de vote sans distinction de sexe, conform\xe9ment aux principes d'\xe9galit\xe9 r\xe9publicaine \xe9tablis en 1944.",category:"Droits et devoirs",tags:["CR"]},{id:232,question:"Concernant l'utilisation des r\xe9seaux sociaux, quelle proposition est correcte ?",options:["On peut tout dire car c'est un espace priv\xe9","Les m\xeames lois s'appliquent que dans la vie r\xe9elle","On est anonyme donc sans responsabilit\xe9","La diffamation y est autoris\xe9e"],correct:1,explanation:"Les r\xe9seaux sociaux sont soumis aux m\xeames r\xe8gles juridiques que les autres espaces publics : diffamation, injures, harc\xe8lement et incitation \xe0 la haine y sont interdits et punissables.",category:"Droits et devoirs",tags:["CR"]},{id:233,question:"Jeter un m\xe9got par terre est :",options:["Autoris\xe9 dans les espaces publics","Interdit et passible d'une amende","Permis seulement en zone rurale","Tol\xe9r\xe9 si on n'est pas vu"],correct:1,explanation:"Jeter un m\xe9got par terre est une infraction sanctionn\xe9e par une amende forfaitaire pouvant atteindre 135 euros, car il s'agit d'un abandon de d\xe9chets sur la voie publique.",category:"Droits et devoirs",tags:["CR"]},{id:234,question:"L'\xc9tat peut-il limiter les droits et libert\xe9s ?",options:["Non, jamais en aucun cas","Oui, pour prot\xe9ger l'ordre public et l'int\xe9r\xeat g\xe9n\xe9ral","Oui, sans aucune justification n\xe9cessaire","Seulement en p\xe9riode de guerre"],correct:1,explanation:"L'\xc9tat peut limiter certains droits et libert\xe9s de mani\xe8re proportionn\xe9e et justifi\xe9e pour prot\xe9ger l'ordre public, la s\xe9curit\xe9 et l'int\xe9r\xeat g\xe9n\xe9ral, conform\xe9ment au principe de conciliation des libert\xe9s.",category:"Droits et devoirs",tags:["CR"]},{id:235,question:"Parmi ces actions, laquelle permet d'adopter une attitude respectueuse de l'environnement ?",options:["Utiliser syst\xe9matiquement sa voiture pour les courts trajets","Privil\xe9gier les transports en commun ou le v\xe9lo","Laisser les appareils \xe9lectriques en veille","Jeter tous ses d\xe9chets ensemble"],correct:1,explanation:"Privil\xe9gier les transports en commun ou le v\xe9lo r\xe9duit les \xe9missions de CO2 et la pollution, contribuant ainsi \xe0 la protection de l'environnement et \xe0 la lutte contre le r\xe9chauffement climatique.",category:"Droits et devoirs",tags:["CR"]},{id:236,question:"Quelle proposition constitue une obligation ?",options:["S'inscrire sur les listes \xe9lectorales","Respecter les lois de la R\xe9publique","Participer \xe0 des associations","Voter \xe0 toutes les \xe9lections"],correct:1,explanation:"Respecter les lois de la R\xe9publique est une obligation pour toute personne vivant sur le territoire fran\xe7ais, alors que le vote est un droit mais non une obligation en France.",category:"Droits et devoirs",tags:["CR"]},{id:237,question:"Pour quel motif peut-on limiter la libert\xe9 d'expression ?",options:["Pour emp\xeacher toute critique du gouvernement","Pour sanctionner les propos racistes ou incitant \xe0 la haine","Pour interdire les opinions politiques minoritaires","Pour contr\xf4ler toute information publique"],correct:1,explanation:"La libert\xe9 d'expression peut \xeatre limit\xe9e l\xe9galement pour sanctionner les propos racistes, antis\xe9mites, homophobes ou incitant \xe0 la haine et \xe0 la violence, conform\xe9ment aux lois sur la presse et le racisme.",category:"Droits et devoirs",tags:["CR"]},{id:238,question:"Pourquoi doit-on trier ses d\xe9chets ?",options:["C'est uniquement une recommandation facultative","Pour permettre leur recyclage et prot\xe9ger l'environnement","Pour faciliter le travail des \xe9boueurs seulement","C'est une tradition fran\xe7aise"],correct:1,explanation:"Le tri des d\xe9chets est obligatoire et permet leur recyclage, r\xe9duisant ainsi la pollution, la consommation de ressources naturelles et contribuant \xe0 la protection de l'environnement.",category:"Droits et devoirs",tags:["CR"]},{id:239,question:"Que doit-on faire face aux ordres des policiers ou gendarmes ?",options:["Les ignorer si on n'est pas d'accord","Les respecter et obtemp\xe9rer","Les discuter longuement avant d'ob\xe9ir","Les suivre uniquement si on le souhaite"],correct:1,explanation:"Il faut obtemp\xe9rer aux ordres l\xe9gitimes des forces de l'ordre qui repr\xe9sentent l'autorit\xe9 publique. Le refus d'obtemp\xe9rer constitue une infraction passible de sanctions p\xe9nales.",category:"Droits et devoirs",tags:["CR"]},{id:240,question:"Quel est un exemple d'assistance \xe0 personne en danger ?",options:["Filmer la sc\xe8ne pour les r\xe9seaux sociaux","Appeler les secours (15, 17 ou 18)","Passer son chemin pour \xe9viter les probl\xe8mes","Attendre que quelqu'un d'autre intervienne"],correct:1,explanation:"Appeler les secours est une forme d'assistance \xe0 personne en danger, obligation l\xe9gale en France. La non-assistance \xe0 personne en danger est un d\xe9lit puni par la loi.",category:"Droits et devoirs",tags:["CR"]},{id:241,question:"Quel exemple illustre une limitation de libert\xe9 pour prot\xe9ger l'int\xe9r\xeat g\xe9n\xe9ral ?",options:["L'interdiction totale de manifester","L'obligation de respecter les limitations de vitesse","L'interdiction de lire certains journaux","L'obligation d'avoir une opinion politique"],correct:1,explanation:"Les limitations de vitesse restreignent la libert\xe9 de circuler comme on veut, mais prot\xe8gent l'int\xe9r\xeat g\xe9n\xe9ral en assurant la s\xe9curit\xe9 routi\xe8re et en r\xe9duisant les accidents mortels.",category:"Droits et devoirs",tags:["CR"]},{id:242,question:"Quelle est l'attitude \xe0 avoir lorsque qu'on est t\xe9moin de violences ?",options:["Ne rien faire pour ne pas s'impliquer","Alerter les autorit\xe9s et porter secours si possible","Filmer uniquement pour garder une preuve","Partir imm\xe9diatement sans pr\xe9venir personne"],correct:1,explanation:"Face \xe0 des violences, il faut alerter les autorit\xe9s (police, gendarmes) et porter secours \xe0 la victime si possible sans se mettre en danger. C'est une obligation l\xe9gale d'assistance \xe0 personne en danger.",category:"Droits et devoirs",tags:["CR"]},{id:243,question:"Quelle obligation concerne toutes les personnes r\xe9sidant en France quelle que soit leur nationalit\xe9 ?",options:["Voter aux \xe9lections municipales","Respecter les lois fran\xe7aises","Effectuer le service national","Adh\xe9rer \xe0 un parti politique"],correct:1,explanation:"Toute personne r\xe9sidant sur le territoire fran\xe7ais, quelle que soit sa nationalit\xe9, doit respecter les lois fran\xe7aises. C'est un principe fondamental de la souverainet\xe9 nationale.",category:"Droits et devoirs",tags:["CR"]},{id:244,question:"Quelle proposition repr\xe9sente un exemple de crime ?",options:["Un exc\xe8s de vitesse","Un meurtre","Une insulte publique","Un stationnement interdit"],correct:1,explanation:"Le meurtre est un crime, l'infraction la plus grave du droit p\xe9nal fran\xe7ais, jug\xe9 par la cour d'assises et passible de la r\xe9clusion criminelle, contrairement aux d\xe9lits et contraventions.",category:"Droits et devoirs",tags:["CR"]},{id:245,question:"Quelle proposition repr\xe9sente un exemple de d\xe9lit ?",options:["Un meurtre avec pr\xe9m\xe9ditation","Le vol ou l'escroquerie","Un stationnement g\xeanant","Un exc\xe8s de vitesse de 10 km/h"],correct:1,explanation:"Le vol et l'escroquerie sont des d\xe9lits, infractions de gravit\xe9 interm\xe9diaire jug\xe9es par le tribunal correctionnel, passibles d'amendes et/ou de peines d'emprisonnement jusqu'\xe0 10 ans.",category:"Droits et devoirs",tags:["CR"]},{id:246,question:"Qui veille au maintien de l'ordre public ?",options:["Uniquement l'arm\xe9e","La police et la gendarmerie nationales","Les services sociaux","Les \xe9lus locaux uniquement"],correct:1,explanation:"La police et la gendarmerie nationales sont les forces de l'ordre charg\xe9es de maintenir l'ordre public et la s\xe9curit\xe9, sous l'autorit\xe9 du minist\xe8re de l'Int\xe9rieur et du maire au niveau local.",category:"Droits et devoirs",tags:["CR"]},{id:247,question:"S'agissant des d\xe9chets, quelle proposition est correcte ?",options:["On peut les jeter n'importe o\xf9","Le tri s\xe9lectif est obligatoire","Seuls les d\xe9chets verts doivent \xeatre tri\xe9s","Le tri est facultatif en zone urbaine"],correct:1,explanation:"Le tri s\xe9lectif des d\xe9chets est obligatoire en France depuis 1992 pour permettre le recyclage et r\xe9duire l'impact environnemental. Les communes doivent mettre en place des syst\xe8mes de collecte adapt\xe9s.",category:"Droits et devoirs",tags:["CR"]},{id:248,question:"Quel \xe9tait le surnom de Louis XIV ?",options:["Le Roi Chevalier","Le Roi Soleil","Le Roi Sage","Le Roi B\xe2tisseur"],correct:1,explanation:"Louis XIV \xe9tait surnomm\xe9 le Roi Soleil, symbole de son pouvoir absolu et de la splendeur de son r\xe8gne (1643-1715), le plus long de l'histoire de France.",category:"Histoire et culture",tags:["CR"]},{id:249,question:"Quel roi de France a \xe9t\xe9 ex\xe9cut\xe9 pendant la R\xe9volution fran\xe7aise ?",options:["Louis XIV","Louis XVI","Henri IV","Charles X"],correct:1,explanation:"Louis XVI a \xe9t\xe9 guillotin\xe9 le 21 janvier 1793 place de la R\xe9volution (actuelle place de la Concorde) apr\xe8s avoir \xe9t\xe9 jug\xe9 et condamn\xe9 par la Convention nationale pour trahison.",category:"Histoire et culture",tags:["CR"]},{id:250,question:"En quelle ann\xe9e Napol\xe9on Ier est-il devenu empereur ?",options:["1799","1804","1815","1789"],correct:1,explanation:"Napol\xe9on Bonaparte est devenu Napol\xe9on Ier, empereur des Fran\xe7ais, le 2 d\xe9cembre 1804 lors de son sacre \xe0 Notre-Dame de Paris en pr\xe9sence du pape Pie VII.",category:"Histoire et culture",tags:["CR"]},{id:251,question:"Lequel de ces personnages a un lien avec la R\xe9publique fran\xe7aise ?",options:["Charlemagne","Marianne","Jeanne d'Arc","Louis XIV"],correct:1,explanation:"Marianne est le symbole de la R\xe9publique fran\xe7aise depuis la R\xe9volution. Elle incarne la libert\xe9 et la R\xe9publique et figure dans toutes les mairies.",category:"Histoire et culture",tags:["CR"]},{id:252,question:"De quand date l'appel \xe0 la r\xe9sistance du g\xe9n\xe9ral de Gaulle ?",options:["18 juin 1940","8 mai 1945","14 juillet 1939","11 novembre 1918"],correct:0,explanation:"L'appel du 18 juin 1940 a \xe9t\xe9 lanc\xe9 par le g\xe9n\xe9ral de Gaulle depuis Londres pour appeler les Fran\xe7ais \xe0 r\xe9sister face \xe0 l'occupation allemande.",category:"Histoire et culture",tags:["CR"]},{id:253,question:"Pourquoi la Shoah est-elle \xe9tudi\xe9e \xe0 l'\xe9cole ?",options:["Pour apprendre l'histoire allemande","Pour comprendre les dangers du racisme et de l'antis\xe9mitisme","Pour \xe9tudier la g\xe9ographie europ\xe9enne","Pour conna\xeetre l'histoire militaire"],correct:1,explanation:"L'\xe9tude de la Shoah permet de transmettre la m\xe9moire du g\xe9nocide des Juifs et d'\xe9duquer contre le racisme, l'antis\xe9mitisme et toutes les formes de discrimination.",category:"Histoire et culture",tags:["CR"]},{id:254,question:"Quel pays a \xe9t\xe9 colonis\xe9 par la France ?",options:["Le Br\xe9sil","L'Inde","L'Alg\xe9rie","L'\xc9gypte"],correct:2,explanation:"L'Alg\xe9rie a \xe9t\xe9 colonis\xe9e par la France de 1830 \xe0 1962. Elle a obtenu son ind\xe9pendance apr\xe8s une guerre de lib\xe9ration qui s'est termin\xe9e en 1962.",category:"Histoire et culture",tags:["CR"]},{id:255,question:"Depuis quand les Fran\xe7ais \xe9lisent-ils le pr\xe9sident de la R\xe9publique au suffrage universel direct ?",options:["1789","1848","1962","1981"],correct:2,explanation:"Depuis le r\xe9f\xe9rendum de 1962, voulu par le g\xe9n\xe9ral de Gaulle, le pr\xe9sident de la R\xe9publique est \xe9lu au suffrage universel direct par tous les citoyens fran\xe7ais.",category:"Histoire et culture",tags:["CR"]},{id:256,question:"Quelle est la premi\xe8re \xe9tape de la construction europ\xe9enne en 1951 ?",options:["L'Union europ\xe9enne","La Communaut\xe9 europ\xe9enne du charbon et de l'acier (CECA)","L'espace Schengen","L'euro"],correct:1,explanation:"La CECA, cr\xe9\xe9e en 1951, est la premi\xe8re \xe9tape de la construction europ\xe9enne. Elle r\xe9unissait six pays dont la France et l'Allemagne pour g\xe9rer le charbon et l'acier.",category:"Histoire et culture",tags:["CR"]},{id:257,question:"Durant le mandat de quel pr\xe9sident la peine de mort a-t-elle \xe9t\xe9 abolie ?",options:["Charles de Gaulle","Georges Pompidou","Fran\xe7ois Mitterrand","Jacques Chirac"],correct:2,explanation:"La peine de mort a \xe9t\xe9 abolie en France en 1981 sous la pr\xe9sidence de Fran\xe7ois Mitterrand, gr\xe2ce \xe0 la loi port\xe9e par le ministre de la Justice Robert Badinter.",category:"Histoire et culture",tags:["CR"]},{id:258,question:"Quel r\xe9gime politique a \xe9t\xe9 mis en place pendant la R\xe9volution fran\xe7aise en 1792 ?",options:["La monarchie constitutionnelle","La Premi\xe8re R\xe9publique","Le Second Empire","La monarchie absolue"],correct:1,explanation:"La Premi\xe8re R\xe9publique a \xe9t\xe9 proclam\xe9e le 22 septembre 1792 apr\xe8s l'abolition de la royaut\xe9. C'est le premier r\xe9gime r\xe9publicain de l'histoire de France.",category:"Histoire et culture",tags:["CR"]},{id:259,question:"Qui \xe9tait une figure de la R\xe9sistance fran\xe7aise pendant la Seconde Guerre mondiale ?",options:["Philippe P\xe9tain","Jean Moulin","Pierre Laval","Napol\xe9on Bonaparte"],correct:1,explanation:"Jean Moulin a unifi\xe9 les mouvements de R\xe9sistance int\xe9rieure sous l'autorit\xe9 du g\xe9n\xe9ral de Gaulle. Il est mort en d\xe9portation en 1943 et repose au Panth\xe9on.",category:"Histoire et culture",tags:["CR"]},{id:260,question:"En 1944, qu'est-ce qui a chang\xe9 pour les femmes ?",options:["Le droit au travail","Le droit de vote","Le droit au divorce","Le droit \xe0 l'\xe9ducation"],correct:1,explanation:"Le droit de vote a \xe9t\xe9 accord\xe9 aux femmes fran\xe7aises le 21 avril 1944 par ordonnance du g\xe9n\xe9ral de Gaulle. Elles ont vot\xe9 pour la premi\xe8re fois en 1945.",category:"Histoire et culture",tags:["CR"]},{id:261,question:"Quelle organisation internationale a \xe9t\xe9 cr\xe9\xe9e en 1945 apr\xe8s la Seconde Guerre mondiale ?",options:["L'Union europ\xe9enne","L'Organisation des Nations unies (ONU)","L'OTAN","Le G7"],correct:1,explanation:"L'ONU a \xe9t\xe9 cr\xe9\xe9e en 1945 pour maintenir la paix et la s\xe9curit\xe9 internationales apr\xe8s la Seconde Guerre mondiale. La France est l'un des cinq membres permanents du Conseil de s\xe9curit\xe9.",category:"Histoire et culture",tags:["CR"]},{id:262,question:"Quelle peine a \xe9t\xe9 supprim\xe9e en 1981 ?",options:["La prison \xe0 perp\xe9tuit\xe9","Les travaux forc\xe9s","La peine de mort","L'exil"],correct:2,explanation:"La peine de mort a \xe9t\xe9 abolie en France le 9 octobre 1981 gr\xe2ce \xe0 la loi d\xe9fendue par Robert Badinter, alors ministre de la Justice.",category:"Histoire et culture",tags:["CR"]},{id:263,question:"En quelle ann\xe9e l'euro est-elle devenue la monnaie utilis\xe9e en France ?",options:["1995","1999","2002","2008"],correct:2,explanation:"L'euro est devenu la monnaie fiduciaire utilis\xe9e en France le 1er janvier 2002, rempla\xe7ant le franc fran\xe7ais. L'euro existait sous forme scripturale depuis 1999.",category:"Histoire et culture",tags:["CR"]},{id:264,question:"En quelle ann\xe9e a commenc\xe9 la Premi\xe8re Guerre mondiale ?",options:["1912","1914","1918","1939"],correct:1,explanation:"La Premi\xe8re Guerre mondiale a commenc\xe9 en 1914 et s'est termin\xe9e en 1918. Elle a oppos\xe9 les Alli\xe9s aux Empires centraux et caus\xe9 des millions de morts.",category:"Histoire et culture",tags:["CR"]},{id:265,question:"O\xf9 a eu lieu le d\xe9barquement en 1944 ?",options:["En Provence","En Normandie","En Bretagne","Dans le Nord"],correct:1,explanation:"Le d\xe9barquement du 6 juin 1944, appel\xe9 le Jour J, a eu lieu sur les plages de Normandie. Il marque le d\xe9but de la lib\xe9ration de la France de l'occupation allemande.",category:"Histoire et culture",tags:["CR"]},{id:266,question:"Quel continent a \xe9t\xe9 le plus concern\xe9 par la d\xe9colonisation fran\xe7aise apr\xe8s la Seconde Guerre mondiale ?",options:["L'Am\xe9rique du Sud","L'Asie","L'Afrique","L'Oc\xe9anie"],correct:2,explanation:"L'Afrique a \xe9t\xe9 le continent le plus concern\xe9 par la d\xe9colonisation fran\xe7aise, avec l'ind\xe9pendance de nombreux pays dans les ann\xe9es 1950-1960, notamment l'Alg\xe9rie en 1962.",category:"Histoire et culture",tags:["CR"]},{id:267,question:"Que f\xeate-t-on le 8 mai ?",options:["L'armistice de 1918","La victoire des Alli\xe9s en 1945","La lib\xe9ration de Paris","La f\xeate du travail"],correct:1,explanation:"Le 8 mai est un jour f\xe9ri\xe9 qui comm\xe9more la victoire des Alli\xe9s sur l'Allemagne nazie et la fin de la Seconde Guerre mondiale en Europe en 1945.",category:"Histoire et culture",tags:["CR"]},{id:268,question:"Quelle mer ou oc\xe9an borde la France m\xe9tropolitaine ?",options:["L'oc\xe9an Indien","La mer Baltique","La M\xe9diterran\xe9e","La mer Noire"],correct:2,explanation:"La France m\xe9tropolitaine est bord\xe9e par la mer M\xe9diterran\xe9e au sud, l'oc\xe9an Atlantique \xe0 l'ouest et la Manche au nord.",category:"Histoire et culture",tags:["CR"]},{id:269,question:"Quel pays a une fronti\xe8re terrestre avec la France m\xe9tropolitaine ?",options:["Le Portugal","L'Espagne","La Pologne","L'Autriche"],correct:1,explanation:"L'Espagne partage une fronti\xe8re terrestre avec la France au niveau des Pyr\xe9n\xe9es. La France a \xe9galement des fronti\xe8res avec la Belgique, le Luxembourg, l'Allemagne, la Suisse, l'Italie et Monaco.",category:"Histoire et culture",tags:["CR"]},{id:270,question:"Quelle ville fran\xe7aise est un port maritime ?",options:["Lyon","Marseille","Strasbourg","Toulouse"],correct:1,explanation:"Marseille est le premier port maritime de France et de la M\xe9diterran\xe9e. C'est une ville portuaire importante depuis l'Antiquit\xe9 situ\xe9e sur la c\xf4te m\xe9diterran\xe9enne.",category:"Histoire et culture",tags:["CR"]},{id:271,question:"Quelle mer se situe entre la France et l'Angleterre ?",options:["La mer du Nord","La Manche","La mer M\xe9diterran\xe9e","L'oc\xe9an Atlantique"],correct:1,explanation:"La Manche est le bras de mer qui s\xe9pare la France de l'Angleterre, avec une largeur minimale de 33 km au Pas-de-Calais.",category:"Histoire et culture",tags:["CR"]},{id:272,question:"Qu'est ce que la France d'outre-mer ?",options:["Les anciennes colonies fran\xe7aises devenues ind\xe9pendantes","Les territoires fran\xe7ais situ\xe9s en dehors de l'Europe","Les ambassades fran\xe7aises \xe0 l'\xe9tranger","Les territoires fran\xe7ais au-del\xe0 de la Loire"],correct:1,explanation:"La France d'outre-mer d\xe9signe l'ensemble des territoires de la R\xe9publique fran\xe7aise situ\xe9s en dehors de l'Europe, comme la Guadeloupe, la Martinique, la R\xe9union, la Guyane et la Polyn\xe9sie fran\xe7aise.",category:"Histoire et culture",tags:["CR"]},{id:273,question:"Quelle cha\xeene de montagnes est situ\xe9e entre la France et l'Espagne ?",options:["Les Alpes","Les Vosges","Les Pyr\xe9n\xe9es","Le Massif central"],correct:2,explanation:"Les Pyr\xe9n\xe9es forment une fronti\xe8re naturelle de 430 km entre la France et l'Espagne, s'\xe9tendant de l'oc\xe9an Atlantique \xe0 la mer M\xe9diterran\xe9e.",category:"Histoire et culture",tags:["CR"]},{id:274,question:"Quelle \xeele fran\xe7aise se trouve dans l'oc\xe9an Indien ?",options:["La Corse","La Guadeloupe","La R\xe9union","La Martinique"],correct:2,explanation:"La R\xe9union est un d\xe9partement fran\xe7ais d'outre-mer situ\xe9 dans l'oc\xe9an Indien, \xe0 l'est de Madagascar. La Guadeloupe et la Martinique se trouvent dans les Cara\xefbes, et la Corse en M\xe9diterran\xe9e.",category:"Histoire et culture",tags:["CR"]},{id:275,question:"Quelle est la population approximative de la France en 2025 ?",options:["58 millions d'habitants","68 millions d'habitants","78 millions d'habitants","48 millions d'habitants"],correct:1,explanation:"La France compte environ 68 millions d'habitants en 2025, incluant la France m\xe9tropolitaine et les territoires d'outre-mer.",category:"Histoire et culture",tags:["CR"]},{id:276,question:"Quel fleuve traverse Paris ?",options:["La Loire","La Seine","Le Rh\xf4ne","La Garonne"],correct:1,explanation:"La Seine traverse Paris d'est en ouest sur environ 13 km, divisant la ville en rive droite et rive gauche.",category:"Histoire et culture",tags:["CR"]},{id:277,question:"Lequel de ces pays partage des fronti\xe8res terrestres avec la France ?",options:["Le Portugal","Les Pays-Bas","La Suisse","L'Autriche"],correct:2,explanation:"La Suisse partage une fronti\xe8re de 573 km avec la France \xe0 l'est. La France a huit pays frontaliers : Belgique, Luxembourg, Allemagne, Suisse, Italie, Monaco, Espagne et Andorre.",category:"Histoire et culture",tags:["CR"]},{id:278,question:"Quel pays a une fronti\xe8re avec la France m\xe9tropolitaine au nord-est ?",options:["La Pologne","Le Luxembourg","La R\xe9publique tch\xe8que","Les Pays-Bas"],correct:1,explanation:"Le Luxembourg partage une fronti\xe8re de 73 km avec la France au nord-est, aux c\xf4t\xe9s de la Belgique et de l'Allemagne dans cette r\xe9gion.",category:"Histoire et culture",tags:["CR"]},{id:279,question:"O\xf9 se trouvent les principales activit\xe9s \xe9conomiques en France ?",options:["Dans les zones rurales","Dans les grandes villes et m\xe9tropoles","Dans les zones montagneuses","Uniquement \xe0 Paris"],correct:1,explanation:"Les principales activit\xe9s \xe9conomiques se concentrent dans les grandes villes et m\xe9tropoles comme Paris, Lyon, Marseille, Toulouse et Lille, qui regroupent entreprises, industries et services.",category:"Histoire et culture",tags:["CR"]},{id:280,question:"Parmi ces pays, lequel attire le plus de visiteurs chaque ann\xe9e ?",options:["L'Espagne","La France","L'Italie","Les \xc9tats-Unis"],correct:1,explanation:"La France est le pays le plus visit\xe9 au monde avec environ 90 millions de touristes \xe9trangers par an, gr\xe2ce \xe0 son patrimoine culturel, sa gastronomie et ses paysages vari\xe9s.",category:"Histoire et culture",tags:["CR"]},{id:281,question:"O\xf9 habite la majorit\xe9 des Fran\xe7ais ?",options:["\xc0 la campagne","En zones urbaines","En montagne","Dans les d\xe9partements d'outre-mer"],correct:1,explanation:"Environ 80% des Fran\xe7ais vivent en zones urbaines, avec une concentration importante dans les grandes m\xe9tropoles et leurs agglom\xe9rations.",category:"Histoire et culture",tags:["CR"]},{id:282,question:"Quelle r\xe9gion est la plus peupl\xe9e ?",options:["La Bretagne","L'\xcele-de-France","La Provence-Alpes-C\xf4te d'Azur","L'Occitanie"],correct:1,explanation:"L'\xcele-de-France est la r\xe9gion la plus peupl\xe9e avec plus de 12 millions d'habitants, soit environ 18% de la population fran\xe7aise totale.",category:"Histoire et culture",tags:["CR"]},{id:283,question:"Quelle ville fran\xe7aise fait partie des 10 plus grandes m\xe9tropoles du pays ?",options:["Dijon","Toulouse","Reims","Limoges"],correct:1,explanation:"Toulouse est la quatri\xe8me plus grande m\xe9tropole de France avec environ 1 million d'habitants dans son aire urbaine, reconnue pour son industrie a\xe9ronautique.",category:"Histoire et culture",tags:["CR"]},{id:284,question:"Lequel de ces d\xe9partements de France est le plus touristique ?",options:["Le Cantal","Paris (75)","La Creuse","Le Gers"],correct:1,explanation:"Paris est le d\xe9partement le plus touristique de France, attirant des dizaines de millions de visiteurs chaque ann\xe9e pour ses monuments, mus\xe9es et patrimoine culturel.",category:"Histoire et culture",tags:["CR"]},{id:285,question:"Quand peut-on visiter gratuitement des lieux culturels en France ?",options:["Tous les lundis","Le premier dimanche de chaque mois","Uniquement pendant les vacances scolaires","Seulement pour les r\xe9sidents fran\xe7ais"],correct:1,explanation:"De nombreux mus\xe9es et monuments nationaux sont gratuits le premier dimanche de chaque mois, permettant \xe0 tous d'acc\xe9der \xe0 la culture.",category:"Histoire et culture",tags:["CR"]},{id:286,question:"Combien de personnes parlent fran\xe7ais dans le monde ?",options:["Environ 100 millions","Environ 300 millions","Environ 500 millions","Environ 1 milliard"],correct:1,explanation:"Environ 300 millions de personnes parlent fran\xe7ais dans le monde, faisant du fran\xe7ais la cinqui\xe8me langue la plus parl\xe9e et une langue officielle dans 29 pays.",category:"Histoire et culture",tags:["CR"]},{id:287,question:"Qui \xe9tait Marguerite Yourcenar ?",options:["Une femme politique fran\xe7aise","Une \xe9crivaine, premi\xe8re femme \xe9lue \xe0 l'Acad\xe9mie fran\xe7aise","Une actrice de cin\xe9ma","Une scientifique fran\xe7aise"],correct:1,explanation:"Marguerite Yourcenar (1903-1987) \xe9tait une \xe9crivaine fran\xe7aise, auteure notamment des 'M\xe9moires d'Hadrien', et la premi\xe8re femme \xe9lue \xe0 l'Acad\xe9mie fran\xe7aise en 1980.",category:"Histoire et culture",tags:["CR"]},{id:288,question:"Quel peintre est fran\xe7ais ?",options:["Pablo Picasso","Claude Monet","Vincent Van Gogh","Salvador Dal\xed"],correct:1,explanation:"Claude Monet (1840-1926) \xe9tait un peintre fran\xe7ais, fondateur de l'impressionnisme, c\xe9l\xe8bre pour ses s\xe9ries des Nymph\xe9as et de la cath\xe9drale de Rouen.",category:"Histoire et culture",tags:["CR"]},{id:289,question:"Quel mus\xe9e est situ\xe9 \xe0 Paris ?",options:["Le mus\xe9e du Prado","Le Louvre","Les Offices","Le British Museum"],correct:1,explanation:"Le Louvre est le plus grand mus\xe9e de Paris et du monde, situ\xe9 dans le 1er arrondissement, abritant la Joconde et des milliers d'\u0153uvres d'art.",category:"Histoire et culture",tags:["CR"]},{id:290,question:"Qui \xe9tait Auguste Rodin ?",options:["Un architecte c\xe9l\xe8bre","Un sculpteur fran\xe7ais renomm\xe9","Un compositeur de musique classique","Un philosophe du XIXe si\xe8cle"],correct:1,explanation:"Auguste Rodin (1840-1917) \xe9tait un sculpteur fran\xe7ais majeur, cr\xe9ateur d'\u0153uvres embl\xe9matiques comme 'Le Penseur', 'Le Baiser' et 'Les Bourgeois de Calais'.",category:"Histoire et culture",tags:["CR"]},{id:291,question:"Quel est le classement de la langue fran\xe7aise parmi les langues les plus parl\xe9es dans le monde ?",options:["3\xe8me langue","5\xe8me langue","7\xe8me langue","10\xe8me langue"],correct:1,explanation:"Le fran\xe7ais est la 5\xe8me langue la plus parl\xe9e dans le monde avec environ 300 millions de locuteurs r\xe9partis sur les cinq continents.",category:"Histoire et culture",tags:["CR"]},{id:292,question:"Quelle cath\xe9drale c\xe9l\xe8bre a \xe9t\xe9 en partie d\xe9truite par un incendie en 2019 ?",options:["La cath\xe9drale de Reims","La cath\xe9drale Notre-Dame de Paris","La cath\xe9drale de Chartres","La cath\xe9drale de Strasbourg"],correct:1,explanation:"La cath\xe9drale Notre-Dame de Paris a subi un incendie majeur le 15 avril 2019, d\xe9truisant sa fl\xe8che et sa toiture, mais pr\xe9servant sa structure principale.",category:"Histoire et culture",tags:["CR"]},{id:293,question:"Qui \xe9tait une \xe9crivaine fran\xe7aise c\xe9l\xe8bre ?",options:["Simone de Beauvoir","Marie Curie","\xc9dith Piaf","Coco Chanel"],correct:0,explanation:"Simone de Beauvoir \xe9tait une \xe9crivaine, philosophe et f\xe9ministe fran\xe7aise c\xe9l\xe8bre, auteure notamment du 'Deuxi\xe8me Sexe' publi\xe9 en 1949.",category:"Histoire et culture",tags:["CR"]},{id:294,question:"Qui \xe9tait un c\xe9l\xe8bre musicien fran\xe7ais ?",options:["Auguste Rodin","Claude Debussy","Victor Hugo","Paul C\xe9zanne"],correct:1,explanation:"Claude Debussy \xe9tait un compositeur fran\xe7ais majeur de la fin du XIXe et du d\xe9but du XXe si\xe8cle, consid\xe9r\xe9 comme l'un des fondateurs de la musique impressionniste.",category:"Histoire et culture",tags:["CR"]},{id:295,question:"Qui \xe9tait Auguste Renoir ?",options:["Un scientifique","Un peintre impressionniste","Un homme politique","Un \xe9crivain"],correct:1,explanation:"Auguste Renoir \xe9tait un peintre impressionniste fran\xe7ais c\xe9l\xe8bre, connu pour ses sc\xe8nes de la vie parisienne et ses portraits lumineux.",category:"Histoire et culture",tags:["CR"]},{id:296,question:"Quelle f\xeate est fran\xe7aise ?",options:["Thanksgiving","Le 14 juillet","Le jour de l'An chinois","Halloween"],correct:1,explanation:"Le 14 juillet est la f\xeate nationale fran\xe7aise comm\xe9morant la prise de la Bastille en 1789 et la F\xeate de la F\xe9d\xe9ration de 1790.",category:"Histoire et culture",tags:["CR"]},{id:297,question:"Quel mariage est reconnu par l'\xc9tat ?",options:["Le mariage religieux uniquement","Le mariage civil \xe0 la mairie","Le mariage traditionnel en famille","Le mariage symbolique"],correct:1,explanation:"Seul le mariage civil c\xe9l\xe9br\xe9 \xe0 la mairie par un officier d'\xe9tat civil a une valeur juridique en France et est reconnu par l'\xc9tat.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:298,question:"Aupr\xe8s de quelle institution les parents peuvent-ils inscrire leur enfant \xe0 l'\xe9cole publique ?",options:["La pr\xe9fecture","La mairie","Le conseil d\xe9partemental","Le rectorat"],correct:1,explanation:"L'inscription \xe0 l'\xe9cole publique se fait aupr\xe8s de la mairie de la commune de r\xe9sidence, qui d\xe9livre un certificat d'inscription pour l'\xe9cole de secteur.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:299,question:"En cas de divorce, qui exerce l'autorit\xe9 parentale ?",options:["Uniquement la m\xe8re","Uniquement le p\xe8re","Les deux parents ensemble","Le parent qui a la garde"],correct:2,explanation:"L'autorit\xe9 parentale reste conjointe apr\xe8s le divorce, les deux parents continuent \xe0 exercer ensemble l'autorit\xe9 parentale, sauf d\xe9cision contraire du juge.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:300,question:"Quelle aide permet aux personnes qui ont des difficult\xe9s financi\xe8res d'avoir un avocat ?",options:["L'aide personnalis\xe9e au logement","L'aide juridictionnelle","Le revenu de solidarit\xe9 active","L'allocation ch\xf4mage"],correct:1,explanation:"L'aide juridictionnelle permet aux personnes ayant des ressources insuffisantes de b\xe9n\xe9ficier d'une prise en charge totale ou partielle des frais d'avocat.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:301,question:"O\xf9 faut-il d\xe9clarer la naissance d'un enfant ?",options:["\xc0 la pr\xe9fecture","\xc0 la mairie","Au commissariat de police","\xc0 l'h\xf4pital"],correct:1,explanation:"La naissance d'un enfant doit \xeatre d\xe9clar\xe9e \xe0 la mairie du lieu de naissance dans les 5 jours suivant l'accouchement pour \xe9tablir l'acte de naissance.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:302,question:"Quelle est l'une des conditions pour passer l'examen du permis de conduire ?",options:["Avoir 21 ans minimum","Avoir r\xe9ussi le code de la route","\xcatre de nationalit\xe9 fran\xe7aise","Avoir un v\xe9hicule personnel"],correct:1,explanation:"Pour passer l'examen pratique du permis de conduire, il faut d'abord avoir r\xe9ussi l'examen th\xe9orique du code de la route.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:303,question:"Un bail locatif est valide s'il est :",options:["Oral uniquement","\xc9crit et sign\xe9 par les deux parties","Valid\xe9 par la police","Enregistr\xe9 \xe0 la pr\xe9fecture"],correct:1,explanation:"Un bail locatif doit \xeatre \xe9crit et sign\xe9 par le propri\xe9taire et le locataire pour \xeatre valide et avoir une valeur juridique.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:304,question:"O\xf9 peut-on d\xe9poser un lave-vaisselle cass\xe9 ?",options:["Dans la poubelle ordinaire","Sur le trottoir","En d\xe9chetterie","Dans un conteneur de recyclage du verre"],correct:2,explanation:"Les gros \xe9lectrom\xe9nagers comme les lave-vaisselle doivent \xeatre d\xe9pos\xe9s en d\xe9chetterie o\xf9 ils seront recycl\xe9s selon la fili\xe8re des d\xe9chets d'\xe9quipements \xe9lectriques et \xe9lectroniques.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:305,question:"Quel num\xe9ro d'urgence permet d'appeler la police ?",options:["15","17","18","112"],correct:1,explanation:"Le 17 est le num\xe9ro d'urgence pour contacter la police ou la gendarmerie en France en cas d'accident, d'agression ou de situation dangereuse.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:306,question:"\xc0 qui est accessible la contraception ?",options:["Uniquement aux femmes majeures","Aux femmes et aux hommes","Uniquement sur prescription m\xe9dicale","Uniquement aux personnes mari\xe9es"],correct:1,explanation:"La contraception est accessible \xe0 toutes et tous, femmes et hommes, avec diff\xe9rentes m\xe9thodes disponibles selon les besoins de chacun.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:307,question:"Qu'est-ce que le principe de confidentialit\xe9 dans le domaine de la sant\xe9 ?",options:["L'obligation de payer les soins","Le secret m\xe9dical prot\xe9geant les informations personnelles","Le droit de choisir son m\xe9decin","L'acc\xe8s gratuit aux soins"],correct:1,explanation:"Le principe de confidentialit\xe9 ou secret m\xe9dical oblige les professionnels de sant\xe9 \xe0 ne pas divulguer les informations concernant leurs patients sans leur consentement.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:308,question:"L'inscription \xe0 l'Assurance maladie est :",options:["Obligatoire pour tous les r\xe9sidents","Facultative","R\xe9serv\xe9e aux citoyens fran\xe7ais","Payante selon les revenus"],correct:0,explanation:"L'inscription \xe0 l'Assurance maladie est obligatoire pour toutes les personnes r\xe9sidant en France de mani\xe8re stable et r\xe9guli\xe8re, quelle que soit leur nationalit\xe9.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:309,question:"Qui peut demander un cong\xe9 parental d'\xe9ducation ?",options:["Uniquement la m\xe8re","Uniquement le p\xe8re","La m\xe8re ou le p\xe8re","Uniquement les fonctionnaires"],correct:2,explanation:"Le cong\xe9 parental d'\xe9ducation peut \xeatre demand\xe9 par la m\xe8re ou le p\xe8re salari\xe9 pour s'occuper de leur enfant, apr\xe8s sa naissance ou son adoption.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:310,question:"Quelles sont les affaires trait\xe9es par le conseil de prud'hommes ?",options:["Les affaires p\xe9nales","Les litiges entre employeurs et salari\xe9s","Les divorces","Les conflits de voisinage"],correct:1,explanation:"Le conseil de prud'hommes est une juridiction sp\xe9cialis\xe9e qui r\xe8gle les conflits individuels du travail entre employeurs et salari\xe9s.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:311,question:"Travailler sans \xeatre d\xe9clar\xe9 est :",options:["Autoris\xe9 si le salaire est inf\xe9rieur au SMIC","Interdit et puni par la loi","Autoris\xe9 pour les jobs d'\xe9t\xe9","Autoris\xe9 si l'employeur est d'accord"],correct:1,explanation:"Le travail dissimul\xe9 (au noir) est strictement interdit en France et constitue une infraction p\xe9nale passible de sanctions pour l'employeur comme pour le salari\xe9.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:312,question:"Lorsqu'un employeur veut qu'un salari\xe9 travaille plus longtemps que la dur\xe9e pr\xe9vue dans le contrat de travail :",options:["Le salari\xe9 doit obligatoirement accepter","Le salari\xe9 peut refuser et ces heures doivent \xeatre pay\xe9es en heures suppl\xe9mentaires","Le salari\xe9 perd son emploi s'il refuse","L'employeur peut modifier le contrat sans accord"],correct:1,explanation:"Les heures suppl\xe9mentaires doivent \xeatre r\xe9mun\xe9r\xe9es avec une majoration et le salari\xe9 a des droits encadr\xe9s par le Code du travail pour les accepter ou les refuser selon les cas.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:313,question:"Quelle est la mission de France Travail ?",options:["Contr\xf4ler les entreprises","Accompagner les demandeurs d'emploi et les aider \xe0 trouver un travail","Fixer les salaires minimums","G\xe9rer les retraites"],correct:1,explanation:"France Travail (anciennement P\xf4le emploi) accompagne les demandeurs d'emploi dans leur recherche, les inscrit, leur verse des allocations et les aide dans leur parcours professionnel.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:314,question:"Dans une entreprise, le droit syndical permet :",options:["D'\xeatre pay\xe9 sans travailler","De s'organiser collectivement pour d\xe9fendre les droits des salari\xe9s","De choisir son salaire","De ne pas respecter le r\xe8glement int\xe9rieur"],correct:1,explanation:"Le droit syndical garantit aux salari\xe9s la libert\xe9 de se syndiquer et permet aux syndicats de d\xe9fendre collectivement les int\xe9r\xeats professionnels des travailleurs.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:315,question:"Dans une entreprise, le droit de gr\xe8ve autorise :",options:["L'arr\xeat collectif du travail pour d\xe9fendre des revendications professionnelles","L'absence individuelle sans pr\xe9avis","Le refus de travailler de mani\xe8re permanente","La destruction du mat\xe9riel de l'entreprise"],correct:0,explanation:"Le droit de gr\xe8ve, reconnu par la Constitution, permet aux salari\xe9s de cesser collectivement le travail pour d\xe9fendre des revendications professionnelles, sans rupture du contrat de travail.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:316,question:"Quelles sont les conditions pour toucher les allocations ch\xf4mage ?",options:["Avoir d\xe9missionn\xe9 volontairement","Avoir travaill\xe9 et cotis\xe9 suffisamment et \xeatre involontairement priv\xe9 d'emploi","Avoir plus de 60 ans","Ne jamais avoir travaill\xe9"],correct:1,explanation:"Pour b\xe9n\xe9ficier des allocations ch\xf4mage, il faut avoir travaill\xe9 et cotis\xe9 une dur\xe9e minimale, \xeatre involontairement priv\xe9 d'emploi et \xeatre en recherche active d'un emploi.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:317,question:"Qu'est-ce que l'\xe9cole maternelle ?",options:["L'\xe9cole pour les enfants de 6 \xe0 11 ans","L'\xe9cole pour les enfants de 3 \xe0 6 ans","L'\xe9cole pour les enfants de 11 \xe0 15 ans","L'\xe9cole pour apprendre un m\xe9tier"],correct:1,explanation:"L'\xe9cole maternelle accueille les enfants de 3 \xe0 6 ans et constitue la premi\xe8re \xe9tape de la scolarit\xe9, devenue obligatoire \xe0 partir de 3 ans.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:318,question:"Comment s'appelle le dipl\xf4me pass\xe9 par les \xe9l\xe8ves \xe0 la fin du coll\xe8ge ?",options:["Le baccalaur\xe9at","Le certificat d'\xe9tudes","Le dipl\xf4me national du brevet (DNB)","Le CAP"],correct:2,explanation:"Le dipl\xf4me national du brevet (DNB) est obtenu \xe0 la fin de la classe de troisi\xe8me et valide les connaissances et comp\xe9tences acquises au coll\xe8ge.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:319,question:"Les parents d'\xe9l\xe8ve ont le droit de :",options:["Choisir les enseignants de leurs enfants","\xcatre inform\xe9s et participer \xe0 la vie scolaire par l'interm\xe9diaire de leurs repr\xe9sentants","Assister \xe0 tous les cours","D\xe9cider du contenu des programmes"],correct:1,explanation:"Les parents d'\xe9l\xe8ves ont le droit d'\xeatre inform\xe9s du parcours scolaire de leur enfant et peuvent participer \xe0 la vie de l'\xe9cole notamment via leurs repr\xe9sentants \xe9lus.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:320,question:"Qui peut manger \xe0 la cantine scolaire ?",options:["Seulement les \xe9l\xe8ves fran\xe7ais","Tous les \xe9l\xe8ves inscrits \xe0 l'\xe9cole, sans discrimination","Seulement les \xe9l\xe8ves dont les parents travaillent","Seulement les \xe9l\xe8ves de nationalit\xe9 europ\xe9enne"],correct:1,explanation:"La cantine scolaire est un service public accessible \xe0 tous les \xe9l\xe8ves scolaris\xe9s sans discrimination, selon les places disponibles et les modalit\xe9s d\xe9finies par la collectivit\xe9.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:321,question:"\xc0 quel \xe2ge commence l'instruction obligatoire des enfants ?",options:["\xc0 6 ans","\xc0 5 ans","\xc0 3 ans","\xc0 4 ans"],correct:2,explanation:"Depuis la loi de 2019, l'instruction est obligatoire d\xe8s 3 ans (\xe2ge d'entr\xe9e en maternelle) et jusqu'\xe0 16 ans en France.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:322,question:"Quel est l'\xe2ge de la majorit\xe9 ?",options:["16 ans","17 ans","18 ans","21 ans"],correct:2,explanation:"En France, la majorit\xe9 civile est fix\xe9e \xe0 18 ans. \xc0 cet \xe2ge, une personne devient juridiquement capable et dispose de tous ses droits civiques.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:323,question:"\xc0 l'\xe9cole, il est interdit aux parents de :",options:["Rencontrer les enseignants","Participer aux sorties scolaires","Porter atteinte \xe0 la la\xefcit\xe9 et au bon fonctionnement de l'\xe9cole","Consulter le carnet de notes"],correct:2,explanation:"Les parents doivent respecter les principes de la\xefcit\xe9 et le bon fonctionnement du service public d'\xe9ducation, notamment en s'abstenant de tout pros\xe9lytisme.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:324,question:"Quel motif d'absence est accept\xe9 par l'\xe9cole ?",options:["Un voyage familial pendant les cours","Une maladie de l'enfant justifi\xe9e par certificat m\xe9dical","Des courses \xe0 faire","Un rendez-vous non urgent"],correct:1,explanation:"Seuls certains motifs sont l\xe9gitimes pour justifier une absence scolaire : maladie de l'enfant, r\xe9union solennelle de famille, emp\xeachement r\xe9sultant de difficult\xe9s de transport.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:325,question:"Des parents ne respectent pas l'obligation d'instruction pour leurs enfants. Quelle sanction maximale risquent-ils ?",options:["Une simple avertissement","Une amende de 100 euros","Une peine pouvant aller jusqu'\xe0 6 mois d'emprisonnement et 7 500 euros d'amende","Le retrait imm\xe9diat de l'enfant"],correct:2,explanation:"Le non-respect de l'obligation d'instruction est sanctionn\xe9 p\xe9nalement et peut entra\xeener jusqu'\xe0 6 mois d'emprisonnement et 7 500 euros d'amende pour les parents.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:326,question:"Quand ont lieu les vacances scolaires de No\xebl ?",options:["En novembre","Fin d\xe9cembre et d\xe9but janvier","En f\xe9vrier","D\xe9but d\xe9cembre"],correct:1,explanation:"Les vacances de No\xebl ont lieu fin d\xe9cembre et d\xe9but janvier, g\xe9n\xe9ralement pendant deux semaines incluant les f\xeates de fin d'ann\xe9e.",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]},{id:327,question:"\xc0 l'\xe9cole, un enfant en situation de handicap :",options:["Ne peut pas \xeatre scolaris\xe9 en \xe9cole ordinaire","A le droit d'\xeatre scolaris\xe9 et peut b\xe9n\xe9ficier d'am\xe9nagements adapt\xe9s","Doit obligatoirement aller dans un \xe9tablissement sp\xe9cialis\xe9","Ne peut pas passer d'examens"],correct:1,explanation:"Tout enfant en situation de handicap a le droit d'\xeatre scolaris\xe9 en milieu ordinaire avec, si n\xe9cessaire, un accompagnement et des am\xe9nagements adapt\xe9s (AVS, mat\xe9riel sp\xe9cifique, etc.).",category:"Vivre dans la soci\xe9t\xe9 fran\xe7aise",tags:["CR"]}],s=e=>{const t=e.options[e.correct],n=(e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t})(e.options),i=n.indexOf(t);return(0,r.A)((0,r.A)({},e),{},{options:n,correct:i})},a=(e,t)=>{const n=i.filter(t=>t.tags.includes(e));return n.sort(()=>Math.random()-.5).slice(0,t).map(e=>s(e))},o=function(){return a("CSP",arguments.length>0&&void 0!==arguments[0]?arguments[0]:15)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CSP";const t=i.filter(t=>t.tags.includes(e));return t.map(e=>s(e))},u=e=>i.filter(t=>t.tags.includes(e)).length,c={CSP:150,CR:199}},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),i=n(391),s=n(555);function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=["color","size","strokeWidth","absoluteStrokeWidth","children"];var u=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:u="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:h,children:p}=n,m=a(n,l);return(0,r.createElement)("svg",(0,s.A)((0,s.A)({ref:i},o),{},{width:c,height:c,stroke:u,strokeWidth:h?24*Number(d)/Number(c):d,className:"lucide lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},m),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(p)?p:[p])||[]]);var f});return n.displayName="".concat(e),n};const c=u("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),d=u("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),h=u("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),p=u("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),m=u("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),f=u("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),g=u("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),v=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),y=u("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),b=u("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),x=u("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),w=u("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),k=()=>{try{const e=localStorage.getItem("examen-stats");return e?JSON.parse(e):null}catch(e){return console.error("Load error:",e),null}},S=e=>{try{localStorage.setItem("examen-stats",JSON.stringify(e))}catch(t){console.error("Save error:",t)}},C=()=>{try{const e=localStorage.getItem("learned-questions");return e?JSON.parse(e):{CSP:[],CR:[]}}catch(e){return console.error("Load learned questions error:",e),{CSP:[],CR:[]}}},N=e=>{try{localStorage.setItem("learned-questions",JSON.stringify(e))}catch(t){console.error("Save learned questions error:",t)}},E=(e,t)=>{const n=C();return t.forEach(t=>{n[t].includes(e)||n[t].push(e)}),N(n),n},_=e=>{const t=C(),{questionsDB:r}=n(856),i=r.filter(t=>t.tags.includes(e)).length;return{learned:t[e].length,total:i,percentage:i>0?Math.round(t[e].length/i*100):0}},T=()=>{try{const e=localStorage.getItem("quiz-history");return e?JSON.parse(e):[]}catch(e){return console.error("Load quiz history error:",e),[]}},I=e=>{try{localStorage.setItem("quiz-history",JSON.stringify(e))}catch(t){console.error("Save quiz history error:",t)}},L=e=>{const t=T();t.push((0,s.A)((0,s.A)({},e),{},{date:(new Date).toISOString()})),t.length>50&&t.shift(),I(t)},P=()=>{try{const e=localStorage.getItem("wrong-answers");return e?JSON.parse(e):[]}catch(e){return console.error("Load wrong answers error:",e),[]}},R=e=>{try{localStorage.setItem("wrong-answers",JSON.stringify(e))}catch(t){console.error("Save wrong answers error:",t)}},A=(e,t,n)=>{const r=P(),i=r.find(t=>t.questionId===e);i?(i.attempts++,i.lastAttempt=(new Date).toISOString()):r.push({questionId:e,userAnswer:t,correctAnswer:n,attempts:1,lastAttempt:(new Date).toISOString()}),R(r)},j=()=>{try{const e=localStorage.getItem("saved-questions");return e?JSON.parse(e):[]}catch(e){return console.error("Load saved questions error:",e),[]}},q=e=>{try{localStorage.setItem("saved-questions",JSON.stringify(e))}catch(t){console.error("Save saved questions error:",t)}},D=e=>{const t=j(),n=t.indexOf(e);return n>-1?t.splice(n,1):t.push(e),q(t),t},O=e=>j().includes(e);var M=n(579);const F=(0,r.createContext)(),U=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(()=>"dark"===localStorage.getItem("theme"));(0,r.useEffect)(()=>{localStorage.setItem("theme",n?"dark":"light"),n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);return(0,M.jsx)(F.Provider,{value:{isDark:n,toggleTheme:()=>{i(!n)}},children:t})},V=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(V(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new B;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class B extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H=function(e){return function(e){const t=V(e);return z.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Q=function(e){try{return z.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function G(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const W=()=>{try{return G().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Q(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},K=e=>{var t;return null===(t=W())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},J=()=>{var e;return null===(e=W())||void 0===e?void 0:e.config},X=e=>{var t;return null===(t=W())||void 0===t?void 0:t["_".concat(e)]};class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function $(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Z(e){return(await fetch(e,{credentials:"include"})).ok}const ee={};let te=!1;function ne(e,t){if("undefined"===typeof window||"undefined"===typeof document||!$(window.location.host)||ee[e]===t||ee[e]||te)return;function n(e){return"__firebase__banner__".concat(e)}ee[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ee))ee[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{te=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function re(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ie(){var e;const t=null===(e=W())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function se(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"===typeof indexedDB}catch(e){return!1}}class oe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ue,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new oe(n,s,t)}}const ue=/\{\$([^}]+)}/g;function ce(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(de(n)&&de(s)){if(!ce(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function de(e){return null!==e&&"object"===typeof e}function he(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pe(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function me(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class fe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ge),void 0===r.error&&(r.error=ge),void 0===r.complete&&(r.complete=ge);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ge(){}function ve(e){return e&&e._delegate?e._delegate:e}class ye{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const be="[DEFAULT]";class xe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Y;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:be})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===be?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.component?this.component.multipleInstances?e:be:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ke=[];var Se;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Se||(Se={}));const Ce={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Ne=Se.INFO,Ee={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},_e=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ee[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Te{constructor(e){this.name=e,this._logLevel=Ne,this._logHandler=_e,this._userLogHandler=null,ke.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ce[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...t),this._logHandler(this,Se.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...t),this._logHandler(this,Se.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Se.INFO,...t),this._logHandler(this,Se.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Se.WARN,...t),this._logHandler(this,Se.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...t),this._logHandler(this,Se.ERROR,...t)}}let Ie,Le;const Pe=new WeakMap,Re=new WeakMap,Ae=new WeakMap,je=new WeakMap,qe=new WeakMap;let De={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ae.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fe(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ue(this),n),Fe(Pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fe(e.apply(Ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ue(this),t,...r);return Ae.set(s,t.sort?t.sort():[t]),Fe(s)}}function Me(e){return"function"===typeof e?Oe(e):(e instanceof IDBTransaction&&function(e){if(Re.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Re.set(e,t)}(e),t=e,(Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,De):e);var t}function Fe(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Fe(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Pe.set(t,e)}).catch(()=>{}),qe.set(t,e),t}(e);if(je.has(e))return je.get(e);const t=Me(e);return t!==e&&(je.set(e,t),qe.set(t,e)),t}const Ue=e=>qe.get(e);const Ve=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],Be=new Map;function He(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Be.get(t))return Be.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ve.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Be.set(t,s),s}De=(e=>(0,s.A)((0,s.A)({},e),{},{get:(t,n,r)=>He(t,n)||e.get(t,n,r),has:(t,n)=>!!He(t,n)||e.has(t,n)}))(De);class Qe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ge="@firebase/app",We="0.14.6",Ke=new Te("@firebase/app"),Je="@firebase/app-compat",Xe="@firebase/analytics-compat",Ye="@firebase/analytics",$e="@firebase/app-check-compat",Ze="@firebase/app-check",et="@firebase/auth",tt="@firebase/auth-compat",nt="@firebase/database",rt="@firebase/data-connect",it="@firebase/database-compat",st="@firebase/functions",at="@firebase/functions-compat",ot="@firebase/installations",lt="@firebase/installations-compat",ut="@firebase/messaging",ct="@firebase/messaging-compat",dt="@firebase/performance",ht="@firebase/performance-compat",pt="@firebase/remote-config",mt="@firebase/remote-config-compat",ft="@firebase/storage",gt="@firebase/storage-compat",vt="@firebase/firestore",yt="@firebase/ai",bt="@firebase/firestore-compat",xt="firebase",wt="[DEFAULT]",kt={[Ge]:"fire-core",[Je]:"fire-core-compat",[Ye]:"fire-analytics",[Xe]:"fire-analytics-compat",[Ze]:"fire-app-check",[$e]:"fire-app-check-compat",[et]:"fire-auth",[tt]:"fire-auth-compat",[nt]:"fire-rtdb",[rt]:"fire-data-connect",[it]:"fire-rtdb-compat",[st]:"fire-fn",[at]:"fire-fn-compat",[ot]:"fire-iid",[lt]:"fire-iid-compat",[ut]:"fire-fcm",[ct]:"fire-fcm-compat",[dt]:"fire-perf",[ht]:"fire-perf-compat",[pt]:"fire-rc",[mt]:"fire-rc-compat",[ft]:"fire-gcs",[gt]:"fire-gcs-compat",[vt]:"fire-fst",[bt]:"fire-fst-compat",[yt]:"fire-vertex","fire-js":"fire-js",[xt]:"fire-js-all"},St=new Map,Ct=new Map,Nt=new Map;function Et(e,t){try{e.container.addComponent(t)}catch(n){Ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function _t(e){const t=e.name;if(Nt.has(t))return Ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;Nt.set(t,e);for(const n of St.values())Et(n,e);for(const n of Ct.values())Et(n,e);return!0}function Tt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function It(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Lt=new le("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Pt{constructor(e,t,n){this._isDeleted=!1,this._options=(0,s.A)({},e),this._config=(0,s.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ye("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}const Rt="12.6.0";function At(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=(0,s.A)({name:wt,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Lt.create("bad-app-name",{appName:String(i)});if(n||(n=J()),!n)throw Lt.create("no-options");const a=St.get(i);if(a){if(ce(n,a.options)&&ce(r,a.config))return a;throw Lt.create("duplicate-app",{appName:i})}const o=new we(i);for(const s of Nt.values())o.addComponent(s);const l=new Pt(n,r,o);return St.set(i,l),l}function jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;const t=St.get(e);if(!t&&e===wt&&J())return At();if(!t)throw Lt.create("no-app",{appName:e});return t}function qt(e,t,n){var r;let i=null!==(r=kt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ke.warn(e.join(" "))}_t(new ye("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Dt="firebase-heartbeat-store";let Ot=null;function Mt(){return Ot||(Ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Fe(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Fe(a.result),e.oldVersion,e.newVersion,Fe(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Dt)}catch(n){console.warn(n)}}}).catch(e=>{throw Lt.create("idb-open",{originalErrorMessage:e.message})})),Ot}async function Ft(e,t){try{const n=(await Mt()).transaction(Dt,"readwrite"),r=n.objectStore(Dt);await r.put(t,Ut(e)),await n.done}catch(n){if(n instanceof oe)Ke.warn(n.message);else{const e=Lt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ke.warn(e.message)}}}function Ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ke.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=zt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ht(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ht(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=H(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ke.warn(t),""}}}function zt(){return(new Date).toISOString().substring(0,10)}class Bt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ae()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mt()).transaction(Dt),n=await t.objectStore(Dt).get(Ut(e));return await t.done,n}catch(t){if(t instanceof oe)Ke.warn(t.message);else{const e=Lt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ke.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ft(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ft(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ht(e){return H(JSON.stringify({version:2,heartbeats:e})).length}var Qt;Qt="",_t(new ye("platform-logger",e=>new Qe(e),"PRIVATE")),_t(new ye("heartbeat",e=>new Vt(e),"PRIVATE")),qt(Ge,We,Qt),qt(Ge,We,"esm2020"),qt("fire-js","");const Gt=["providerId"],Wt=["uid","auth","stsTokenManager"],Kt=["providerId","signInMethod"];function Jt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xt=Jt,Yt=new le("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$t=new Te("@firebase/auth");function Zt(e){if($t.logLevel<=Se.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$t.error("Auth (".concat(Rt,"): ").concat(e),...n)}}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw an(e,...n)}function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return an(e,...n)}function nn(e,t,n){const r=(0,s.A)((0,s.A)({},Xt()),{},{[t]:n});return new le("auth","Firebase",r).create(t,{appName:e.name})}function rn(e){return nn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&en(e,"argument-error"),nn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function an(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Yt.create(e,...n)}function on(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw an(t,...r)}}function ln(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zt(t),new Error(t)}function un(e,t){e||ln(t)}function cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dn(){return"http:"===hn()||"https:"===hn()}function hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function pn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class mn{constructor(e,t){this.shortDelay=e,this.longDelay=t,un(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(re())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return pn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(e,t){un(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class gn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bn=new mn(3e4,6e4);function xn(e,t){return e.tenantId&&!t.tenantId?(0,s.A)((0,s.A)({},t),{},{tenantId:e.tenantId}):t}async function wn(e,t,n,r){return kn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=he((0,s.A)({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=(0,s.A)({method:t,headers:l},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&$(e.emulatorConfig.host)&&(u.credentials="include"),gn.fetch()(await Cn(e,e.config.apiHost,n,o),u)})}async function kn(e,t,n){e._canInitEmulator=!1;const r=(0,s.A)((0,s.A)({},vn),t);try{const t=new En(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw _n(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw _n(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw _n(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw _n(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw nn(e,o,a);en(e,o)}}catch(i){if(i instanceof oe)throw i;en(e,"network-request-failed",{message:String(i)})}}async function Sn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await wn(e,t,n,r,i);return"mfaPendingCredential"in s&&en(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Cn(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?fn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(yn.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Nn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(tn(this.auth,"network-request-failed")),bn.get())})}}function _n(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tn(e,t,r);return i.customData._tokenResponse=n,i}function Tn(e){return void 0!==e&&void 0!==e.enterprise}class In{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Nn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ln(e,t){return wn(e,"GET","/v2/recaptchaConfig",xn(e,t))}async function Pn(e,t){return wn(e,"POST","/v1/accounts:lookup",t)}function Rn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function An(e){return 1e3*Number(e)}function jn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const e=Q(n);return e?JSON.parse(e):(Zt("Failed to decode base64 JWT payload"),null)}catch(i){return Zt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function qn(e){const t=jn(e);return on(t,"internal-error"),on("undefined"!==typeof t.exp,"internal-error"),on("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Dn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof oe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class On{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Mn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Dn(e,Pn(n,{idToken:r}));on(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?Un(s.providerUserInfo):[],o=(l=e.providerData,u=a,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!c&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Mn(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function Un(e){return e.map(e=>{let{providerId:t}=e,n=a(e,Gt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){on(e.idToken,"internal-error"),on("undefined"!==typeof e.idToken,"internal-error"),on("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):qn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){on(0!==e.length,"internal-error");const t=qn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(on(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await kn(e,{},async()=>{const n=he({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Cn(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&$(e.emulatorConfig.host)&&(o.credentials="include"),gn.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Vn;return n&&(on("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(on("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(on("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vn,this.toJSON())}_performRefresh(){return ln("not implemented")}}function zn(e,t){on("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Bn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,Wt);this.providerId="firebase",this.proactiveRefresh=new On(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Dn(this,this.stsTokenManager.getToken(this.auth,e));return on(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ve(e),r=await n.getIdToken(t),i=jn(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Rn(An(i.auth_time)),issuedAtTime:Rn(An(i.iat)),expirationTime:Rn(An(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ve(e);await Fn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(on(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,s.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bn((0,s.A)((0,s.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(rn(this.auth));const e=await this.getIdToken();return await Dn(this,async function(e,t){return wn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,s.A)((0,s.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,s.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,o,l,u,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:k,stsTokenManager:S}=t;on(b&&S,e,"internal-error");const C=Vn.fromJSON(this.name,S);on("string"===typeof b,e,"internal-error"),zn(d,e.name),zn(h,e.name),on("boolean"===typeof x,e,"internal-error"),on("boolean"===typeof w,e,"internal-error"),zn(p,e.name),zn(m,e.name),zn(f,e.name),zn(g,e.name),zn(v,e.name),zn(y,e.name);const N=new Bn({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:p,tenantId:f,stsTokenManager:C,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(N.providerData=k.map(e=>(0,s.A)({},e))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Vn;r.updateFromServerResponse(t);const i=new Bn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];on(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Un(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new Vn;a.updateFromIdToken(n);const o=new Bn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Mn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Hn=new Map;function Qn(e){un(e instanceof Function,"Expected a class definition");let t=Hn.get(e);return t?(un(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hn.set(e,t),t)}class Gn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gn.type="NONE";const Wn=Gn;function Kn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Jn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Kn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Kn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Pn(this.auth,{idToken:e}).catch(()=>{});return t?Bn._fromGetAccountInfoResponse(this.auth,t,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Jn(Qn(Wn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Qn(Wn);const s=Kn(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(s);if(t){let n;if("string"===typeof t){const r=await Pn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Bn._fromGetAccountInfoResponse(e,r,t)}else n=Bn._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Jn(i,e,n)):new Jn(i,e,n)}}function Xn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(er(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nr(t))return"Blackberry";if(rr(t))return"Webos";if($n(t))return"Safari";if((t.includes("chrome/")||Zn(t))&&!t.includes("edge/"))return"Chrome";if(tr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/firefox\//i.test(e)}function $n(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:re()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/crios\//i.test(e)}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/iemobile/i.test(e)}function tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/android/i.test(e)}function nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/blackberry/i.test(e)}function rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/webos/i.test(e)}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sr(){return function(){const e=re();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return ir(e)||tr(e)||rr(e)||nr(e)||/windows phone/i.test(e)||er(e)}function or(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Xn(re());break;case"Worker":t="".concat(Xn(re()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rt,"/").concat(r)}class lr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ur{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class cr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hr(this),this.idTokenSubscription=new hr(this),this.beforeStateQueue=new lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Jn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Pn(this,{idToken:e}),n=await Bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(It(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(rn(this));const t=e?ve(e):null;return t&&on(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&on(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return wn(e,"GET","/v2/passwordPolicy",xn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ur(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new le("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return wn(e,"POST","/v2/accounts:revokeToken",xn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qn(e)||this._popupRedirectResolver;on(t,this,"argument-error"),this.redirectPersistenceManager=await Jn.create(this,[Qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if($t.logLevel<=Se.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$t.warn("Auth (".concat(Rt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function dr(e){return ve(e)}class hr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new fe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mr(e){return pr.loadJS(e)}function fr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gr{constructor(){this.enterprise=new vr}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vr{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yr="NO_RECAPTCHA";class br{constructor(e){this.type="recaptcha-enterprise",this.auth=dr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Tn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(yr)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new gr).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ln(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new In(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Tn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=pr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),mr(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function xr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new br(e);let o;if(i)o=yr;else try{o=await a.verify(n)}catch(u){o=await a.verify(n,!0)}const l=(0,s.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function wr(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await xr(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await xr(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await xr(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function kr(e){const t=dr(e),n=await Ln(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new In(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new br(t).verify()}}function Sr(e,t,n){const r=dr(e);on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Cr(t),{host:a,port:o}=function(e){const t=Cr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Nr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Nr(t)}}}(t),l=null===o?"":":".concat(o),u={url:"".concat(s,"//").concat(a).concat(l,"/")},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return on(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void on(ce(u,r.config.emulator)&&ce(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,$(a)?(Z("".concat(s,"//").concat(a).concat(l)),ne("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Cr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Er{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ln("not implemented")}_getIdTokenResponse(e){return ln("not implemented")}_linkToIdToken(e,t){return ln("not implemented")}_getReauthenticationResolver(e){return ln("not implemented")}}async function _r(e,t){return wn(e,"POST","/v1/accounts:signUp",t)}async function Tr(e,t){return Sn(e,"POST","/v1/accounts:signInWithPassword",xn(e,t))}class Ir extends Er{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ir(e,t,"password")}static _fromEmailAndCode(e,t){return new Ir(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return wr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Tr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithEmailLink",xn(e,t))}(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return wr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_r,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithEmailLink",xn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Lr(e,t){return Sn(e,"POST","/v1/accounts:signInWithIdp",xn(e,t))}class Pr extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):en("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,Kt);if(!n||!r)return null;const s=new Pr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Lr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Lr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=he(t)}return e}}async function Rr(e,t){return wn(e,"POST","/v1/accounts:sendVerificationCode",xn(e,t))}const Ar={USER_NOT_FOUND:"user-not-found"};class jr extends Er{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new jr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new jr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,t));if(n.temporaryProof)throw _n(e,"account-exists-with-different-credential",n);return n}(e,(0,s.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",xn(e,(0,s.A)((0,s.A)({},t),{},{operation:"REAUTH"})),Ar)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new jr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qr{constructor(e){var t,n,r,i,s,a;const o=pe(me(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(n=o.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);on(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=pe(me(e)).link,n=t?pe(me(t)).deep_link_id:null,r=pe(me(e)).deep_link_id;return(r?pe(me(r)).link:null)||r||n||t||e}(e);try{return new qr(t)}catch(n){return null}}}class Dr{constructor(){this.providerId=Dr.PROVIDER_ID}static credential(e,t){return Ir._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qr.parseLink(t);return on(n,"argument-error"),Ir._fromEmailAndCode(e,n.code,n.tenantId)}}Dr.PROVIDER_ID="password",Dr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Dr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mr extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fr extends Mr{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return on("providerId"in t&&"signInMethod"in t,"argument-error"),Pr._fromParams(t)}credential(e){return this._credential((0,s.A)((0,s.A)({},e),{},{nonce:e.rawNonce}))}_credential(e){return on(e.idToken||e.accessToken,"argument-error"),Pr._fromParams((0,s.A)((0,s.A)({},e),{},{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new Fr(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class Ur extends Mr{constructor(){super("facebook.com")}static credential(e){return Pr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch(n){return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ur.PROVIDER_ID="facebook.com";class Vr extends Mr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Vr.credential(n,r)}catch(i){return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com",Vr.PROVIDER_ID="google.com";class zr extends Mr{constructor(){super("github.com")}static credential(e){return Pr._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch(n){return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com",zr.PROVIDER_ID="github.com";class Br extends Mr{constructor(){super("twitter.com")}static credential(e,t){return Pr._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Br.credential(n,r)}catch(i){return null}}}async function Hr(e,t){return Sn(e,"POST","/v1/accounts:signUp",xn(e,t))}Br.TWITTER_SIGN_IN_METHOD="twitter.com",Br.PROVIDER_ID="twitter.com";class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Bn._fromIdTokenResponse(e,n,r),s=Gr(n);return new Qr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Gr(n);return new Qr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Gr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Wr extends oe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Wr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Wr(e,t,n,r)}}function Kr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wr._fromErrorAndOperation(e,n,t,r);throw n})}async function Jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Dn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qr._forOperation(e,"link",r)}async function Xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(It(r.app))return Promise.reject(rn(r));const i="reauthenticate";try{const s=await Dn(e,Kr(r,i,t,e),n);on(s.idToken,r,"internal-error");const a=jn(s.idToken);on(a,r,"internal-error");const{sub:o}=a;return on(e.uid===o,r,"user-mismatch"),Qr._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&en(r,"user-mismatch"),s}}async function Yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(It(e.app))return Promise.reject(rn(e));const r="signIn",i=await Kr(e,r,t),s=await Qr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function $r(e,t){return Yr(dr(e),t)}async function Zr(e){const t=dr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ei(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ve(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Dn(i,async function(e,t){return wn(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function ti(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Dn(e,async function(e,t){return wn(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function ni(e,t){return wn(e,"POST","/v2/accounts/mfaEnrollment:start",xn(e,t))}new WeakMap;const ri="__sak";class ii{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ri,"1"),this.storage.removeItem(ri),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class si extends ii{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ar(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);sr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}si.type="LOCAL";const ai=si;function oi(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function li(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ui{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=li(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return oi(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=li(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=li(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=oi(n);const i=setInterval(()=>{const e=oi(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ui.type="COOKIE";class ci extends ii{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ci.type="SESSION";const di=ci;class hi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new hi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hi.receivers=[];class mi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=pi("",20);r.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function fi(){return window}function gi(){return"undefined"!==typeof fi().WorkerGlobalScope&&"function"===typeof fi().importScripts}const vi="firebaseLocalStorageDb",yi="firebaseLocalStorage",bi="fbase_key";class xi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wi(e,t){return e.transaction([yi],t?"readwrite":"readonly").objectStore(yi)}function ki(){const e=indexedDB.open(vi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(yi,{keyPath:bi})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(yi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vi);return new xi(e).toPromise()}(),t(await ki()))})})}async function Si(e,t,n){const r=wi(e,!0).put({[bi]:t,value:n});return new xi(r).toPromise()}function Ci(e,t){const n=wi(e,!0).delete(t);return new xi(n).toPromise()}class Ni{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ki()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hi._getInstance(gi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new mi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ki();return await Si(e,ri,"1"),await Ci(e,ri),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Si(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=wi(e,!1).get(t),r=await new xi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ci(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=wi(e,!1).getAll();return new xi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ni.type="LOCAL";const Ei=Ni;function _i(e,t){return wn(e,"POST","/v2/accounts/mfaSignIn:start",xn(e,t))}fr("rcb"),new mn(3e4,6e4);const Ti="recaptcha";async function Ii(e,t,n){if(!e._getRecaptchaConfig())try{await kr(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){on("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=wr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===yr){on((null===n||void 0===n?void 0:n.type)===Ti,e,"argument-error");return ni(e,await Li(e,t,n))}return ni(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;on("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;on(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=wr(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===yr){on((null===n||void 0===n?void 0:n.type)===Ti,e,"argument-error");return _i(e,await Li(e,t,n))}return _i(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=wr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===yr){on((null===n||void 0===n?void 0:n.type)===Ti,e,"argument-error");return Rr(e,await Li(e,t,n))}return Rr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Li(e,t,n){on(n.type===Ti,e,"argument-error");const r=await n.verify();on("string"===typeof r,e,"argument-error");const i=(0,s.A)({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Pi{constructor(e){this.providerId=Pi.PROVIDER_ID,this.auth=dr(e)}verifyPhoneNumber(e,t){return Ii(this.auth,e,ve(t))}static credential(e,t){return jr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pi.credentialFromTaggedObject(t)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?jr._fromTokenResponse(n,r):null}}function Ri(e,t){return t?Qn(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pi.PROVIDER_ID="phone",Pi.PHONE_SIGN_IN_METHOD="phone";class Ai extends Er{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ji(e){return Yr(e.auth,new Ai(e),e.bypassAuthState)}function qi(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),Xr(n,new Ai(e),e.bypassAuthState)}async function Di(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),Jr(n,new Ai(e),e.bypassAuthState)}class Oi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ji;case"linkViaPopup":case"linkViaRedirect":return Di;case"reauthViaPopup":case"reauthViaRedirect":return qi;default:en(this.auth,"internal-error")}}resolve(e){un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mi=new mn(2e3,1e4);class Fi extends Oi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return on(e,this.auth,"internal-error"),e}async onExecution(){un(1===this.filter.length,"Popup operations only handle one event");const e=pi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Mi.get())};e()}}Fi.currentPopupAction=null;const Ui=new Map;class Vi extends Oi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ui.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Hi(t),r=Bi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ui.set(this.auth._key(),e)}return this.bypassAuthState||Ui.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zi(e,t){Ui.set(e._key(),t)}function Bi(e){return Qn(e._redirectPersistence)}function Hi(e){return Kn("pendingRedirect",e.config.apiKey,e.name)}async function Qi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(It(e.app))return Promise.reject(rn(e));const r=dr(e),i=Ri(r,t),s=new Vi(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Gi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ki(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ki(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wi(e))}saveEventToCache(e){this.cachedEventUids.add(Wi(e)),this.lastProcessedEventTime=Date.now()}}function Wi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ki(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ji=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xi=/^https?/;async function Yi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return wn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if($i(r))return}catch(n){}en(e,"unauthorized-domain")}function $i(e){const t=cn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Xi.test(n))return!1;if(Ji.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Zi=new mn(3e4,6e4);function es(){const e=fi().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ts(e){return new Promise((t,n)=>{var r,i;function s(){es(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{es(),n(tn(e,"network-request-failed"))},timeout:Zi.get()})}if(null!==(r=fi().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=fi().gapi)||void 0===i||!i.load){const t=fr("iframefcb");return fi()[t]=()=>{gapi.load?s():n(tn(e,"network-request-failed"))},mr("".concat(pr.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw ns=null,e})}let ns=null;const rs=new mn(5e3,15e3),is={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ss=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function as(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Rt},i=ss.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(he(r).slice(1))}async function os(e){const t=await function(e){return ns=ns||ts(e),ns}(e),n=fi().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:as(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:is,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=tn(e,"network-request-failed"),s=fi().setTimeout(()=>{r(i)},rs.get());function a(){fi().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const ls={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class us{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function cs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=(0,s.A)((0,s.A)({},ls),{},{width:r.toString(),height:i.toString(),top:a,left:o}),c=re().toLowerCase();n&&(l=Zn(c)?"_blank":n),Yn(c)&&(t=t||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ir(arguments.length>0&&void 0!==arguments[0]?arguments[0]:re())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new us(null);const h=window.open(t||"",l,d);on(h,e,"popup-blocked");try{h.focus()}catch(p){}return new us(h)}const ds="__/auth/handler",hs="emulator/auth/handler",ps=encodeURIComponent("fac");async function ms(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rt,eventId:i};if(t instanceof Or){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Mr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?"#".concat(ps,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ds);return fn(t,hs)}(e),"?").concat(he(o).slice(1)).concat(u)}const fs="webStorageSupport";const gs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=di,this._completeRedirectFn=Qi,this._overrideRedirectResult=zi}async _openPopup(e,t,n,r){var i;un(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return cs(e,await ms(e,t,n,cn(),r),pi())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){fi().location.href=e}(await ms(e,t,n,cn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(un(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await os(e),n=new Gi(e);return t.register("authEvent",t=>{on(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fs,{type:fs},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[fs];void 0!==i&&t(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Yi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ar()||$n()||ir()}};var vs="@firebase/auth",ys="1.12.0";class bs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xs=X("authIdTokenMaxAge")||300;let ws=null;var ks;pr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=tn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ks="Browser",_t(new ye("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;on(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ks,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:or(ks)},u=new cr(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),_t(new ye("auth-internal",e=>(e=>new bs(e))(dr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),qt(vs,ys,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ks)),qt(vs,ys,"esm2020");qt("firebase","12.7.0","app");var Ss,Cs,Ns="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Es={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new f(o,o);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);u.l(e)<=0&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new f(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),u=(s=a(n)).j(t);d(u)||u.l(e)>0;)u=(s=a(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=p(e,u)}return new f(i,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=p(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(u)<0&&e.l(u)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,m(n,2*i+2*t),n[2*i+2*t+1]+=r*o,m(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,m(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,m(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Cs=Es.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},Ss=Es.Integer=r}).apply("undefined"!==typeof Ns?Ns:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var _s,Ts,Is,Ls,Ps,Rs,As,js,qs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ds={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof qs&&qs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){s.setTimeout(()=>{throw e},0)}function f(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(k)}};function k(){for(var e;e=f();){try{e.h.call(e.g)}catch(n){m(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},C.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function E(e){return/^[\s\xa0]*$/.test(e)}function _(e,t){C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(_,C),_.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&_.Z.h.call(this)},_.prototype.h=function(){_.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var T="closure_listenable_"+(1e6*Math.random()|0),I=0;function L(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function D(e){this.src=e,this.g={},this.h=0}function O(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function M(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}D.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=M(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new L(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,i){if(r&&r.once)return B(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)V(e,t[s],n,r,i);return null}return n=X(n),e&&e[T]?e.J(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=K(e);if(l||(e[F]=l=new D(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=W;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)N||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function B(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)B(e,t[s],n,r,i);return null}return n=X(n),e&&e[T]?e.K(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[T]?(e=e.i,(s=String(t).toString())in e.g&&((n=M(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=K(e))&&(t=e.g[t.toString()],e=-1,t&&(e=M(t,n,r,i)),(n=e>-1?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[T])O(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=K(t))?(O(n,e),0==n.h&&(n.src=null,t[F]=null)):P(e)}}}function G(e){return e in U?U[e]:U[e]="on"+e}function W(e,t){if(e.da)e=!0;else{t=new _(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function K(e){return(e=e[F])instanceof D?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function Y(){S.call(this),this.i=new D(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;q(t=new C(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&O(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}c(Y,S),Y.prototype[T]=!0,Y.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},Y.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Y.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}c(ne,S);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ue(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){C.call(this,"d")}function he(){C.call(this,"c")}c(de,C),c(he,C);var pe={},me=null;function fe(){return me=me||new Y}function ge(e){C.call(this,pe.Ia,e)}function ve(e){const t=fe();$(t,new ge(t))}function ye(e,t){C.call(this,pe.STAT_EVENT,e),this.stat=t}function be(e){const t=fe();$(t,new ye(t,e))}function xe(e,t){C.call(this,pe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}pe.Ia="serverreachability",c(ge,C),pe.STAT_EVENT="statevent",c(ye,C),pe.Ja="timingevent",c(xe,C),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ce,Ne={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ee={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function _e(){}function Te(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}c(_e,le),_e.prototype.g=function(){return new XMLHttpRequest},Ce=new _e;var Re={},Ae={};function je(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,qe(e,null)}function qe(e,t){e.F=Date.now(),Me(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=V(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?A(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function De(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Oe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ae:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Ae:(t=t.slice(r,r+n),e.C=r+n,t))}function Me(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ue(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Be(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ke(n.h,e)))if(!e.L&&Ke(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Bt(n)}Xt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));We(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!E(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const c=l[0];if(!(c<=n.K))if(n.K=c,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const c=l[5];null!=c&&"number"===typeof c&&c>0&&(r=1.5*c,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,u=r.O;u&&(o.H=u),o.D&&(Ue(o),Me(o)),r.g=a}else Jt(r);n.i.length>0&&Qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(c){}}Le.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Mt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const l=Mt(this.g),u=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==u||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!De(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Mt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),ze(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Oe(this,n),t==Ae){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),Be(this,t)}if(De(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yt(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else Se(this.i,this.l,n,null),Be(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Me(this)))}else(function(e){const t={};e=(e.g&&Mt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Ve(this)}}}catch(ga){}},Le.prototype.cancel=function(){this.K=!0,ze(this)},Le.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),ze(this),this.m=2,Ve(this)):Fe(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function We(e){return e.h?1:e.g?e.g.size:0}function Ke(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ye(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Qe.prototype.cancel=function(){if(this.i=Ye(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new mt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof mt?(e.i=t,function(e,t){t&&!e.j&&(ft(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new mt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ut,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ut,!0),"@"),e.push(Te(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,pt)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ut=/[#\/\?@]/g,ct=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,pt=/#/g;function mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ft(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){ft(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return ft(e),t=wt(e,t),e.g.has(t)}function yt(e,t){ft(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function xt(e){const t=new mt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new oe}function Ct(e){this.i=e.Sb||null,this.h=e.ab||!1}function Nt(e,t){Y.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Et(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function _t(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Tt(e)}function Tt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Te(n):it(e,t,n))}function Pt(e){Y.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=mt.prototype).add=function(e,t){ft(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){ft(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return ft(this),this.i=null,vt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Te(n);n=yt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Te(n[t])),e.push(r)}}return this.i=e.join("&")},c(Ct,le),Ct.prototype.g=function(){return new Nt(this.i,this.h)},c(Nt,Y),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Tt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,_t(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tt(this)),this.g&&(this.readyState=3,Tt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Et(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_t(this):Tt(this),3==this.readyState&&Et(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,_t(this))},e.Na=function(e){this.g&&(this.response=e,_t(this))},e.ga=function(){this.g&&_t(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(Pt,Y);var Rt=/^https?$/i,At=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,qt(e),Ot(e)}function qt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Dt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Mt(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Mt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Mt(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",qt(e)}}finally{Ot(e)}}}function Ot(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Mt(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Wt(e,n),(t=new Le(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Me(t)}rn(e)}function Bt(e){e.g&&(Yt(e),e.g.cancel(),e.g=null)}function Ht(e){Bt(e),e.v&&(s.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Qt(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||w(),b||(y(),b=!0),x.add(t,e),e.D=0}}function Gt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Wt(e,r),e.u&&e.o&&Lt(r,e.u,e.o),n=new Le(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Kt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Je(e.h,n),je(n,r,t)}function Wt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Kt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var s=i[u].g;const n=i[u].map;if((s-=t)<0)t=Math.max(0,i[u].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Ms){throw e.push(s+"type="+encodeURIComponent("_badmap")),Ms}}catch(Ms){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Jt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||w(),b||(y(),b=!0),x.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Yt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Wt(e,t),e.u&&e.o&&Lt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,qe(n,e)}function Zt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Yt(e),e.g=null;var r=2}else{if(!Ke(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=fe(),new xe(r,n)),Qt(e)}else Jt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(We(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Ye(e.h);0==t.length&&0==e.i.length||(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Wt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new Ct({ab:n})):new Pt(e.ma)).Fa(e.L),t}function on(){}function ln(){}function un(e,t){Y.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!E(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function cn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ce.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(At,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Ot(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ot(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Dt(this):this.Xa())},e.Xa=function(){Dt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Mt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Le(this,this.j,e);let s=this.o;if(this.U&&(s?(s=A(s),q(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Wt(this,n),s&&(this.R?t="headers="+Te(It(s))+"&"+t:this.u&&Lt(n,this.u,s)),Je(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,je(i,n,null)):je(i,n,t),this.I=2}}else 3==this.I&&(e?Gt(this,e):0==this.i.length||Ge(this.h)||Gt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Bt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Bt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new un(e,t)},c(un,Y),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){zt(this.g)},un.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Qt(t)},un.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,un.Z.N.call(this)},c(cn,de),c(dn,he),c(hn,on),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new cn(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,js=Ds.createWebChannelTransport=function(){return new ln},As=Ds.getStatEventTarget=function(){return fe()},Rs=Ds.Event=pe,Ps=Ds.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,Ls=Ds.ErrorCode=Ne,Ee.COMPLETE="complete",Is=Ds.EventType=Ee,ue.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Y.prototype.listen=Y.prototype.J,Ts=Ds.WebChannel=ue,Ds.FetchXmlHttpFactory=Ct,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,_s=Ds.XhrIo=Pt}).apply("undefined"!==typeof qs?qs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Os="@firebase/firestore",Ms="4.9.3";class Fs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fs.UNAUTHENTICATED=new Fs(null),Fs.GOOGLE_CREDENTIALS=new Fs("google-credentials-uid"),Fs.FIRST_PARTY=new Fs("first-party-uid"),Fs.MOCK_USER=new Fs("mock-user");let Us="12.7.0";const Vs=new Te("@firebase/firestore");function zs(){return Vs.logLevel}function Bs(e){if(Vs.logLevel<=Se.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gs);Vs.debug("Firestore (".concat(Us,"): ").concat(e),...i)}}function Hs(e){if(Vs.logLevel<=Se.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gs);Vs.error("Firestore (".concat(Us,"): ").concat(e),...i)}}function Qs(e){if(Vs.logLevel<=Se.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gs);Vs.warn("Firestore (".concat(Us,"): ").concat(e),...i)}}function Gs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ws(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ks(e,r,n)}function Ks(e,t,n){let r="FIRESTORE (".concat(Us,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Hs(r),new Error(r)}function Js(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ks(t,i,r)}function Xs(e,t){return e}const Ys={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $s extends oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ea{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fs.UNAUTHENTICATED))}shutdown(){}}class na{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ra{constructor(e){this.t=e,this.currentUser=Fs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Js(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zs,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Bs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Bs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zs)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Js("string"==typeof t.accessToken,31837,{l:t}),new ea(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Js(null===e||"string"==typeof e,2055,{h:e}),new Fs(e)}}class ia{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Fs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ia(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Fs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oa{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,It(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Js(void 0===this.o,3512);const n=e=>{null!=e.error&&Bs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Bs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Bs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Bs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aa(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Js("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new aa(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function la(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ua{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=la(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ca(e,t){return e<t?-1:e>t?1:0}function da(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return ma(n)===ma(i)?ca(n,i):ma(n)?1:-1}return ca(e.length,t.length)}const ha=55296,pa=57343;function ma(e){const t=e.charCodeAt(0);return t>=ha&&t<=pa}function fa(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ga="__name__";class va{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ws(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ws(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===va.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=va.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ca(e.length,t.length)}static compareSegments(e,t){const n=va.isNumericId(e),r=va.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?va.extractNumericId(e).compare(va.extractNumericId(t)):da(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ya extends va{construct(e,t,n){return new ya(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new $s(Ys.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ya(e)}static emptyPath(){return new ya([])}}const ba=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xa extends va{construct(e,t,n){return new xa(e,t,n)}static isValidIdentifier(e){return ba.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ga}static keyField(){return new xa([ga])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new $s(Ys.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new $s(Ys.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new $s(Ys.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new $s(Ys.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xa(t)}static emptyPath(){return new xa([])}}class wa{constructor(e){this.path=e}static fromPath(e){return new wa(ya.fromString(e))}static fromName(e){return new wa(ya.fromString(e).popFirst(5))}static empty(){return new wa(ya.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ya.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ya.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wa(new ya(e.slice()))}}function ka(e,t,n){if(!n)throw new $s(Ys.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sa(e){if(!wa.isDocumentKey(e))throw new $s(Ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ca(e){if(wa.isDocumentKey(e))throw new $s(Ys.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Na(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ea(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ws(12329,{type:typeof e})}function _a(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $s(Ys.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ea(e);throw new $s(Ys.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ta(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ia(e,t){if(!Na(e))throw new $s(Ys.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new $s(Ys.INVALID_ARGUMENT,n);return!0}const La=-62135596800,Pa=1e6;class Ra{static now(){return Ra.fromMillis(Date.now())}static fromDate(e){return Ra.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Pa);return new Ra(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $s(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $s(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<La)throw new $s(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $s(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pa}_compareTo(e){return this.seconds===e.seconds?ca(this.nanoseconds,e.nanoseconds):ca(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ra._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ia(e,Ra._jsonSchema))return new Ra(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-La;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ra._jsonSchemaVersion="firestore/timestamp/1.0",Ra._jsonSchema={type:Ta("string",Ra._jsonSchemaVersion),seconds:Ta("number"),nanoseconds:Ta("number")};class Aa{static fromTimestamp(e){return new Aa(e)}static min(){return new Aa(new Ra(0,0))}static max(){return new Aa(new Ra(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ja=-1;class qa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qa.UNKNOWN_ID=-1;function Da(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Aa.fromTimestamp(1e9===r?new Ra(n+1,0):new Ra(n,r));return new Ma(i,wa.empty(),t)}function Oa(e){return new Ma(e.readTime,e.key,ja)}class Ma{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ma(Aa.min(),wa.empty(),ja)}static max(){return new Ma(Aa.max(),wa.empty(),ja)}}function Fa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wa.comparator(e.documentKey,t.documentKey),0!==n?n:ca(e.largestBatchId,t.largestBatchId))}const Ua="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Va{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function za(e){if(e.code!==Ys.FAILED_PRECONDITION||e.message!==Ua)throw e;Bs("LocalStore","Unexpectedly lost primary lease")}class Ba{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ws(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ba((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ba?t:Ba.resolve(t)}catch(e){return Ba.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ba.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ba.reject(t)}static resolve(e){return new Ba((t,n)=>{t(e)})}static reject(e){return new Ba((t,n)=>{n(e)})}static waitFor(e){return new Ba((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ba.resolve(!1);for(const n of e)t=t.next(e=>e?Ba.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ba((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ba((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ha(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qa(e){return"IndexedDbTransactionError"===e.name}class Ga{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ga.ce=-1;const Wa=-1;function Ka(e){return null==e}function Ja(e){return 0===e&&1/e==-1/0}function Xa(e){return"number"==typeof e&&Number.isInteger(e)&&!Ja(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ya="\x01";function $a(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=eo(t)),t=Za(e.get(n),t);return eo(t)}function Za(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ya:n+="\x01\x11";break;default:n+=t}}return n}function eo(e){return e+Ya+"\x01"}const to="remoteDocuments",no="owner",ro="mutationQueues",io="mutations";const so="documentMutations",ao="remoteDocumentsV14",oo="remoteDocumentGlobal",lo="targets",uo="targetDocuments",co="targetGlobal",ho="collectionParents",po="clientMetadata",mo="bundles",fo="namedQueries",go="indexConfiguration",vo="indexState",yo="indexEntries",bo="documentOverlays",xo="globals",wo=[ro,io,so,to,lo,no,co,uo,po,oo,ho,mo,fo],ko=[ro,io,so,ao,lo,no,co,uo,po,oo,ho,mo,fo,bo],So=ko,Co=[...So,go,vo,yo];function No(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _o(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class To{constructor(e,t){this.comparator=e,this.root=t||Lo.EMPTY}insert(e,t){return new To(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lo.BLACK,null,null))}remove(e){return new To(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}}class Io{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Lo.RED,this.left=null!=r?r:Lo.EMPTY,this.right=null!=i?i:Lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Lo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Lo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ws(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ws(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ws(27949);return e+(this.isRed()?0:1)}}Lo.EMPTY=null,Lo.RED=!0,Lo.BLACK=!1,Lo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ws(57766)}get value(){throw Ws(16141)}get color(){throw Ws(16727)}get left(){throw Ws(29726)}get right(){throw Ws(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Lo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Po{constructor(e){this.comparator=e,this.data=new To(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ro(this.data.getIterator())}getIteratorFrom(e){return new Ro(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Po))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Po(this.comparator);return t.data=e,t}}class Ro{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ao{constructor(e){this.fields=e,e.sort(xa.comparator)}static empty(){return new Ao([])}unionWith(e){let t=new Po(xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class jo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new jo("Invalid base64 string: "+e):e}}(e);return new qo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new qo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ca(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qo.EMPTY_BYTE_STRING=new qo("");const Do=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(e){if(Js(!!e,39018),"string"==typeof e){let t=0;const n=Do.exec(e);if(Js(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mo(e.seconds),nanos:Mo(e.nanos)}}function Mo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fo(e){return"string"==typeof e?qo.fromBase64String(e):qo.fromUint8Array(e)}const Uo="server_timestamp",Vo="__type__",zo="__previous_value__",Bo="__local_write_time__";function Ho(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Vo])||void 0===t?void 0:t.stringValue)===Uo}function Qo(e){const t=e.mapValue.fields[zo];return Ho(t)?Qo(t):t}function Go(e){const t=Oo(e.mapValue.fields[Bo].timestampValue);return new Ra(t.seconds,t.nanos)}class Wo{constructor(e,t,n,r,i,s,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}const Ko="(default)";class Jo{constructor(e,t){this.projectId=e,this.database=t||Ko}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===Ko}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}const Xo="__type__",Yo="__max__",$o={mapValue:{fields:{__type__:{stringValue:Yo}}}},Zo="__vector__",el="value";function tl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ho(e)?4:vl(e)?9007199254740991:fl(e)?10:11:Ws(28295,{value:e})}function nl(e,t){if(e===t)return!0;const n=tl(e);if(n!==tl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Go(e).isEqual(Go(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Oo(e.timestampValue),r=Oo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fo(e.bytesValue).isEqual(Fo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mo(e.geoPointValue.latitude)===Mo(t.geoPointValue.latitude)&&Mo(e.geoPointValue.longitude)===Mo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mo(e.integerValue)===Mo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Mo(e.doubleValue),r=Mo(t.doubleValue);return n===r?Ja(n)===Ja(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fa(e.arrayValue.values||[],t.arrayValue.values||[],nl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(No(n)!==No(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nl(n[i],r[i])))return!1;return!0}(e,t);default:return Ws(52216,{left:e})}}function rl(e,t){return void 0!==(e.values||[]).find(e=>nl(e,t))}function il(e,t){if(e===t)return 0;const n=tl(e),r=tl(t);if(n!==r)return ca(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ca(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Mo(e.integerValue||e.doubleValue),r=Mo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return sl(e.timestampValue,t.timestampValue);case 4:return sl(Go(e),Go(t));case 5:return da(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Fo(e),r=Fo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ca(n[i],r[i]);if(0!==e)return e}return ca(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ca(Mo(e.latitude),Mo(t.latitude));return 0!==n?n:ca(Mo(e.longitude),Mo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return al(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[el])||void 0===n?void 0:n.arrayValue,u=null===(r=o[el])||void 0===r?void 0:r.arrayValue,c=ca((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===u||void 0===u||null===(s=u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:al(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===$o.mapValue&&t===$o.mapValue)return 0;if(e===$o.mapValue)return 1;if(t===$o.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=da(r[a],s[a]);if(0!==e)return e;const t=il(n[r[a]],i[s[a]]);if(0!==t)return t}return ca(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ws(23264,{he:n})}}function sl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ca(e,t);const n=Oo(e),r=Oo(t),i=ca(n.seconds,r.seconds);return 0!==i?i:ca(n.nanos,r.nanos)}function al(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=il(n[i],r[i]);if(e)return e}return ca(n.length,r.length)}function ol(e){return ll(e)}function ll(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Oo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Fo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ll(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ll(e.fields[i]));return n+"}"}(e.mapValue):Ws(61005,{value:e})}function ul(e){switch(tl(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qo(e);return t?16+ul(t):16;case 5:return 2*e.stringValue.length;case 6:return Fo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ul(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Eo(e.fields,(e,n)=>{t+=e.length+ul(n)}),t}(e.mapValue);default:throw Ws(13486,{value:e})}}function cl(e){return!!e&&"integerValue"in e}function dl(e){return!!e&&"arrayValue"in e}function hl(e){return!!e&&"nullValue"in e}function pl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ml(e){return!!e&&"mapValue"in e}function fl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Xo])||void 0===t?void 0:t.stringValue)===Zo}function gl(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Eo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=gl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gl(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function vl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Yo}class yl{constructor(e){this.value=e}static empty(){return new yl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ml(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(t)}setAll(e){let t=xa.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gl(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ml(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ml(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Eo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new yl(gl(this.value))}}function bl(e){const t=[];return Eo(e.fields,(e,n)=>{const r=new xa([e]);if(ml(n)){const e=bl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ao(t)}class xl{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new xl(e,0,Aa.min(),Aa.min(),Aa.min(),yl.empty(),0)}static newFoundDocument(e,t,n,r){return new xl(e,1,t,Aa.min(),n,r,0)}static newNoDocument(e,t){return new xl(e,2,t,Aa.min(),Aa.min(),yl.empty(),0)}static newUnknownDocument(e,t){return new xl(e,3,t,Aa.min(),Aa.min(),yl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Aa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Aa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wl{constructor(e,t){this.position=e,this.inclusive=t}}function kl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?wa.comparator(wa.fromName(a.referenceValue),n.key):il(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Sl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!nl(e.position[n],t.position[n]))return!1;return!0}class Cl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Nl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class El{}class _l extends El{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ql(e,t,n):"array-contains"===t?new Fl(e,n):"in"===t?new Ul(e,n):"not-in"===t?new Vl(e,n):"array-contains-any"===t?new zl(e,n):new _l(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Dl(e,n):new Ol(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(il(t,this.value)):null!==t&&tl(this.value)===tl(t)&&this.matchesComparison(il(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ws(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tl extends El{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tl(e,t)}matches(e){return Il(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Il(e){return"and"===e.op}function Ll(e){return Pl(e)&&Il(e)}function Pl(e){for(const t of e.filters)if(t instanceof Tl)return!1;return!0}function Rl(e){if(e instanceof _l)return e.field.canonicalString()+e.op.toString()+ol(e.value);if(Ll(e))return e.filters.map(e=>Rl(e)).join(",");{const t=e.filters.map(e=>Rl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Al(e,t){return e instanceof _l?function(e,t){return t instanceof _l&&e.op===t.op&&e.field.isEqual(t.field)&&nl(e.value,t.value)}(e,t):e instanceof Tl?function(e,t){return t instanceof Tl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Al(n,t.filters[r]),!0)}(e,t):void Ws(19439)}function jl(e){return e instanceof _l?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ol(e.value))}(e):e instanceof Tl?function(e){return e.op.toString()+" {"+e.getFilters().map(jl).join(" ,")+"}"}(e):"Filter"}class ql extends _l{constructor(e,t,n){super(e,t,n),this.key=wa.fromName(n.referenceValue)}matches(e){const t=wa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dl extends _l{constructor(e,t){super(e,"in",t),this.keys=Ml("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ol extends _l{constructor(e,t){super(e,"not-in",t),this.keys=Ml("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ml(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>wa.fromName(e.referenceValue))}class Fl extends _l{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dl(t)&&rl(t.arrayValue,this.value)}}class Ul extends _l{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rl(this.value.arrayValue,t)}}class Vl extends _l{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!rl(this.value.arrayValue,t)}}class zl extends _l{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>rl(this.value.arrayValue,e))}}class Bl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Hl(e){return new Bl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ql(e){const t=Xs(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Rl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ka(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ol(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ol(e)).join(",")),t.Te=e}return t.Te}function Gl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Nl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Al(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sl(e.startAt,t.startAt)&&Sl(e.endAt,t.endAt)}function Wl(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Jl(e,t,n,r,i,s,a,o){return new Kl(e,t,n,r,i,s,a,o)}function Xl(e){return new Kl(e)}function Yl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $l(e){return null!==e.collectionGroup}function Zl(e){const t=Xs(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Po(xa.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Cl(r,n))}),e.has(xa.keyField().canonicalString())||t.Ie.push(new Cl(xa.keyField(),n))}return t.Ie}function eu(e){const t=Xs(e);return t.Ee||(t.Ee=tu(t,Zl(e))),t.Ee}function tu(e,t){if("F"===e.limitType)return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Cl(e.field,t)});const n=e.endAt?new wl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wl(e.startAt.position,e.startAt.inclusive):null;return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function nu(e,t,n){return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ru(e,t){return Gl(eu(e),eu(t))&&e.limitType===t.limitType}function iu(e){return"".concat(Ql(eu(e)),"|lt:").concat(e.limitType)}function su(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>jl(e)).join(", "),"]")),Ka(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ol(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ol(e)).join(",")),"Target(".concat(t,")")}(eu(e)),"; limitType=").concat(e.limitType,")")}function au(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=kl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zl(e),t))&&!(e.endAt&&!function(e,t,n){const r=kl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zl(e),t))}(e,t)}function ou(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lu(e){return(t,n)=>{let r=!1;for(const i of Zl(e)){const e=uu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function uu(e,t,n){const r=e.field.isKeyField()?wa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?il(r,i):Ws(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ws(19790,{direction:e.dir})}}class cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return _o(this.inner)}size(){return this.innerSize}}const du=new To(wa.comparator);function hu(){return du}const pu=new To(wa.comparator);function mu(){let e=pu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function fu(e){let t=pu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function gu(){return yu()}function vu(){return yu()}function yu(){return new cu(e=>e.toString(),(e,t)=>e.isEqual(t))}const bu=new To(wa.comparator),xu=new Po(wa.comparator);function wu(){let e=xu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ku=new Po(ca);function Su(){return ku}function Cu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ja(t)?"-0":t}}function Nu(e){return{integerValue:""+e}}function Eu(e,t){return Xa(t)?Nu(t):Cu(e,t)}class _u{constructor(){this._=void 0}}function Tu(e,t,n){return e instanceof Pu?function(e,t){const n={fields:{[Vo]:{stringValue:Uo},[Bo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ho(t)&&(t=Qo(t)),t&&(n.fields[zo]=t),{mapValue:n}}(n,t):e instanceof Ru?Au(e,t):e instanceof ju?qu(e,t):function(e,t){const n=Lu(e,t),r=Ou(n)+Ou(e.Ae);return cl(n)&&cl(e.Ae)?Nu(r):Cu(e.serializer,r)}(e,t)}function Iu(e,t,n){return e instanceof Ru?Au(e,t):e instanceof ju?qu(e,t):n}function Lu(e,t){return e instanceof Du?function(e){return cl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Pu extends _u{}class Ru extends _u{constructor(e){super(),this.elements=e}}function Au(e,t){const n=Mu(t);for(const r of e.elements)n.some(e=>nl(e,r))||n.push(r);return{arrayValue:{values:n}}}class ju extends _u{constructor(e){super(),this.elements=e}}function qu(e,t){let n=Mu(t);for(const r of e.elements)n=n.filter(e=>!nl(e,r));return{arrayValue:{values:n}}}class Du extends _u{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ou(e){return Mo(e.integerValue||e.doubleValue)}function Mu(e){return dl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Fu{constructor(e,t){this.field=e,this.transform=t}}class Uu{constructor(e,t){this.version=e,this.transformResults=t}}class Vu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vu}static exists(e){return new Vu(void 0,e)}static updateTime(e){return new Vu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Bu{}function Hu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ec(e.key,Vu.none()):new Ju(e.key,e.data,Vu.none());{const n=e.data,r=yl.empty();let i=new Po(xa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Xu(e.key,r,new Ao(i.toArray()),Vu.none())}}function Qu(e,t,n){e instanceof Ju?function(e,t,n){const r=e.value.clone(),i=$u(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xu?function(e,t,n){if(!zu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$u(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Yu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gu(e,t,n,r){return e instanceof Ju?function(e,t,n,r){if(!zu(e.precondition,t))return n;const i=e.value.clone(),s=Zu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xu?function(e,t,n,r){if(!zu(e.precondition,t))return n;const i=Zu(e.fieldTransforms,r,t),s=t.data;return s.setAll(Yu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return zu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Wu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Lu(r.transform,e||null);null!=i&&(null===n&&(n=yl.empty()),n.set(r.field,i))}return n||null}function Ku(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fa(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ru&&t instanceof Ru||e instanceof ju&&t instanceof ju?fa(e.elements,t.elements,nl):e instanceof Du&&t instanceof Du?nl(e.Ae,t.Ae):e instanceof Pu&&t instanceof Pu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ju extends Bu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xu extends Bu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yu(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function $u(e,t,n){const r=new Map;Js(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Iu(a,o,n[i]))}return r}function Zu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Tu(e,s,t))}return r}class ec extends Bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tc extends Bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Qu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vu();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Hu(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Aa.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wu())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(e,t)=>Ku(e,t))&&fa(this.baseMutations,e.baseMutations,(e,t)=>Ku(e,t))}}class rc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Js(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=bu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new rc(e,t,n,r)}}class ic{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class sc{constructor(e,t){this.count=e,this.unchangedNames=t}}var ac,oc;function lc(e){switch(e){case Ys.OK:return Ws(64938);case Ys.CANCELLED:case Ys.UNKNOWN:case Ys.DEADLINE_EXCEEDED:case Ys.RESOURCE_EXHAUSTED:case Ys.INTERNAL:case Ys.UNAVAILABLE:case Ys.UNAUTHENTICATED:return!1;case Ys.INVALID_ARGUMENT:case Ys.NOT_FOUND:case Ys.ALREADY_EXISTS:case Ys.PERMISSION_DENIED:case Ys.FAILED_PRECONDITION:case Ys.ABORTED:case Ys.OUT_OF_RANGE:case Ys.UNIMPLEMENTED:case Ys.DATA_LOSS:return!0;default:return Ws(15467,{code:e})}}function uc(e){if(void 0===e)return Hs("GRPC error has no .code"),Ys.UNKNOWN;switch(e){case ac.OK:return Ys.OK;case ac.CANCELLED:return Ys.CANCELLED;case ac.UNKNOWN:return Ys.UNKNOWN;case ac.DEADLINE_EXCEEDED:return Ys.DEADLINE_EXCEEDED;case ac.RESOURCE_EXHAUSTED:return Ys.RESOURCE_EXHAUSTED;case ac.INTERNAL:return Ys.INTERNAL;case ac.UNAVAILABLE:return Ys.UNAVAILABLE;case ac.UNAUTHENTICATED:return Ys.UNAUTHENTICATED;case ac.INVALID_ARGUMENT:return Ys.INVALID_ARGUMENT;case ac.NOT_FOUND:return Ys.NOT_FOUND;case ac.ALREADY_EXISTS:return Ys.ALREADY_EXISTS;case ac.PERMISSION_DENIED:return Ys.PERMISSION_DENIED;case ac.FAILED_PRECONDITION:return Ys.FAILED_PRECONDITION;case ac.ABORTED:return Ys.ABORTED;case ac.OUT_OF_RANGE:return Ys.OUT_OF_RANGE;case ac.UNIMPLEMENTED:return Ys.UNIMPLEMENTED;case ac.DATA_LOSS:return Ys.DATA_LOSS;default:return Ws(39323,{code:e})}}(oc=ac||(ac={}))[oc.OK=0]="OK",oc[oc.CANCELLED=1]="CANCELLED",oc[oc.UNKNOWN=2]="UNKNOWN",oc[oc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oc[oc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oc[oc.NOT_FOUND=5]="NOT_FOUND",oc[oc.ALREADY_EXISTS=6]="ALREADY_EXISTS",oc[oc.PERMISSION_DENIED=7]="PERMISSION_DENIED",oc[oc.UNAUTHENTICATED=16]="UNAUTHENTICATED",oc[oc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oc[oc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oc[oc.ABORTED=10]="ABORTED",oc[oc.OUT_OF_RANGE=11]="OUT_OF_RANGE",oc[oc.UNIMPLEMENTED=12]="UNIMPLEMENTED",oc[oc.INTERNAL=13]="INTERNAL",oc[oc.UNAVAILABLE=14]="UNAVAILABLE",oc[oc.DATA_LOSS=15]="DATA_LOSS";let cc=null;function dc(){return new TextEncoder}const hc=new Ss([4294967295,4294967295],0);function pc(e){const t=dc().encode(e),n=new Cs;return n.update(t),new Uint8Array(n.digest())}function mc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ss([n,r],0),new Ss([i,s],0)]}class fc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gc("Invalid padding: ".concat(t));if(n<0)throw new gc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ss.fromNumber(n)));return 1===r.compare(hc)&&(r=new Ss([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=pc(e),[n,r]=mc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new fc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=pc(e),[n,r]=mc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vc(Aa.min(),r,new To(ca),hu(),wu())}}class yc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new yc(n,t,wu(),wu(),wu())}}class bc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class xc{constructor(e,t){this.targetId=e,this.Ce=t}}class wc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class kc{constructor(){this.ve=0,this.Fe=Nc(),this.Me=qo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=wu(),t=wu(),n=wu();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ws(38017,{changeType:i})}}),new yc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Nc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Js(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Sc{constructor(e){this.Ge=e,this.ze=new Map,this.je=hu(),this.Je=Cc(),this.He=Cc(),this.Ye=new To(ca)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ws(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Wl(s))if(0===n){const e=new wa(s.path);this.et(t,e,xl.newNoDocument(e,Aa.min()))}else Js(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=cc)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,l,u;const c={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(c.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(u=d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),c}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Fo(n).toUint8Array()}catch(e){if(e instanceof jo)return Qs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new fc(s,r,i)}catch(e){return Qs(e instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Wl(i.target)){const t=new wa(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,xl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=wu();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new vc(e,t,this.Ye,this.je,n);return this.je=hu(),this.Je=Cc(),this.He=Cc(),this.Ye=new To(ca),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new kc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Po(ca),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Po(ca),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Bs("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cc(){return new To(wa.comparator)}function Nc(){return new To(wa.comparator)}const Ec={asc:"ASCENDING",desc:"DESCENDING"},_c={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tc={and:"AND",or:"OR"};class Ic{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lc(e,t){return e.useProto3Json||Ka(t)?t:{value:t}}function Pc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ac(e,t){return Pc(e,t.toTimestamp())}function jc(e){return Js(!!e,49232),Aa.fromTimestamp(function(e){const t=Oo(e);return new Ra(t.seconds,t.nanos)}(e))}function qc(e,t){return Dc(e,t).canonicalString()}function Dc(e,t){const n=function(e){return new ya(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Oc(e){const t=ya.fromString(e);return Js(rd(t),10190,{key:t.toString()}),t}function Mc(e,t){return qc(e.databaseId,t.path)}function Fc(e,t){const n=Oc(t);if(n.get(1)!==e.databaseId.projectId)throw new $s(Ys.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $s(Ys.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wa(Bc(n))}function Uc(e,t){return qc(e.databaseId,t)}function Vc(e){const t=Oc(e);return 4===t.length?ya.emptyPath():Bc(t)}function zc(e){return new ya(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bc(e){return Js(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Hc(e,t,n){return{name:Mc(e,t),fields:n.value.mapValue.fields}}function Qc(e,t){let n;if(t instanceof Ju)n={update:Hc(e,t.key,t.value)};else if(t instanceof ec)n={delete:Mc(e,t.key)};else if(t instanceof Xu)n={update:Hc(e,t.key,t.data),updateMask:nd(t.fieldMask)};else{if(!(t instanceof tc))return Ws(16599,{Vt:t.type});n={verify:Mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Pu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ru)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ju)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Du)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ws(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ac(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ws(27497)}(e,t.precondition)),n}function Gc(e,t){return{documents:[Uc(e,t.path)]}}function Wc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uc(e,i);const s=function(e){if(0!==e.length)return td(Tl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Zc(e.field),direction:Xc(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Lc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Kc(e){let t=Vc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Js(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Jc(e);return t instanceof Tl&&Ll(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Cl(ed(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ka(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new wl(n,t)}(n.endAt)),Jl(t,i,a,s,o,"F",l,u)}function Jc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ed(e.unaryFilter.field);return _l.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ed(e.unaryFilter.field);return _l.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ed(e.unaryFilter.field);return _l.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ed(e.unaryFilter.field);return _l.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ws(61313);default:return Ws(60726)}}(e):void 0!==e.fieldFilter?function(e){return _l.create(ed(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ws(58110);default:return Ws(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Tl.create(e.compositeFilter.filters.map(e=>Jc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ws(1026)}}(e.compositeFilter.op))}(e):Ws(30097,{filter:e})}function Xc(e){return Ec[e]}function Yc(e){return _c[e]}function $c(e){return Tc[e]}function Zc(e){return{fieldPath:e.canonicalString()}}function ed(e){return xa.fromServerFormat(e.fieldPath)}function td(e){return e instanceof _l?function(e){if("=="===e.op){if(pl(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NAN"}};if(hl(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pl(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NAN"}};if(hl(e.value))return{unaryFilter:{field:Zc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(e.field),op:Yc(e.op),value:e.value}}}(e):e instanceof Tl?function(e){const t=e.getFilters().map(e=>td(e));return 1===t.length?t[0]:{compositeFilter:{op:$c(e.op),filters:t}}}(e):Ws(54877,{filter:e})}function nd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function rd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class id{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Aa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Aa.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qo.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sd{constructor(e){this.yt=e}}function ad(e){const t=Kc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nu(t,t.limit,"L"):t}class od{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mo(e.integerValue));else if("doubleValue"in e){const n=Mo(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ja(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Oo(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Fo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?vl(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):fl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ws(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=el,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Mo(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),wa.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}od.Kt=new od;class ld{constructor(){this.Cn=new ud}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ba.resolve()}getCollectionParents(e,t){return Ba.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ba.resolve()}deleteFieldIndex(e,t){return Ba.resolve()}deleteAllFieldIndexes(e){return Ba.resolve()}createTargetIndexes(e,t){return Ba.resolve()}getDocumentsMatchingTarget(e,t){return Ba.resolve(null)}getIndexType(e,t){return Ba.resolve(0)}getFieldIndexes(e,t){return Ba.resolve([])}getNextCollectionGroupToUpdate(e){return Ba.resolve(null)}getMinOffset(e,t){return Ba.resolve(Ma.min())}getMinOffsetFromCollectionGroup(e,t){return Ba.resolve(Ma.min())}updateCollectionGroup(e,t,n){return Ba.resolve()}updateIndexEntries(e,t){return Ba.resolve()}}class ud{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Po(ya.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Po(ya.comparator)).toArray()}}new Uint8Array(0);const cd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dd=41943040;class hd{static withCacheSize(e){return new hd(e,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}hd.DEFAULT_COLLECTION_PERCENTILE=10,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hd.DEFAULT=new hd(dd,hd.DEFAULT_COLLECTION_PERCENTILE,hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hd.DISABLED=new hd(-1,0,0);class pd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pd(0)}static cr(){return new pd(-1)}}const md="LruGarbageCollector",fd=1048576;function gd(e,t){let[n,r]=e,[i,s]=t;const a=ca(n,i);return 0===a?ca(r,s):a}class vd{constructor(e){this.Ir=e,this.buffer=new Po(gd),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Bs(md,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qa(e)?Bs(md,"Ignoring IndexedDB error during garbage collection: ",e):await za(e)}await this.Vr(3e5)})}}class bd{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ba.resolve(Ga.ce);const n=new vd(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Bs("LruGarbageCollector","Garbage collection skipped; disabled"),Ba.resolve(cd)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Bs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),cd):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Bs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),zs()<=Se.DEBUG&&Bs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Ba.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function xd(e,t){return new bd(e,t)}class wd{constructor(){this.changes=new cu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ba.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Sd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Gu(n.mutation,e,Ao.empty(),Ra.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,wu()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wu();const r=gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=mu();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=gu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,wu()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=hu();const s=yu(),a=yu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Xu)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Gu(a.mutation,t,a.mutation.getFieldMask(),Ra.now())):s.set(t.key,Ao.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new kd(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=yu();let r=new To((e,t)=>e-t),i=wu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Ao.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||wu()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=vu();l.forEach(e=>{if(!i.has(e)){const r=Hu(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Ba.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ba.resolve(gu());let a=ja,o=i;return s.next(t=>Ba.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Ba.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,wu())).next(e=>({batchId:a,changes:fu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wa(t)).next(e=>{let t=mu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=mu();return this.indexManager.getCollectionParents(e,i).next(a=>Ba.forEach(a,a=>{const o=function(e,t){return new Kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,xl.newInvalidDocument(r)))});let n=mu();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Gu(s.mutation,r,Ao.empty(),Ra.now()),au(t,r)&&(n=n.insert(e,r))}),n})}}class Cd{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ba.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jc(e.createTime)}}(t)),Ba.resolve()}getNamedQuery(e,t){return Ba.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:ad(e.bundledQuery),readTime:jc(e.readTime)}}(t)),Ba.resolve()}}class Nd{constructor(){this.overlays=new To(wa.comparator),this.qr=new Map}getOverlay(e,t){return Ba.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gu();return Ba.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ba.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ba.resolve()}getOverlaysForCollection(e,t,n){const r=gu(),i=t.length+1,s=new wa(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ba.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new To((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=gu(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ba.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ic(t,n));let i=this.qr.get(t);void 0===i&&(i=wu(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ed{constructor(){this.sessionToken=qo.EMPTY_BYTE_STRING}getSessionToken(e){return Ba.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ba.resolve()}}class _d{constructor(){this.Qr=new Po(Td.$r),this.Ur=new Po(Td.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Td(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Td(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new wa(new ya([])),n=new Td(t,e),r=new Td(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new wa(new ya([])),n=new Td(t,e),r=new Td(t,e+1);let i=wu();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Td(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Td{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return wa.comparator(e.key,t.key)||ca(e.Yr,t.Yr)}static Kr(e,t){return ca(e.Yr,t.Yr)||wa.comparator(e.key,t.key)}}class Id{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Po(Td.$r)}checkEmpty(e){return Ba.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new nc(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new Td(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ba.resolve(s)}lookupMutationBatch(e,t){return Ba.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ba.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ba.resolve(0===this.mutationQueue.length?Wa:this.tr-1)}getAllMutationBatches(e){return Ba.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Td(t,0),r=new Td(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ba.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Po(ca);return t.forEach(e=>{const t=new Td(e,0),r=new Td(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ba.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wa.isDocumentKey(i)||(i=i.child(""));const s=new Td(new wa(i),0);let a=new Po(ca);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Ba.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Js(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ba.forEach(t.mutations,r=>{const i=new Td(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Td(t,0),r=this.Zr.firstAfterOrEqual(n);return Ba.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ba.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ld{constructor(e){this.ri=e,this.docs=new To(wa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ba.resolve(n?n.document.mutableCopy():xl.newInvalidDocument(t))}getEntries(e,t){let n=hu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():xl.newInvalidDocument(e))}),Ba.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hu();const s=t.path,a=new wa(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Fa(Oa(a),n)<=0||(r.has(a.key)||au(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Ba.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ws(9500)}ii(e,t){return Ba.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Pd(this)}getSize(e){return Ba.resolve(this.size)}}class Pd extends wd{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ba.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Rd{constructor(e){this.persistence=e,this.si=new cu(e=>Ql(e),Gl),this.lastRemoteSnapshotVersion=Aa.min(),this.highestTargetId=0,this.oi=0,this._i=new _d,this.targetCount=0,this.ai=pd.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ba.resolve()}getLastRemoteSnapshotVersion(e){return Ba.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ba.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ba.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ba.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pd(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ba.resolve()}updateTargetData(e,t){return this.Pr(t),Ba.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ba.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ba.waitFor(i).next(()=>r)}getTargetCount(e){return Ba.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ba.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ba.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ba.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ba.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ba.resolve(n)}containsKey(e,t){return Ba.resolve(this._i.containsKey(t))}}class Ad{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ga(0),this.li=!1,this.li=!0,this.hi=new Ed,this.referenceDelegate=e(this),this.Pi=new Rd(this),this.indexManager=new ld,this.remoteDocumentCache=function(e){return new Ld(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new sd(t),this.Ii=new Cd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Id(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Bs("MemoryPersistence","Starting transaction:",e);const r=new jd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ba.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class jd extends Va{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.Ri=new _d,this.Vi=null}static mi(e){return new qd(e)}get fi(){if(this.Vi)return this.Vi;throw Ws(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ba.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ba.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ba.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ba.forEach(this.fi,n=>{const r=wa.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Aa.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ba.or([()=>Ba.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dd{constructor(e,t){this.persistence=e,this.pi=new cu(e=>$a(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=xd(this,t)}static mi(e,t){return new Dd(e,t)}Ei(){}di(e){return Ba.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ba.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ba.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Aa.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ba.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ba.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ba.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ba.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ul(e.data.value)),t}br(e,t,n){return Ba.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ba.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Od{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=wu(),r=wu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Od(e,t.fromCache,n,r)}}class Md{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=se()?8:Ha(re())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Md;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(zs()<=Se.DEBUG&&Bs("QueryEngine","SDK will not create cache indexes for query:",su(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ba.resolve()):(zs()<=Se.DEBUG&&Bs("QueryEngine","Query:",su(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(zs()<=Se.DEBUG&&Bs("QueryEngine","The SDK decides to create cache indexes for query:",su(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,eu(t))):Ba.resolve())}ys(e,t){if(Yl(t))return Ba.resolve(null);let n=eu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=nu(t,null,"F"),n=eu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=wu(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,nu(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Yl(t)||r.isEqual(Aa.min())?Ba.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Ba.resolve(null):(zs()<=Se.DEBUG&&Bs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),su(t)),this.vs(e,s,t,Da(r,ja)).next(e=>e))})}Ds(e,t){let n=new Po(lu(e));return t.forEach((t,r)=>{au(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return zs()<=Se.DEBUG&&Bs("QueryEngine","Using full collection scan to execute query:",su(t)),this.ps.getDocumentsMatchingQuery(e,t,Ma.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ud="LocalStore";class Vd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new To(ca),this.xs=new cu(e=>Ql(e),Gl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sd(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function zd(e,t,n,r){return new Vd(e,t,n,r)}async function Bd(e,t){const n=Xs(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=wu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Hd(e){const t=Xs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Qd(e,t,n){let r=wu(),i=wu();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=hu();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Aa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Bs(Ud,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Gd(e,t){const n=Xs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Wa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Wd(e,t){const n=Xs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ba.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new id(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Kd(e,t,n){const r=Xs(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Qa(e))throw e;Bs(Ud,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Jd(e,t,n){const r=Xs(e);let i=Aa.min(),s=wu();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Xs(e),i=r.xs.get(n);return void 0!==i?Ba.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,eu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Aa.min(),n?s:wu())).next(e=>(Xd(r,ou(t),e),{documents:e,Qs:s})))}function Xd(e,t,n){let r=e.Os.get(t)||Aa.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Yd{constructor(){this.activeTargetIds=Su()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $d{constructor(){this.Mo=new Yd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zd{Oo(e){}shutdown(){}}const eh="ConnectivityMonitor";class th{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Bs(eh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Bs(eh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nh=null;function rh(){return null===nh?nh=268435456+Math.round(2147483648*Math.random()):nh++,"0x"+nh.toString(16)}const ih="RestConnection",sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ah{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Ko?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=rh(),a=this.zo(e,t.toUriEncodedString());Bs(ih,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),u=$(l);return this.Jo(e,a,o,n,u).then(t=>(Bs(ih,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Qs(ih,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Us,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=sh[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class oh{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lh="WebChannelConnection";class uh extends ah{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=rh();return new Promise((i,a)=>{const o=new _s;o.setWithCredentials(!0),o.listenOnce(Is.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Ls.NO_ERROR:const n=o.getResponseJson();Bs(lh,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Ls.TIMEOUT:Bs(lh,"RPC '".concat(e,"' ").concat(s," timed out")),a(new $s(Ys.DEADLINE_EXCEEDED,"Request time out"));break;case Ls.HTTP_ERROR:const r=o.getStatus();if(Bs(lh,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ys).indexOf(t)>=0?t:Ys.UNKNOWN}(n.status);a(new $s(e,n.message))}else a(new $s(Ys.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new $s(Ys.UNAVAILABLE,"Connection failed."));break;default:Ws(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Bs(lh,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Bs(lh,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=rh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=js(),a=As(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");Bs(lh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),o);const c=s.createWebChannel(u,o);this.I_(c);let d=!1,h=!1;const p=new oh({Yo:t=>{h?Bs(lh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Bs(lh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),Bs(lh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zo:()=>c.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(c,Ts.EventType.OPEN,()=>{h||(Bs(lh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(c,Ts.EventType.CLOSE,()=>{h||(h=!0,Bs(lh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(c))}),m(c,Ts.EventType.ERROR,t=>{h||(h=!0,Qs(lh,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new $s(Ys.UNAVAILABLE,"The operation could not be completed")))}),m(c,Ts.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Js(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Bs(lh,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ac[e];if(void 0!==t)return uc(t)}(t),i=a.message;void 0===n&&(n=Ys.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.a_(new $s(n,i)),c.close()}else Bs(lh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(a,Rs.STAT_EVENT,t=>{t.stat===Ps.PROXY?Bs(lh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ps.NOPROXY&&Bs(lh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ch(){return"undefined"!=typeof document?document:null}function dh(e){return new Ic(e,!0)}class hh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Bs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ph="PersistentStream";class mh{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ys.RESOURCE_EXHAUSTED?(Hs(t.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ys.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new $s(Ys.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Bs(ph,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Bs(ph,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fh extends mh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ws(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Js(void 0===t||"string"==typeof t,58123),qo.fromBase64String(t||"")):(Js(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),qo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ys.UNKNOWN:uc(e.code);return new $s(t,e.message||"")}(a);n=new wc(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fc(e,r.document.name),s=jc(r.document.updateTime),a=r.document.createTime?jc(r.document.createTime):Aa.min(),o=new yl({mapValue:{fields:r.document.fields}}),l=xl.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new bc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Fc(e,r.document),s=r.readTime?jc(r.readTime):Aa.min(),a=xl.newNoDocument(i,s),o=r.removedTargetIds||[];n=new bc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Fc(e,r.document),s=r.removedTargetIds||[];n=new bc([],s,i,null)}else{if(!("filter"in t))return Ws(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new sc(r,i),a=e.targetId;n=new xc(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Aa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Aa.min():t.readTime?jc(t.readTime):Aa.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=zc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wl(r)?{documents:Gc(e,r)}:{query:Wc(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rc(e,t.resumeToken);const r=Lc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Aa.min())>0){n.readTime=Pc(e,t.snapshotVersion.toTimestamp());const r=Lc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ws(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=zc(this.serializer),t.removeTarget=e,this.q_(t)}}class gh extends mh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Js(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Js(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Js(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Js(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?jc(e.updateTime):jc(t);return n.isEqual(Aa.min())&&(n=jc(t)),new Uu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=jc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=zc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Qc(this.serializer,e))};this.q_(t)}}class vh{}class yh extends vh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new $s(Ys.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Dc(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ys.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $s(Ys.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Dc(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ys.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $s(Ys.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Hs(t),this.aa=!1):Bs("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const xh="RemoteStore";class wh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Lh(this)&&(Bs(xh,"Restarting streams for network reachability change."),await async function(e){const t=Xs(e);t.Ea.add(4),await Sh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await kh(t)}(this))})}),this.Ra=new bh(n,r)}}async function kh(e){if(Lh(e))for(const t of e.da)await t(!0)}async function Sh(e){for(const t of e.da)await t(!1)}function Ch(e,t){const n=Xs(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ih(n)?Th(n):Jh(n).O_()&&Eh(n,t))}function Nh(e,t){const n=Xs(e),r=Jh(n);n.Ia.delete(t),r.O_()&&_h(n,t),0===n.Ia.size&&(r.O_()?r.L_():Lh(n)&&n.Ra.set("Unknown"))}function Eh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Aa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jh(e).Y_(t)}function _h(e,t){e.Va.Ue(t),Jh(e).Z_(t)}function Th(e){e.Va=new Sc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Jh(e).start(),e.Ra.ua()}function Ih(e){return Lh(e)&&!Jh(e).x_()&&e.Ia.size>0}function Lh(e){return 0===Xs(e).Ea.size}function Ph(e){e.Va=void 0}async function Rh(e){e.Ra.set("Online")}async function Ah(e){e.Ia.forEach((t,n)=>{Eh(e,t)})}async function jh(e,t){Ph(e),Ih(e)?(e.Ra.ha(t),Th(e)):e.Ra.set("Unknown")}async function qh(e,t,n){if(e.Ra.set("Online"),t instanceof wc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Bs(xh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Dh(e,n)}else if(t instanceof bc?e.Va.Ze(t):t instanceof xc?e.Va.st(t):e.Va.tt(t),!n.isEqual(Aa.min()))try{const t=await Hd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(qo.EMPTY_BYTE_STRING,r.snapshotVersion)),_h(e,t);const i=new id(r.target,t,n,r.sequenceNumber);Eh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Bs(xh,"Failed to raise snapshot:",t),await Dh(e,t)}}async function Dh(e,t,n){if(!Qa(t))throw t;e.Ea.add(1),await Sh(e),e.Ra.set("Offline"),n||(n=()=>Hd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Bs(xh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await kh(e)})}function Oh(e,t){return t().catch(n=>Dh(e,n,t))}async function Mh(e){const t=Xs(e),n=Xh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Wa;for(;Fh(t);)try{const e=await Gd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Uh(t,e)}catch(e){await Dh(t,e)}Vh(t)&&zh(t)}function Fh(e){return Lh(e)&&e.Ta.length<10}function Uh(e,t){e.Ta.push(t);const n=Xh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Vh(e){return Lh(e)&&!Xh(e).x_()&&e.Ta.length>0}function zh(e){Xh(e).start()}async function Bh(e){Xh(e).ra()}async function Hh(e){const t=Xh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Qh(e,t,n){const r=e.Ta.shift(),i=rc.from(r,t,n);await Oh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Mh(e)}async function Gh(e,t){t&&Xh(e).X_&&await async function(e,t){if(function(e){return lc(e)&&e!==Ys.ABORTED}(t.code)){const n=e.Ta.shift();Xh(e).B_(),await Oh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Mh(e)}}(e,t),Vh(e)&&zh(e)}async function Wh(e,t){const n=Xs(e);n.asyncQueue.verifyOperationInProgress(),Bs(xh,"RemoteStore received new credentials");const r=Lh(n);n.Ea.add(3),await Sh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await kh(n)}async function Kh(e,t){const n=Xs(e);t?(n.Ea.delete(2),await kh(n)):t||(n.Ea.add(2),await Sh(n),n.Ra.set("Unknown"))}function Jh(e){return e.ma||(e.ma=function(e,t,n){const r=Xs(e);return r.sa(),new fh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Rh.bind(null,e),t_:Ah.bind(null,e),r_:jh.bind(null,e),H_:qh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Ih(e)?Th(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ph(e))})),e.ma}function Xh(e){return e.fa||(e.fa=function(e,t,n){const r=Xs(e);return r.sa(),new gh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Bh.bind(null,e),r_:Gh.bind(null,e),ta:Hh.bind(null,e),na:Qh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Mh(e)):(await e.fa.stop(),e.Ta.length>0&&(Bs(xh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Yh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Yh(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $s(Ys.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $h(e,t){if(Hs("AsyncQueue","".concat(t,": ").concat(e)),Qa(e))return new $s(Ys.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Zh{static emptySet(e){return new Zh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||wa.comparator(t.key,n.key):(e,t)=>wa.comparator(e.key,t.key),this.keyedMap=mu(),this.sortedSet=new To(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ep{constructor(){this.ga=new To(wa.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ws(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class tp{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new tp(e,t,Zh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class np{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rp{constructor(){this.queries=ip(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Xs(e),r=n.queries;n.queries=ip(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new $s(Ys.ABORTED,"Firestore shutting down"))}}function ip(){return new cu(e=>iu(e),ru)}async function sp(e,t){const n=Xs(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new np,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=$h(e,"Initialization of query '".concat(su(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&up(n)}async function ap(e,t){const n=Xs(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function op(e,t){const n=Xs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&up(n)}function lp(e,t,n){const r=Xs(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function up(e){e.Ca.forEach(e=>{e.next()})}var cp,dp;(dp=cp||(cp={})).Ma="default",dp.Cache="cache";class hp{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=tp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cp.Cache}}class pp{constructor(e){this.key=e}}class mp{constructor(e){this.key=e}}class fp{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=wu(),this.mutatedKeys=wu(),this.eu=lu(e),this.tu=new Zh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new ep,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=au(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.su(u,c)||(n.track({type:2,doc:c}),p=!0,(o&&this.eu(c,o)>0||l&&this.eu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(o||l)&&(a=!0)),p&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ws(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new tp(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ep,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=wu(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new mp(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new pp(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=wu();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const gp="SyncEngine";class vp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yp{constructor(e){this.key=e,this.hu=!1}}class bp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new cu(e=>iu(e),ru),this.Iu=new Map,this.Eu=new Set,this.du=new To(wa.comparator),this.Au=new Map,this.Ru=new _d,this.Vu={},this.mu=new Map,this.fu=pd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function xp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Vp(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await kp(r,t,n,!0),i}async function wp(e,t){const n=Vp(e);await kp(n,t,!0,!1)}async function kp(e,t,n,r){const i=await Wd(e.localStore,eu(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Sp(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Ch(e.remoteStore,i),o}async function Sp(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Jd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return qp(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await Jd(e.localStore,t,!0),a=new fp(t,s.Qs),o=a.ru(s.documents),l=yc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);qp(e,n,u.au);const c=new vp(t,n,a);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function Cp(e,t,n){const r=Xs(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!ru(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nh(r.remoteStore,i.targetId),Ap(r,i.targetId)}).catch(za)):(Ap(r,i.targetId),await Kd(r.localStore,i.targetId,!0))}async function Np(e,t){const n=Xs(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nh(n.remoteStore,r.targetId))}async function Ep(e,t){const n=Xs(e);try{const e=await function(e,t){const n=Xs(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(qo.EMPTY_BYTE_STRING,Aa.min()).withLastLimboFreeSnapshotVersion(Aa.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,s)&&a.push(n.Pi.updateTargetData(e,u))});let o=hu(),l=wu();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Qd(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Aa.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ba.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Js(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Js(r.hu,14607):e.removedDocuments.size>0&&(Js(r.hu,42227),r.hu=!1))}),await Mp(n,e,t)}catch(e){await za(e)}}function _p(e,t,n){const r=Xs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Xs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&up(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tp(e,t,n){const r=Xs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new To(wa.comparator);e=e.insert(s,xl.newNoDocument(s,Aa.min()));const n=wu().add(s),i=new vc(Aa.min(),new Map,new To(ca),e,n);await Ep(r,i),r.du=r.du.remove(s),r.Au.delete(t),Op(r)}else await Kd(r.localStore,t,!1).then(()=>Ap(r,t,n)).catch(za)}async function Ip(e,t){const n=Xs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Xs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Ba.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Js(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=wu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Rp(n,r,null),Pp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mp(n,e)}catch(e){await za(e)}}async function Lp(e,t,n){const r=Xs(e);try{const e=await function(e,t){const n=Xs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Js(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Rp(r,t,n),Pp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Mp(r,e)}catch(n){await za(n)}}function Pp(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Rp(e,t,n){const r=Xs(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Ap(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||jp(e,t)})}function jp(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Nh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Op(e))}function qp(e,t,n){for(const r of n)r instanceof pp?(e.Ru.addReference(r.key,t),Dp(e,r)):r instanceof mp?(Bs(gp,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||jp(e,r.key)):Ws(19791,{wu:r})}function Dp(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Bs(gp,"New document in limbo: "+n),e.Eu.add(r),Op(e))}function Op(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new wa(ya.fromString(t)),r=e.fu.next();e.Au.set(r,new yp(n)),e.du=e.du.insert(n,r),Ch(e.remoteStore,new id(eu(Xl(n.path)),r,"TargetPurposeLimboResolution",Ga.ce))}}async function Mp(e,t,n){const r=Xs(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Od.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Xs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ba.forEach(t,t=>Ba.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ba.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Qa(e))throw e;Bs(Ud,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Fp(e,t){const n=Xs(e);if(!n.currentUser.isEqual(t)){Bs(gp,"User change. New user:",t.toKey());const e=await Bd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new $s(Ys.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Mp(n,e.Ls)}}function Up(e,t){const n=Xs(e),r=n.Au.get(t);if(r&&r.hu)return wu().add(r.key);{let e=wu();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Vp(e){const t=Xs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ep.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Up.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tp.bind(null,t),t.Pu.H_=op.bind(null,t.eventManager),t.Pu.yu=lp.bind(null,t.eventManager),t}function zp(e){const t=Xs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ip.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lp.bind(null,t),t}class Bp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zd(this.persistence,new Fd,e.initialUser,this.serializer)}Cu(e){return new Ad(qd.mi,this.serializer)}Du(e){return new $d}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bp.provider={build:()=>new Bp};class Hp extends Bp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Js(this.persistence.referenceDelegate instanceof Dd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new yd(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?hd.withCacheSize(this.cacheSizeBytes):hd.DEFAULT;return new Ad(e=>Dd.mi(e,t),this.serializer)}}class Qp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_p(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fp.bind(null,this.syncEngine),await Kh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rp}createDatastore(e){const t=dh(e.databaseInfo.databaseId),n=function(e){return new uh(e)}(e.databaseInfo);return function(e,t,n,r){return new yh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new wh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>_p(this.syncEngine,e,0),th.v()?new th:new Zd)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new bp(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Xs(e);Bs(xh,"RemoteStore shutting down."),t.Ea.add(5),await Sh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Qp.provider={build:()=>new Qp};class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Wp="FirestoreClient";class Kp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Fs.UNAUTHENTICATED,this.clientId=ua.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Bs(Wp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Bs(Wp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$h(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Jp(e,t){e.asyncQueue.verifyOperationInProgress(),Bs(Wp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Bd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Yp(e);Bs(Wp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Wh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Wh(t.remoteStore,n)),e._onlineComponents=t}async function Yp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bs(Wp,"Using user provided OfflineComponentProvider");try{await Jp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ys.FAILED_PRECONDITION||e.code===Ys.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await Jp(e,new Bp)}}else Bs(Wp,"Using default OfflineComponentProvider"),await Jp(e,new Hp(void 0));return e._offlineComponents}async function $p(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bs(Wp,"Using user provided OnlineComponentProvider"),await Xp(e,e._uninitializedComponentsProvider._online)):(Bs(Wp,"Using default OnlineComponentProvider"),await Xp(e,new Qp))),e._onlineComponents}function Zp(e){return $p(e).then(e=>e.syncEngine)}async function em(e){const t=await $p(e),n=t.eventManager;return n.onListen=xp.bind(null,t.syncEngine),n.onUnlisten=Cp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Np.bind(null,t.syncEngine),n}function tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Gp({next:o=>{s.Nu(),t.enqueueAndForget(()=>ap(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new $s(Ys.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new $s(Ys.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new hp(Xl(n.path),s,{includeMetadataChanges:!0,qa:!0});return sp(e,a)}(await em(e),e.asyncQueue,t,n,r)),r.promise}function nm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const rm=new Map,im="firestore.googleapis.com",sm=!0;class am{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new $s(Ys.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=im,this.ssl=sm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:sm;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=dd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<fd)throw new $s(Ys.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new $s(Ys.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new $s(Ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new $s(Ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new $s(Ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class om{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new am({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $s(Ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $s(Ys.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new am(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ta;switch(e.type){case"firstParty":return new sa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new $s(Ys.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rm.get(e);t&&(Bs("ComponentProvider","Removing Datastore"),rm.delete(e),t.terminate())}(this),Promise.resolve()}}function lm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=_a(e,om);const i=$(t),a=e._getSettings(),o=(0,s.A)((0,s.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(Z("https://".concat(l)),ne("Firestore",!0)),a.host!==im&&a.host!==l&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,s.A)((0,s.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!ce(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Fs.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,s.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[H(JSON.stringify({alg:"none",type:"JWT"})),H(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new $s(Ys.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Fs(i)}e._authCredentials=new na(new ea(t,n))}}class um{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new um(this.firestore,e,this._query)}}class cm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cm(this.firestore,e,this._key)}toJSON(){return{type:cm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ia(t,cm._jsonSchema))return new cm(e,n||null,new wa(ya.fromString(t.referencePath)))}}cm._jsonSchemaVersion="firestore/documentReference/1.0",cm._jsonSchema={type:Ta("string",cm._jsonSchemaVersion),referencePath:Ta("string")};class dm extends um{constructor(e,t,n){super(e,t,Xl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cm(this.firestore,null,new wa(e))}withConverter(e){return new dm(this.firestore,e,this._path)}}function hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ve(e),1===arguments.length&&(t=ua.newId()),ka("doc","path",t),e instanceof om){const n=ya.fromString(t,...r);return Sa(n),new cm(e,null,new wa(n))}{if(!(e instanceof cm||e instanceof dm))throw new $s(Ys.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ya.fromString(t,...r));return Sa(n),new cm(e.firestore,e instanceof dm?e.converter:null,new wa(n))}}const pm="AsyncQueue";class mm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hh(this,"async_queue_retry"),this._c=()=>{const e=ch();e&&Bs(pm,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ch();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Zs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qa(e))throw e;Bs(pm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Hs("INTERNAL UNHANDLED ERROR: ",fm(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Yh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ws(47125,{Pc:fm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class gm extends om{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mm,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mm(e),this._firestoreClient=void 0,await e}}}function vm(e){if(e._terminated)throw new $s(Ys.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ym(e),e._firestoreClient}function ym(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,nm(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Kp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class bm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bm(qo.fromBase64String(e))}catch(e){throw new $s(Ys.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bm(qo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ia(e,bm._jsonSchema))return bm.fromBase64String(e.bytes)}}bm._jsonSchemaVersion="firestore/bytes/1.0",bm._jsonSchema={type:Ta("string",bm._jsonSchemaVersion),bytes:Ta("string")};class xm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new $s(Ys.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wm{constructor(e){this._methodName=e}}class km{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $s(Ys.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $s(Ys.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ca(this._lat,e._lat)||ca(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:km._jsonSchemaVersion}}static fromJSON(e){if(Ia(e,km._jsonSchema))return new km(e.latitude,e.longitude)}}km._jsonSchemaVersion="firestore/geoPoint/1.0",km._jsonSchema={type:Ta("string",km._jsonSchemaVersion),latitude:Ta("number"),longitude:Ta("number")};class Sm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ia(e,Sm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Sm(e.vectorValues);throw new $s(Ys.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sm._jsonSchemaVersion="firestore/vectorValue/1.0",Sm._jsonSchema={type:Ta("string",Sm._jsonSchemaVersion),vectorValues:Ta("object")};const Cm=/^__.*__$/;class Nm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class Em{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _m(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ws(40011,{Ac:e})}}class Tm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tm((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(_m(this.Ac)&&Cm.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Im{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||dh(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Tm({Ac:e,methodName:t,Dc:n,path:xa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lm(e){const t=e._freezeSettings(),n=dh(e._databaseId);return new Im(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Pm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Fm("Data must be an object, but it was:",a,r);const o=Om(r,a);let l,u;if(s.merge)l=new Ao(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Um(t,r,n);if(!a.contains(i))throw new $s(Ys.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Hm(e,i)||e.push(i)}l=new Ao(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new Nm(new yl(o),l,u)}class Rm extends wm{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rm}}class Am extends wm{_toFieldTransform(e){return new Fu(e.path,new Pu)}isEqual(e){return e instanceof Am}}function jm(e,t,n,r){const i=e.Cc(1,t,n);Fm("Data must be an object, but it was:",i,r);const s=[],a=yl.empty();Eo(r,(e,r)=>{const o=zm(t,e,n);r=ve(r);const l=i.yc(o);if(r instanceof Rm)s.push(o);else{const e=Dm(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Ao(s);return new Em(a,o,i.fieldTransforms)}function qm(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Um(t,r,n)],l=[i];if(s.length%2!=0)throw new $s(Ys.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(Um(t,s[h])),l.push(s[h+1]);const u=[],c=yl.empty();for(let h=o.length-1;h>=0;--h)if(!Hm(u,o[h])){const e=o[h];let t=l[h];t=ve(t);const n=a.yc(e);if(t instanceof Rm)u.push(e);else{const r=Dm(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new Ao(u);return new Em(c,d,a.fieldTransforms)}function Dm(e,t){if(Mm(e=ve(e)))return Fm("Unsupported field value:",t,e),Om(e,t);if(e instanceof wm)return function(e,t){if(!_m(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Dm(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ve(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Eu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ra.fromDate(e);return{timestampValue:Pc(t.serializer,n)}}if(e instanceof Ra){const n=new Ra(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pc(t.serializer,n)}}if(e instanceof km)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bm)return{bytesValue:Rc(t.serializer,e._byteString)};if(e instanceof cm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:qc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Sm)return function(e,t){return{mapValue:{fields:{[Xo]:{stringValue:Zo},[el]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Cu(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ea(e)))}(e,t)}function Om(e,t){const n={};return _o(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eo(e,(e,r)=>{const i=Dm(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Mm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ra||e instanceof km||e instanceof bm||e instanceof cm||e instanceof wm||e instanceof Sm)}function Fm(e,t,n){if(!Mm(n)||!Na(n)){const r=Ea(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Um(e,t,n){if((t=ve(t))instanceof xm)return t._internalPath;if("string"==typeof t)return zm(e,t);throw Bm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vm=new RegExp("[~\\*/\\[\\]]");function zm(e,t,n){if(t.search(Vm)>=0)throw Bm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xm(...t.split("."))._internalPath}catch(r){throw Bm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Bm(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new $s(Ys.INVALID_ARGUMENT,o+e+l)}function Hm(e,t){return e.some(e=>e.isEqual(t))}class Qm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gm extends Qm{data(){return super.data()}}function Wm(e,t){return"string"==typeof t?zm(e,t):t instanceof xm?t._internalPath:t._delegate._internalPath}class Km{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ws(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Eo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[el].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Mo(e.doubleValue));return new Sm(n)}convertGeoPoint(e){return new km(Mo(e.latitude),Mo(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Qo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){const t=Oo(e);return new Ra(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ya.fromString(e);Js(rd(n),9688,{name:e});const r=new Jo(n.get(1),n.get(3)),i=new wa(n.popFirst(5));return r.isEqual(t)||Hs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Jm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Xm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ym extends Qm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $s(Ys.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ym._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Ym._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ym._jsonSchema={type:Ta("string",Ym._jsonSchemaVersion),bundleSource:Ta("string","DocumentSnapshot"),bundleName:Ta("string"),bundle:Ta("string")};class $m extends Ym{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Zm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $m(this._firestore,this._userDataWriter,n.key,n,new Xm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new $s(Ys.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new $m(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Xm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new $m(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ef(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $s(Ys.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ua.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ef(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ws(61501,{type:e})}}Zm._jsonSchemaVersion="firestore/querySnapshot/1.0",Zm._jsonSchema={type:Ta("string",Zm._jsonSchemaVersion),bundleSource:Ta("string","QuerySnapshot"),bundleName:Ta("string"),bundle:Ta("string")};class tf extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new bm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cm(this.firestore,null,t)}}function nf(e,t){return function(e,t){const n=new Zs;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=zp(e);try{const e=await function(e,t){const n=Xs(e),r=Ra.now(),i=t.reduce((e,t)=>e.add(t.key),wu());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=hu(),l=wu();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Wu(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Xu(e.key,t,bl(t.value.mapValue),Vu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:fu(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new To(ca)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Mp(r,e.changes),await Mh(r.remoteStore)}catch(e){const t=$h(e,"Failed to persist write");n.reject(t)}}(await Zp(e),t,n)),n.promise}(vm(e),t)}function rf(e,t,n){const r=n.docs.get(t._key),i=new tf(e);return new Ym(e,i,t._key,r,new Xm(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Us=e}(Rt),_t(new ye("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new gm(new ra(e.getProvider("auth-internal")),new oa(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $s(Ys.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(e.options.projectId,t)}(a,r),a);return i=(0,s.A)({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),qt(Os,Ms,e),qt(Os,Ms,"esm2020")}();const sf=At({apiKey:"AIzaSyARkDIpWfRNMVFscXo0vJ7SVahbLzQO5yQ",authDomain:"examen-civique-app-41c05.firebaseapp.com",projectId:"examen-civique-app-41c05",storageBucket:"examen-civique-app-41c05.firebasestorage.app",messagingSenderId:"1074754569572",appId:"1:1074754569572:web:0a32dd0c512c2b79ade671"}),af=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();const t=Tt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Tt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ce(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;en(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:gs,persistence:[Ei,ai,di]}),r=X("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>xs)return;const r=null===t||void 0===t?void 0:t.token;ws!==r&&(ws=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ve(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ve(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=K("auth");return s&&Sr(n,"http://".concat(s)),n}(sf),of=function(e,t){const n="object"==typeof e?e:jt(),r="string"==typeof e?e:t||Ko,i=Tt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=K(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&lm(i,...e)}return i}(sf),lf=async(e,t)=>{try{const n=await async function(e,t,n){if(It(e.app))return Promise.reject(rn(e));const r=dr(e),i=wr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hr,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Zr(e),t}),a=await Qr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(af,e,t);return{success:!0,user:n.user}}catch(n){return console.error("Registration error:",n),{success:!1,error:n.message}}},uf=async(e,t)=>{try{const n=await function(e,t,n){return It(e.app)?Promise.reject(rn(e)):$r(ve(e),Dr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Zr(e),t})}(af,e,t);return{success:!0,user:n.user}}catch(n){return console.error("Login error:",n),{success:!1,error:n.message}}},cf=async()=>{try{const e=new Fr("apple.com");e.addScope("email"),e.addScope("name");const t=await async function(e,t,n){if(It(e.app))return Promise.reject(tn(e,"operation-not-supported-in-this-environment"));const r=dr(e);sn(e,t,Or);const i=Ri(r,n);return new Fi(r,"signInViaPopup",t,i).executeNotNull()}(af,e);return{success:!0,user:t.user}}catch(e){return console.error("Apple Sign-In error:",e),{success:!1,error:e.message}}},df=async()=>{try{return await function(e){return ve(e).signOut()}(af),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}},hf=e=>function(e,t,n,r){return ve(e).onAuthStateChanged(t,n,r)}(af,e),pf=e=>{let{stats:t,user:n,userName:i,onStartQuiz:s,onStartExamen:a,onViewStats:o,onReviewWrong:l,onViewCategoryProgress:u,onViewSavedQuestions:k,onLogin:S,onViewProfile:C,onFeedback:N}=e;const{isDark:E,toggleTheme:T}=(()=>{const e=(0,r.useContext)(F);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e})(),[I,L]=(0,r.useState)({learned:0,total:180,percentage:0}),[R,A]=(0,r.useState)({learned:0,total:180,percentage:0}),[q,D]=(0,r.useState)("CSP"),[O,U]=(0,r.useState)(0),[V,z]=(0,r.useState)(0),[B,H]=(0,r.useState)(!1);(0,r.useEffect)(()=>{L(_("CSP")),A(_("CR")),U(P().length),z(j().length)},[]);const Q=t.total>0?Math.round(t.correct/t.total*100):0;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"text-center mb-4 md:mb-6 pt-8 md:pt-10",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-3 md:mb-4",children:[(0,M.jsx)("div",{className:"relative",children:n?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("button",{onClick:()=>H(!B),className:"p-2 rounded-lg bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all",children:(0,M.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,M.jsx)(c,{className:"w-3 h-3 text-white"})})}),B&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>H(!1)}),(0,M.jsxs)("div",{className:"absolute left-0 top-12 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-1.5 z-20",children:[(0,M.jsx)("div",{className:"px-2.5 py-1.5 border-b border-gray-200 dark:border-gray-700",children:(0,M.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white whitespace-nowrap",children:i&&""!==i.trim()?i:"Utilisateur"})}),(0,M.jsxs)("button",{onClick:()=>{H(!1),C()},className:"w-full px-2.5 py-1.5 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all flex items-center gap-2 whitespace-nowrap",children:[(0,M.jsx)(c,{className:"w-4 h-4"}),"Mon profil"]}),(0,M.jsxs)("button",{onClick:async()=>{await df(),localStorage.removeItem("userName"),H(!1)},className:"w-full px-2.5 py-1.5 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all flex items-center gap-2 whitespace-nowrap",children:[(0,M.jsx)(d,{className:"w-4 h-4"}),"Se d\xe9connecter"]})]})]})]}):(0,M.jsx)("button",{onClick:S,className:"p-2 rounded-lg bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all",children:(0,M.jsx)(h,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),(0,M.jsx)("button",{onClick:T,className:"p-2 rounded-lg bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all","aria-label":"Toggle theme",children:E?(0,M.jsx)(p,{className:"w-5 h-5 text-yellow-500"}):(0,M.jsx)(m,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})]}),(0,M.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-3xl mb-3 md:mb-4 shadow-lg",children:(0,M.jsx)(f,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),(0,M.jsx)("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400 mb-2",children:"Examen Civique"}),(0,M.jsx)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-3 md:mb-4",children:"Pr\xe9parez-vous pour votre examen civique fran\xe7ais"})]}),(0,M.jsxs)("div",{className:"mb-4 md:mb-8",children:[(0,M.jsxs)("p",{className:"text-sm md:text-base text-gray-700 dark:text-gray-300 mb-2",children:["Vous avez \xe9tudi\xe9 ",(0,M.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"avec"})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg border-2 border-gray-200 dark:border-gray-700",children:[(0,M.jsxs)("div",{className:"text-2xl md:text-3xl font-bold ".concat("CSP"===q?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"),children:["CSP"===q?I.percentage:R.percentage,"%"]}),(0,M.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["des questions de ",q]}),(0,M.jsx)("button",{onClick:()=>u(q),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"(Plus de d\xe9tails)"})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-lg border-2 border-gray-200 dark:border-gray-700",children:[(0,M.jsxs)("div",{className:"text-2xl md:text-3xl font-bold ".concat(Q>=80?"text-green-600 dark:text-green-400":Q>=60?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"),children:[Q,"%"]}),(0,M.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"de pr\xe9cision"}),(0,M.jsx)("button",{onClick:o,className:"text-xs text-orange-600 dark:text-orange-400 hover:underline font-medium",children:"(Toutes vos statistiques)"})]})]})]}),(0,M.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[(0,M.jsx)("h2",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white",children:"Modes d'apprentissage"}),(0,M.jsxs)("div",{className:"inline-flex bg-white dark:bg-gray-700 rounded-xl p-1 shadow-md",children:[(0,M.jsx)("button",{onClick:()=>D("CSP"),className:"px-4 py-1.5 rounded-lg font-medium text-sm transition-all ".concat("CSP"===q?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:"CSP"}),(0,M.jsx)("button",{onClick:()=>D("CR"),className:"px-4 py-1.5 rounded-lg font-medium text-sm transition-all ".concat("CR"===q?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:"CR"})]})]}),(0,M.jsxs)("button",{onClick:()=>s(q),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl p-4 md:p-6 shadow-lg hover:shadow-xl transition-all hover:scale-105 flex items-center justify-between group",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(f,{className:"w-5 h-5 md:w-6 md:h-6"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsxs)("div",{className:"font-bold text-base md:text-lg",children:["Quiz Pratique ",q]}),(0,M.jsx)("div",{className:"text-xs md:text-sm text-white/80",children:"Mode entrainement"})]})]}),(0,M.jsx)(g,{className:"w-5 h-5 md:w-6 md:h-6 group-hover:translate-x-1 transition-transform"})]}),(0,M.jsx)("button",{onClick:()=>u(q),className:"w-full bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border-2 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600 transition-all hover:shadow-xl hover:scale-105 group",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center group-hover:bg-blue-200 dark:group-hover:bg-blue-800/50 transition-colors",children:(0,M.jsx)(v,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("div",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white",children:"Apprendre par cat\xe9gorie"}),(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Pratiquer par th\xe8me"})]})]}),(0,M.jsx)(g,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform"})]})}),(0,M.jsx)("button",{onClick:()=>a(q),className:"w-full bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border-2 border-purple-200 dark:border-purple-800 hover:border-purple-400 dark:hover:border-purple-600 transition-all hover:shadow-xl hover:scale-105 group",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center group-hover:bg-purple-200 dark:group-hover:bg-purple-800/50 transition-colors",children:(0,M.jsx)(y,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 dark:text-purple-400"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsxs)("div",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white",children:["Examen Blanc ",q]}),(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"40 questions - 45 minutes - Conditions r\xe9elles"})]})]}),(0,M.jsx)(g,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 dark:text-purple-400 group-hover:translate-x-1 transition-transform"})]})}),V>0&&(0,M.jsx)("button",{onClick:k,className:"w-full bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border-2 border-yellow-200 dark:border-yellow-800 hover:border-yellow-400 dark:hover:border-yellow-600 transition-all hover:shadow-xl hover:scale-105 group",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center group-hover:bg-yellow-200 dark:group-hover:bg-yellow-800/50 transition-colors",children:(0,M.jsx)(b,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 dark:text-yellow-400 fill-yellow-400"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("div",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white",children:"Questions enregistr\xe9es"}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[V," question",V>1?"s":""," sauvegard\xe9e",V>1?"s":""]})]})]}),(0,M.jsx)(g,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 dark:text-yellow-400 group-hover:translate-x-1 transition-transform"})]})}),O>0&&(0,M.jsx)("button",{onClick:l,className:"w-full bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border-2 border-red-200 dark:border-red-800 hover:border-red-400 dark:hover:border-red-600 transition-all hover:shadow-xl hover:scale-105 group",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center group-hover:bg-red-200 dark:group-hover:bg-red-800/50 transition-colors",children:(0,M.jsx)(x,{className:"w-5 h-5 md:w-6 md:h-6 text-red-600 dark:text-red-400"})}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("div",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white",children:"R\xe9viser les erreurs"}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[O," question",O>1?"s":""," \xe0 r\xe9viser"]})]})]}),(0,M.jsx)(g,{className:"w-5 h-5 md:w-6 md:h-6 text-red-600 dark:text-red-400 group-hover:translate-x-1 transition-transform"})]})})]}),(0,M.jsxs)("div",{className:"mt-4 md:mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-4 md:p-6",children:[(0,M.jsxs)("h3",{className:"font-bold text-sm md:text-base text-blue-900 dark:text-blue-300 mb-2",children:["\ud83d\udcda \xc0 propos de l'examen ",q]}),(0,M.jsxs)("ul",{className:"text-xs md:text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[(0,M.jsx)("li",{children:"\u2022 40 questions \xe0 choix multiples"}),(0,M.jsx)("li",{children:"\u2022 80% de bonnes r\xe9ponses requis (32/40)"}),(0,M.jsx)("li",{children:"\u2022 5 th\xe9matiques officielles"}),(0,M.jsx)("li",{children:"\u2022 Dur\xe9e: 45 minutes maximum"})]})]}),(0,M.jsx)("button",{onClick:N,className:"mt-4 w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-2xl p-4 md:p-5 shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:(0,M.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,M.jsx)(w,{className:"w-5 h-5 md:w-6 md:h-6"}),(0,M.jsxs)("div",{className:"text-left",children:[(0,M.jsx)("div",{className:"font-bold text-base md:text-lg",children:"Envoyer un feedback"}),(0,M.jsx)("div",{className:"text-xs md:text-sm text-white/90",children:"Aidez-nous \xe0 am\xe9liorer l'app"})]})]})})]})})},mf=u("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ff=u("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),gf=u("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),vf=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var yf=n(856);const bf=e=>{let{stats:t,currentStreak:n,onUpdateStats:i,onStreakUpdate:a,onComplete:o,onBack:l,quizType:u="CSP",totalQuestions:c=15}=e;const[d,h]=(0,r.useState)([]),[p,m]=(0,r.useState)(0),[f,v]=(0,r.useState)(null),[y,x]=(0,r.useState)(!1),[w,k]=(0,r.useState)(0),[S,C]=(0,r.useState)(new Set);if((0,r.useEffect)(()=>{const e=(0,yf.getQuestionsByType)(u,c);h(e);const t=new Set;e.forEach(e=>{O(e.id)&&t.add(e.id)}),C(t)},[u,c]),0===d.length)return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,M.jsxs)("div",{className:"text-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,M.jsxs)("p",{className:"text-gray-600",children:["Chargement des questions ",u,"..."]})]})});const N=d[p],_=y&&f===N.correct;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-3xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,M.jsxs)("button",{onClick:l,className:"flex items-center gap-1 md:gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Accueil"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,M.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-bold",children:u}),n>0&&(0,M.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 bg-orange-100 dark:bg-orange-900/50 px-2 md:px-3 py-1 rounded-full",children:[(0,M.jsx)(ff,{className:"w-3 h-3 md:w-4 md:h-4 text-orange-600 dark:text-orange-400"}),(0,M.jsx)("span",{className:"font-bold text-xs md:text-sm text-orange-600 dark:text-orange-400",children:n})]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-300",children:[p+1," / ",d.length]})]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4 md:mb-8",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all",style:{width:"".concat((p+1)/d.length*100,"%")}})}),(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,M.jsx)("div",{className:"inline-block bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-medium",children:N.category}),(0,M.jsx)("button",{onClick:()=>{D(N.id),C(e=>{const t=new Set(e);return t.has(N.id)?t.delete(N.id):t.add(N.id),t})},className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",title:S.has(N.id)?"Retirer des favoris":"Sauvegarder pour r\xe9viser",children:(0,M.jsx)(b,{className:"w-5 h-5 md:w-6 md:h-6 ".concat(S.has(N.id)?"fill-yellow-400 text-yellow-400":"text-gray-400 dark:text-gray-500")})})]}),(0,M.jsx)("h2",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-6 md:mb-8",children:N.question}),(0,M.jsx)("div",{className:"space-y-2 md:space-y-3 mb-6 md:mb-8",children:N.options.map((e,t)=>{const n=f===t,r=t===N.correct;let i="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",s="border-gray-200 dark:border-gray-600",a=null;return y?r?(i="bg-green-50 dark:bg-green-900/30 border-green-500",s="border-green-500",a=(0,M.jsx)(gf,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 dark:text-green-400"})):n&&!r&&(i="bg-red-50 dark:bg-red-900/30 border-red-500",s="border-red-500",a=(0,M.jsx)(vf,{className:"w-4 h-4 md:w-5 md:h-5 text-red-600 dark:text-red-400"})):n&&(i="bg-blue-50 dark:bg-blue-900/30 border-blue-500",s="border-blue-500"),(0,M.jsxs)("button",{onClick:()=>(e=>{y||v(e)})(t),disabled:y,className:"w-full p-3 md:p-4 rounded-xl border-2 ".concat(s," ").concat(i," text-left transition-all flex items-center justify-between group ").concat(!y&&"hover:scale-102"),children:[(0,M.jsx)("span",{className:"font-medium text-sm md:text-base text-gray-900 dark:text-white",children:e}),a]},t)})}),y&&(0,M.jsxs)("div",{className:"p-3 md:p-4 rounded-xl mb-4 md:mb-6 ".concat(_?"bg-green-50 dark:bg-green-900/30 border-2 border-green-200 dark:border-green-800":"bg-blue-50 dark:bg-blue-900/30 border-2 border-blue-200 dark:border-blue-800"),children:[(0,M.jsx)("p",{className:"font-medium mb-2 text-sm md:text-base ".concat(_?"text-green-900 dark:text-green-300":"text-blue-900 dark:text-blue-300"),children:_?"\u2705 Correct !":"\ud83d\udca1 Explication"}),(0,M.jsx)("p",{className:"text-xs md:text-sm ".concat(_?"text-green-800 dark:text-green-300":"text-blue-800 dark:text-blue-300"),children:N.explanation})]}),(0,M.jsxs)("div",{className:"space-y-2 md:space-y-3",children:[(0,M.jsx)("div",{className:"flex gap-3",children:y?(0,M.jsxs)("button",{onClick:()=>{p<d.length-1?(m(p+1),v(null),x(!1)):o(w)},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 md:py-4 rounded-xl font-bold text-sm md:text-base hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[p<d.length-1?"Suivant":"Terminer",(0,M.jsx)(g,{className:"w-4 h-4 md:w-5 md:h-5"})]}):(0,M.jsx)("button",{onClick:()=>{if(null===f)return;x(!0);const e=f===N.correct;if(E(N.id,N.tags),e){k(w+1);const e=n+1;a(e);const r=(0,s.A)((0,s.A)({},t),{},{total:t.total+1,correct:t.correct+1,streak:e,bestStreak:Math.max(t.bestStreak,e)});i(r)}else{A(N.id,f,N.correct),a(0);const e=(0,s.A)((0,s.A)({},t),{},{total:t.total+1,streak:0});i(e)}},disabled:null===f,className:"flex-1 py-3 md:py-4 rounded-xl font-bold text-sm md:text-base transition-all ".concat(null===f?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-105"),children:"V\xe9rifier"})}),(0,M.jsx)("button",{onClick:()=>{if(console.log("handleFinish called",{showResult:y,selectedAnswer:f,score:w}),y||null===f)console.log("Calling onComplete with current score:",w),o(w);else{console.log("Verifying current answer before finishing");const e=f===N.correct;E(N.id,N.tags);let r=w;if(e){r=w+1;const e=n+1;a(e);const o=(0,s.A)((0,s.A)({},t),{},{total:t.total+1,correct:t.correct+1,streak:e,bestStreak:Math.max(t.bestStreak,e)});i(o)}else{A(N.id,f,N.correct),a(0);const e=(0,s.A)((0,s.A)({},t),{},{total:t.total+1,streak:0});i(e)}console.log("Calling onComplete with finalScore:",r),o(r)}},className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-2.5 md:py-3 rounded-xl font-bold text-sm md:text-base hover:shadow-lg transition-all",children:"Terminer maintenant"})]})]})})},xf=u("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),wf=e=>{let{examType:t,onStart:n,onBack:i}=e;const[s,a]=(0,r.useState)("15"),[o,l]=(0,r.useState)("");return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-2xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6 md:mb-8",children:[(0,M.jsxs)("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Accueil"})]}),(0,M.jsxs)("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white",children:["Quiz Pratique ",t]}),(0,M.jsx)("div",{className:"w-16 md:w-20"})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-6 md:p-8",children:[(0,M.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,M.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-3xl mb-4 shadow-lg",children:(0,M.jsx)(f,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),(0,M.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Combien de questions ?"}),(0,M.jsx)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400",children:"Choisissez le nombre de questions pour votre quiz"})]}),(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre de questions"}),(0,M.jsx)("input",{type:"text",inputMode:"numeric",value:s,onChange:e=>{const t=e.target.value;(""===t||/^\d+$/.test(t))&&(a(t),l(""))},placeholder:"Entrez un nombre...",className:"w-full px-4 py-3 md:py-4 text-center text-2xl md:text-3xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-all"}),o&&(0,M.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 text-center",children:o})]}),(0,M.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,M.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-center",children:"Suggestions rapides"}),(0,M.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[15,30,45,100].map(e=>(0,M.jsxs)("button",{onClick:()=>(e=>{a(e.toString()),l("")})(e),className:"p-3 md:p-4 rounded-xl border-2 transition-all hover:scale-105 ".concat(s===e.toString()?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:border-blue-400"),children:[(0,M.jsx)("div",{className:"text-xl md:text-2xl font-bold",children:e}),(0,M.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"questions"})]},e))})]}),(0,M.jsxs)("button",{onClick:()=>{const e=parseInt(s);!s||e<1?l("Veuillez entrer un nombre valide"):e>180?l("Maximum 180 questions"):n(e)},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 md:py-4 rounded-xl font-bold text-base md:text-lg hover:shadow-lg transition-all hover:scale-105 flex items-center justify-center gap-2",children:[(0,M.jsx)(xf,{className:"w-5 h-5 md:w-6 md:h-6"}),"Commencer le quiz"]}),(0,M.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:(0,M.jsx)("p",{className:"text-xs md:text-sm text-blue-800 dark:text-blue-300",children:"\ud83d\udca1 Mode apprentissage : vous verrez la correction apr\xe8s chaque question"})})]})]})})},kf=u("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Sf=e=>{let{score:t,currentStreak:n,onBackHome:r,totalQuestions:i=15}=e;const s=Math.round(t/i*100),a=s>=80;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4 md:p-6",children:(0,M.jsxs)("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-2xl p-6 md:p-8 text-center",children:[(0,M.jsx)("div",{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-4 md:mb-6 rounded-full flex items-center justify-center ".concat(a?"bg-green-100":"bg-orange-100"),children:a?(0,M.jsx)(kf,{className:"w-10 h-10 md:w-12 md:h-12 text-green-600"}):(0,M.jsx)(b,{className:"w-10 h-10 md:w-12 md:h-12 text-orange-600"})}),(0,M.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-2 text-gray-900",children:a?"F\xe9licitations !":"Bon effort !"}),(0,M.jsx)("p",{className:"text-sm md:text-base text-gray-600 mb-4 md:mb-6",children:a?"Vous avez r\xe9ussi le quiz !":"Continuez \xe0 vous entra\xeener !"}),(0,M.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-4 md:p-6 mb-4 md:mb-6",children:[(0,M.jsxs)("div",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:[s,"%"]}),(0,M.jsxs)("div",{className:"text-sm md:text-base text-gray-600 mb-3 md:mb-4",children:[t," / ",i," correctes"]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 md:h-3",children:(0,M.jsx)("div",{className:"h-2 md:h-3 rounded-full transition-all ".concat(a?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-orange-500 to-yellow-500"),style:{width:"".concat(s,"%")}})})]}),n>0&&(0,M.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 md:mb-6 text-orange-600",children:[(0,M.jsx)(ff,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsxs)("span",{className:"font-bold text-sm md:text-base",children:[n," s\xe9rie en cours !"]})]}),(0,M.jsxs)("button",{onClick:r,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 md:py-4 rounded-xl font-bold text-sm md:text-base hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),"Retour \xe0 l'accueil"]})]})})},Cf=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Nf=u("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ef=e=>{let{onBack:t,onComplete:n,examType:i="CSP"}=e;const[a,o]=(0,r.useState)([]),[l,u]=(0,r.useState)(0),[c,d]=(0,r.useState)({}),[h,p]=(0,r.useState)(2700),[m,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[x,w]=(0,r.useState)(new Set),k=(0,r.useCallback)(()=>{let e=0;a.forEach(t=>{const n=c[t.id];n===t.correct?e++:void 0!==n&&A(t.id,n,t.correct)});const t=e>=Math.ceil(.8*a.length);n({score:e,total:a.length,answers:c,questions:a,timeSpent:2700-h,passed:t})},[a,c,h,n]),S=(0,r.useCallback)(()=>{y(!0),k()},[k]);(0,r.useEffect)(()=>{const e=(0,yf.getQuestionsByType)(i,40);o(e);const t=new Set;e.forEach(e=>{O(e.id)&&t.add(e.id)}),w(t)},[i]),(0,r.useEffect)(()=>{if(0===a.length||v)return;const e=setInterval(()=>{p(t=>t<=1?(clearInterval(e),S(),0):t-1)},1e3);return()=>clearInterval(e)},[a,v,S]);const C=Object.keys(c).length,N=C/a.length*100,_=h/2700*100,T=h<300;if(0===a.length)return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,M.jsxs)("div",{className:"text-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,M.jsxs)("p",{className:"text-gray-600",children:["Pr\xe9paration de l'examen ",i,"..."]})]})});const I=a[l],L=c[I.id];return(0,M.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,M.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-3 md:p-4 mb-4 md:mb-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-1 md:gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Abandonner"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-full ".concat(T?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:[(0,M.jsx)(Cf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-bold text-base md:text-lg",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(h)})]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,M.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(T?"bg-red-500":"bg-blue-500"),style:{width:"".concat(_,"%")}})})]}),(0,M.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-3 md:p-4 mb-4 md:mb-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,M.jsxs)("span",{className:"text-xs md:text-sm font-medium text-gray-600",children:["Question ",l+1," / ",a.length]}),(0,M.jsxs)("span",{className:"text-xs md:text-sm font-medium text-gray-600",children:[C," / ",a.length," r\xe9ponses"]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all",style:{width:"".concat(N,"%")}})})]}),(0,M.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-4 md:p-6 mb-4 md:mb-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[(0,M.jsx)("div",{className:"inline-block bg-purple-100 text-purple-700 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-medium",children:I.category}),(0,M.jsx)("button",{onClick:()=>{D(I.id),w(e=>{const t=new Set(e);return t.has(I.id)?t.delete(I.id):t.add(I.id),t})},className:"p-2 rounded-full hover:bg-gray-100 transition-all",title:x.has(I.id)?"Retirer des favoris":"Sauvegarder pour r\xe9viser",children:(0,M.jsx)(b,{className:"w-5 h-5 md:w-6 md:h-6 ".concat(x.has(I.id)?"fill-yellow-400 text-yellow-400":"text-gray-400")})})]}),(0,M.jsx)("h2",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-4 md:mb-6",children:I.question}),(0,M.jsx)("div",{className:"space-y-2 md:space-y-3",children:I.options.map((e,t)=>{const n=L===t;return(0,M.jsx)("button",{onClick:()=>((e,t)=>{d((0,s.A)((0,s.A)({},c),{},{[e]:t}));const n=a.find(t=>t.id===e);n&&E(n.id,n.tags)})(I.id,t),className:"w-full p-3 md:p-4 rounded-xl border-2 text-left transition-all ".concat(n?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"),children:(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,M.jsx)("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full border-2 flex items-center justify-center ".concat(n?"border-blue-500 bg-blue-500":"border-gray-300"),children:n&&(0,M.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base text-gray-900",children:e})]})},t)})})]}),(0,M.jsxs)("div",{className:"space-y-2 md:space-y-3",children:[(0,M.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[l>0&&(0,M.jsx)("button",{onClick:()=>u(l-1),className:"px-4 md:px-6 py-2.5 md:py-3 bg-gray-200 text-gray-700 rounded-xl font-bold text-sm md:text-base hover:bg-gray-300 transition-all",children:"Pr\xe9c\xe9dent"}),l<a.length-1&&(0,M.jsxs)("button",{onClick:()=>u(l+1),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 md:py-3 rounded-xl font-bold text-sm md:text-base hover:shadow-lg transition-all flex items-center justify-center gap-2",children:["Suivant",(0,M.jsx)(g,{className:"w-4 h-4 md:w-5 md:h-5"})]})]}),(0,M.jsx)("button",{onClick:()=>{f(!0)},className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-2.5 md:py-3 rounded-xl font-bold text-sm md:text-base hover:shadow-lg transition-all",children:"Terminer l'examen"})]}),C<a.length&&l===a.length-1&&(0,M.jsxs)("div",{className:"mt-3 md:mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-3 md:p-4 flex items-start gap-2 md:gap-3",children:[(0,M.jsx)(Nf,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"font-medium text-sm md:text-base text-yellow-900",children:"Attention"}),(0,M.jsxs)("p",{className:"text-xs md:text-sm text-yellow-800",children:["Vous n'avez r\xe9pondu qu'\xe0 ",C," questions sur ",a.length,". Les questions non r\xe9pondues seront compt\xe9es comme fausses."]})]})]})]}),m&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-50",children:(0,M.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,M.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Terminer l'examen ?"}),(0,M.jsx)("p",{className:"text-gray-600 mb-6",children:C===a.length?"Vous avez r\xe9pondu \xe0 toutes les questions. Voulez-vous soumettre votre examen ?":"Vous n'avez r\xe9pondu qu'\xe0 ".concat(C," questions sur ").concat(a.length,". Les questions non r\xe9pondues seront compt\xe9es comme fausses.")}),(0,M.jsxs)("div",{className:"flex gap-3",children:[(0,M.jsx)("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition-all",children:"Continuer"}),(0,M.jsx)("button",{onClick:()=>{y(!0),k()},className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"Soumettre"})]})]})})]})},_f=u("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Tf=u("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),If=u("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Lf=e=>{let{result:t,onBackHome:n}=e;const[i,s]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1),[l,u]=(0,r.useState)(0),{score:c,total:d,answers:h,questions:p,timeSpent:m}=t,[f,g]=(0,r.useState)(()=>{const e=new Set;return p.forEach(t=>{O(t.id)&&e.add(t.id)}),e}),v=Math.round(c/d*100),y=v>=80,x={};return p.forEach(e=>{x[e.category]||(x[e.category]={correct:0,total:0}),x[e.category].total++,h[e.id]===e.correct&&x[e.category].correct++}),(0,M.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6 pb-24",children:[(0,M.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm shadow-md z-50 p-4",children:(0,M.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-bold transition-all",children:[(0,M.jsx)(mf,{className:"w-5 h-5"}),"Retour \xe0 l'accueil"]})})}),(0,M.jsxs)("div",{className:"max-w-4xl mx-auto pt-16",children:[(0,M.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-center mb-6",children:[(0,M.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center ".concat(y?"bg-green-100":"bg-red-100"),children:y?(0,M.jsx)(kf,{className:"w-12 h-12 text-green-600"}):(0,M.jsx)(_f,{className:"w-12 h-12 text-red-600"})}),(0,M.jsx)("h2",{className:"text-3xl font-bold mb-2 text-gray-900",children:y?"F\xe9licitations ! Vous avez r\xe9ussi !":"Examen non valid\xe9"}),(0,M.jsx)("p",{className:"text-gray-600 mb-8",children:y?"Vous avez atteint le niveau requis pour l'examen civique fran\xe7ais.":"Vous devez obtenir au moins 80% (32/40) pour valider l'examen."}),(0,M.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-8 mb-6",children:[(0,M.jsxs)("div",{className:"text-6xl font-bold mb-2 ".concat(y?"text-green-600":"text-red-600"),children:[v,"%"]}),(0,M.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-4",children:[c," / ",d]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,M.jsx)("div",{className:"h-4 rounded-full transition-all ".concat(y?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-orange-500"),style:{width:"".concat(v,"%")}})}),(0,M.jsxs)("div",{className:"mt-4 text-sm text-gray-600 flex items-center justify-center gap-2",children:[(0,M.jsx)(Cf,{className:"w-4 h-4"}),(0,M.jsxs)("span",{children:["Temps \xe9coul\xe9: ",(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,"min ").concat(n,"s")})(m)]})]})]}),(0,M.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Object.entries(x).map(e=>{let[t,n]=e;const r=Math.round(n.correct/n.total*100);return(0,M.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,M.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:t}),(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[n.correct," / ",n.total]}),(0,M.jsxs)("span",{className:"text-sm font-bold ".concat(r>=80?"text-green-600":"text-orange-600"),children:[r,"%"]})]})]},t)})}),(0,M.jsx)("button",{onClick:()=>s(!i),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-md hover:shadow-lg",children:i?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Tf,{className:"w-5 h-5"}),"Masquer les d\xe9tails"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(If,{className:"w-5 h-5"}),"Voir les r\xe9ponses d\xe9taill\xe9es"]})})]}),i&&(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsxs)("div",{className:"sticky top-20 z-40 mb-6",children:[(0,M.jsxs)("button",{onClick:()=>o(!a),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-full shadow-lg hover:shadow-xl transition-all flex items-center gap-2 font-semibold text-sm",children:[(0,M.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Navigation (",l+1,"/40)",(0,M.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(a?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&(0,M.jsxs)("div",{className:"absolute top-12 left-0 right-0 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-4 border-2 border-blue-200",children:[(0,M.jsx)("div",{className:"text-xs font-semibold text-gray-600 mb-3",children:"S\xe9lectionnez une question :"}),(0,M.jsx)("div",{className:"grid grid-cols-8 md:grid-cols-10 gap-2 max-h-64 overflow-y-auto",children:p.map((e,t)=>{const n=h[e.id],r=n===e.correct,i=void 0!==n;return(0,M.jsx)("button",{onClick:()=>(e=>{u(e),o(!1);const t=document.getElementById("question-".concat(e));if(t){const e=-80,n=t.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:n,behavior:"smooth"})}})(t),className:"aspect-square rounded-lg text-xs font-bold transition-all ".concat(l===t?"ring-2 ring-blue-500 scale-110":""," ").concat(r?"bg-green-100 text-green-700 hover:bg-green-200":i?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:"Question ".concat(t+1),children:t+1},e.id)})})]})]}),(0,M.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>{const n=h[e.id],r=n===e.correct,i=void 0!==n;return(0,M.jsx)("div",{id:"question-".concat(t),className:"bg-white rounded-2xl p-6 border-2 ".concat(r?"border-green-200":i?"border-red-200":"border-gray-200"),children:(0,M.jsxs)("div",{className:"flex items-start gap-4",children:[(0,M.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat(r?"bg-green-100":i?"bg-red-100":"bg-gray-100"),children:r?(0,M.jsx)(gf,{className:"w-5 h-5 text-green-600"}):i?(0,M.jsx)(vf,{className:"w-5 h-5 text-red-600"}):(0,M.jsx)("span",{className:"text-gray-500 text-sm",children:"?"})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,M.jsxs)("div",{className:"text-sm text-gray-500",children:["Question ",t+1," - ",e.category]}),(0,M.jsx)("button",{onClick:()=>{return t=e.id,D(t),void g(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"p-1 rounded-full hover:bg-gray-100 transition-all",title:f.has(e.id)?"Retirer des favoris":"Sauvegarder pour r\xe9viser",children:(0,M.jsx)(b,{className:"w-5 h-5 ".concat(f.has(e.id)?"fill-yellow-400 text-yellow-400":"text-gray-400")})})]}),(0,M.jsx)("h3",{className:"font-bold text-gray-900 mb-3",children:e.question}),(0,M.jsx)("div",{className:"space-y-2",children:e.options.map((t,r)=>{const i=n===r,s=e.correct===r;let a="bg-gray-50",o="text-gray-700",l=null;return s?(a="bg-green-50 border-2 border-green-300",o="text-green-900",l=(0,M.jsx)(gf,{className:"w-5 h-5 text-green-600"})):i&&!s&&(a="bg-red-50 border-2 border-red-300",o="text-red-900",l=(0,M.jsx)(vf,{className:"w-5 h-5 text-red-600"})),(0,M.jsxs)("div",{className:"p-3 rounded-lg ".concat(a," flex items-center justify-between"),children:[(0,M.jsx)("span",{className:"".concat(o," text-sm"),children:t}),l]},r)})}),!r&&(0,M.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,M.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,M.jsx)("strong",{children:"\ud83d\udca1 Explication:"})," ",e.explanation]})})]})]})},e.id)})})]})]})]})},Pf=u("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Rf=u("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Af=u("HandMetal",[["path",{d:"M18 12.5V10a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4",key:"7eki13"}],["path",{d:"M14 11V9a2 2 0 1 0-4 0v2",key:"94qvcw"}],["path",{d:"M10 10.5V5a2 2 0 1 0-4 0v9",key:"m1ah89"}],["path",{d:"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5",key:"t1skq1"}]]),jf=u("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),qf=u("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Df=u("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Of=e=>{let{stats:t,onBack:n,onViewCategoryProgress:i}=e;const[a,o]=(0,r.useState)({learned:0,total:180,percentage:0}),[l,u]=(0,r.useState)({learned:0,total:180,percentage:0}),[c,d]=(0,r.useState)([]),[h,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{o(_("CSP")),u(_("CR"));const e={};yf.questionsDB.forEach(t=>{e[t.category]||(e[t.category]={total:0,csp:0,cr:0}),e[t.category].total++,t.tags.includes("CSP")&&e[t.category].csp++,t.tags.includes("CR")&&e[t.category].cr++});const t=Object.entries(e).map(e=>{let[t,n]=e;return(0,s.A)({name:t},n)}).sort((e,t)=>e.name.localeCompare(t.name,"fr",{sensitivity:"base"}));d(t);const n=T();p(n.slice(-5).reverse())},[]);const m=t.total>0?Math.round(t.correct/t.total*100):0,f=h.find(e=>"Examen Blanc"===e.mode),g=void 0!==f;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-5 h-5"}),(0,M.jsx)("span",{className:"font-medium",children:"Accueil"})]}),(0,M.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\ud83d\udcca Statistiques"}),(0,M.jsx)("div",{className:"w-20"})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6 md:mb-8",children:[(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700",children:(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0",children:(0,M.jsx)(Pf,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400"})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Total r\xe9ponses"}),(0,M.jsx)("div",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:t.total})]})]})}),(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700",children:(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-100 dark:bg-green-900/30 rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0",children:(0,M.jsx)(v,{className:"w-5 h-5 md:w-6 md:h-6 text-green-600 dark:text-green-400"})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Pr\xe9cision"}),(0,M.jsxs)("div",{className:"text-xl md:text-2xl font-bold ".concat(m>=80?"text-green-600 dark:text-green-400":m>=60?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"),children:[m,"%"]})]})]})}),(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700",children:(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-orange-100 dark:bg-orange-900/30 rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0",children:t.bestStreak>=40?(0,M.jsx)(Rf,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 dark:text-yellow-400"}):t.bestStreak>=30?(0,M.jsx)(b,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400"}):t.bestStreak>=20?(0,M.jsx)(ff,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-600 dark:text-orange-400"}):t.bestStreak>=10?(0,M.jsx)(Af,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 dark:text-purple-400"}):(0,M.jsx)(jf,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-600 dark:text-orange-400"})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Meilleure s\xe9rie"}),(0,M.jsx)("div",{className:"text-xl md:text-2xl font-bold text-orange-600 dark:text-orange-400",children:t.bestStreak})]})]})}),(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700",children:(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 ".concat(g?f.passed?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30":"bg-purple-100 dark:bg-purple-900/30"),children:(0,M.jsx)(y,{className:"w-5 h-5 md:w-6 md:h-6 ".concat(g?f.passed?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":"text-purple-600 dark:text-purple-400")})}),(0,M.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,M.jsx)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 mb-2 whitespace-nowrap overflow-hidden text-ellipsis",children:g?"Dernier examen":"Bonnes r\xe9ponses"}),(0,M.jsx)("div",{className:"text-xl md:text-2xl font-bold ".concat(g?f.passed?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":"text-purple-600 dark:text-purple-400"),children:g?"".concat(f.score,"/").concat(f.total||40):t.correct})]})]})})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:gap-6 mb-8",children:[(0,M.jsxs)("button",{onClick:()=>i("CSP"),className:"bg-white dark:bg-gray-800 rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:scale-105 transition-all text-left",children:[(0,M.jsxs)("h3",{className:"font-bold text-sm md:text-base text-gray-900 dark:text-white mb-2 md:mb-3 flex items-center gap-2",children:[(0,M.jsx)(qf,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400"}),(0,M.jsx)("span",{className:"hidden md:inline",children:"Progression CSP"}),(0,M.jsx)("span",{className:"md:hidden",children:"CSP"})]}),(0,M.jsxs)("div",{className:"mb-2 md:mb-3",children:[(0,M.jsxs)("div",{className:"flex items-baseline justify-center gap-1.5 md:gap-2 mb-1",children:[(0,M.jsxs)("span",{className:"text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400 leading-none",children:[a.percentage,"%"]}),(0,M.jsx)("span",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 font-semibold",children:"compl\xe9t\xe9"})]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 text-center",children:[a.learned," / ",a.total]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 md:h-3",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 md:h-3 rounded-full transition-all",style:{width:"".concat(a.percentage,"%")}})})]}),(0,M.jsxs)("button",{onClick:()=>i("CR"),className:"bg-white dark:bg-gray-800 rounded-2xl p-3 md:p-4 shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow-xl hover:scale-105 transition-all text-left",children:[(0,M.jsxs)("h3",{className:"font-bold text-sm md:text-base text-gray-900 dark:text-white mb-2 md:mb-3 flex items-center gap-2",children:[(0,M.jsx)(qf,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-600 dark:text-purple-400"}),(0,M.jsx)("span",{className:"hidden md:inline",children:"Progression CR"}),(0,M.jsx)("span",{className:"md:hidden",children:"CR"})]}),(0,M.jsxs)("div",{className:"mb-2 md:mb-3",children:[(0,M.jsxs)("div",{className:"flex items-baseline justify-center gap-1.5 md:gap-2 mb-1",children:[(0,M.jsxs)("span",{className:"text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 leading-none",children:[l.percentage,"%"]}),(0,M.jsx)("span",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 font-semibold",children:"compl\xe9t\xe9"})]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 text-center",children:[l.learned," / ",l.total]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 md:h-3",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 md:h-3 rounded-full transition-all",style:{width:"".concat(l.percentage,"%")}})})]})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-gray-700 mb-8",children:[(0,M.jsxs)("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,M.jsx)(Pf,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Questions par cat\xe9gorie"]}),(0,M.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,M.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.name}),(0,M.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.total," questions"]})]}),(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:["CSP: ",e.csp]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,M.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.csp/e.total*100,"%")}})})]}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mb-1",children:["CR: ",e.cr]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,M.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(e.cr/e.total*100,"%")}})})]})]})]},t))})]}),h.length>0&&(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-100 dark:border-gray-700",children:[(0,M.jsxs)("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,M.jsx)(Df,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Historique r\xe9cent"]}),(0,M.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>(0,M.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(e.passed?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,M.jsx)(y,{className:"w-5 h-5 ".concat(e.passed?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")})}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.type," - ",e.mode]}),(0,M.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]}),(0,M.jsxs)("div",{className:"text-right",children:[(0,M.jsxs)("div",{className:"text-2xl font-bold ".concat(e.passed?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.score,"/",e.total||("Examen Blanc"===e.mode?40:e.score)]}),(0,M.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.total?Math.round(e.score/e.total*100):"Examen Blanc"===e.mode?Math.round(e.score/40*100):100,"%"]})]})]},t))})]})]})})},Mf=u("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]),Ff=e=>{let{onBack:t}=e;const[n,i]=(0,r.useState)([]),[a,o]=(0,r.useState)(0),[l,u]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]);const h=()=>{const e=P().map(e=>{const t=yf.questionsDB.find(t=>t.id===e.questionId);return(0,s.A)((0,s.A)({},t),{},{wrongData:e})}).filter(e=>e.id);i(e)};if(0===n.length)return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-3xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors mb-4 md:mb-6",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Accueil"})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 md:p-12 shadow-lg border border-gray-100 dark:border-gray-700 text-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:(0,M.jsx)(gf,{className:"w-8 h-8 md:w-10 md:h-10 text-green-600 dark:text-green-400"})}),(0,M.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Excellent travail !"}),(0,M.jsx)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4 md:mb-6",children:"Vous n'avez aucune question \xe0 r\xe9viser pour le moment."}),(0,M.jsx)("button",{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-5 md:px-6 py-2.5 md:py-3 rounded-xl font-medium text-sm md:text-base hover:shadow-lg transition-all",children:"Retour \xe0 l'accueil"})]})]})});const p=n[a],m=c&&l===p.correct;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-3xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-1 md:gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Accueil"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,M.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 bg-red-100 dark:bg-red-900/50 px-2 md:px-3 py-1 rounded-full",children:[(0,M.jsx)(Mf,{className:"w-3 h-3 md:w-4 md:h-4 text-red-600 dark:text-red-400"}),(0,M.jsx)("span",{className:"font-bold text-xs md:text-sm text-red-600 dark:text-red-400",children:n.length})]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-300",children:[a+1," / ",n.length]})]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4 md:mb-8",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full transition-all",style:{width:"".concat((a+1)/n.length*100,"%")}})}),(0,M.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-4 md:mb-6",children:[(0,M.jsx)("div",{className:"inline-block bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-medium",children:p.category}),(0,M.jsxs)("div",{className:"inline-block bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-xs md:text-sm font-medium",children:[p.wrongData.attempts," ",p.wrongData.attempts>1?"erreurs":"erreur"]})]}),(0,M.jsx)("h2",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-6 md:mb-8",children:p.question}),(0,M.jsx)("div",{className:"space-y-2 md:space-y-3 mb-6 md:mb-8",children:p.options.map((e,t)=>{const n=l===t,r=t===p.correct;let i="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",s="border-gray-200 dark:border-gray-600",a=null;return c?r?(i="bg-green-50 dark:bg-green-900/30 border-green-500",s="border-green-500",a=(0,M.jsx)(gf,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 dark:text-green-400"})):n&&!r&&(i="bg-red-50 dark:bg-red-900/30 border-red-500",s="border-red-500",a=(0,M.jsx)(vf,{className:"w-4 h-4 md:w-5 md:h-5 text-red-600 dark:text-red-400"})):n&&(i="bg-blue-50 dark:bg-blue-900/30 border-blue-500",s="border-blue-500"),(0,M.jsxs)("button",{onClick:()=>(e=>{c||u(e)})(t),disabled:c,className:"w-full p-3 md:p-4 rounded-xl border-2 ".concat(s," ").concat(i," text-left transition-all flex items-center justify-between group ").concat(!c&&"hover:scale-102"),children:[(0,M.jsx)("span",{className:"font-medium text-sm md:text-base text-gray-900 dark:text-white",children:e}),a]},t)})}),c&&(0,M.jsxs)("div",{className:"p-4 rounded-xl mb-6 ".concat(m?"bg-green-50 dark:bg-green-900/30 border-2 border-green-200 dark:border-green-800":"bg-blue-50 dark:bg-blue-900/30 border-2 border-blue-200 dark:border-blue-800"),children:[(0,M.jsx)("p",{className:"font-medium mb-2 ".concat(m?"text-green-900 dark:text-green-300":"text-blue-900 dark:text-blue-300"),children:m?"\u2705 Parfait ! Cette question a \xe9t\xe9 retir\xe9e de votre liste de r\xe9vision.":"\ud83d\udca1 Explication"}),(0,M.jsx)("p",{className:m?"text-green-800 dark:text-green-300":"text-blue-800 dark:text-blue-300",children:p.explanation})]}),(0,M.jsx)("div",{className:"flex gap-3",children:c?(0,M.jsxs)("button",{onClick:()=>{a<n.length-1?(o(a+1),u(null),d(!1)):(h(),o(0),u(null),d(!1))},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-xl font-bold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[a<n.length-1?"Suivant":"Terminer",(0,M.jsx)(g,{className:"w-5 h-5"})]}):(0,M.jsx)("button",{onClick:()=>{null!==l&&(d(!0),l===p.correct&&(e=>{const t=P().filter(t=>t.questionId!==e);R(t)})(p.id))},disabled:null===l,className:"flex-1 py-4 rounded-xl font-bold transition-all ".concat(null===l?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:scale-105"),children:"V\xe9rifier"})})]})})},Uf=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Vf=e=>{let{question:t,index:n,isExpanded:r,onToggleExpand:i,onRemove:s}=e;return(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,M.jsxs)("div",{className:"p-4",children:[(0,M.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:t.category}),(0,M.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white text-sm md:text-base",children:t.question})]}),(0,M.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/30 transition-all text-red-600 dark:text-red-400",title:"Retirer des favoris",children:(0,M.jsx)(Uf,{className:"w-4 h-4"})})]}),(0,M.jsx)("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:r?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Tf,{className:"w-4 h-4"}),"Masquer la r\xe9ponse"]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(If,{className:"w-4 h-4"}),"Voir la r\xe9ponse"]})})]}),r&&(0,M.jsxs)("div",{className:"border-t-2 border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900",children:[(0,M.jsx)("div",{className:"space-y-2 mb-4",children:t.options.map((e,n)=>{const r=n===t.correct;return(0,M.jsx)("div",{className:"p-3 rounded-lg ".concat(r?"bg-green-50 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-700":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"),children:(0,M.jsxs)("span",{className:"text-sm ".concat(r?"text-green-900 dark:text-green-300 font-medium":"text-gray-700 dark:text-gray-300"),children:[e,r&&" \u2713"]})},n)})}),(0,M.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:(0,M.jsxs)("p",{className:"text-sm text-blue-900 dark:text-blue-300",children:[(0,M.jsx)("strong",{children:"\ud83d\udca1 Explication:"})," ",t.explanation]})})]})]})},zf=e=>{let{onBack:t}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{const e=j(),t=yf.questionsDB.filter(t=>e.includes(t.id));i(t)},[]);const o=e=>{D(e),i(t=>t.filter(t=>t.id!==e))},l=e=>{a(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},u=n.filter(e=>e.tags.includes("CSP")),c=n.filter(e=>e.tags.includes("CR"));return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-5 h-5"}),(0,M.jsx)("span",{className:"font-medium",children:"Accueil"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400",children:[(0,M.jsx)(b,{className:"w-6 h-6 fill-yellow-400"}),(0,M.jsx)("span",{className:"font-bold text-lg",children:n.length})]})]}),(0,M.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Questions enregistr\xe9es"}),(0,M.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"R\xe9visez vos questions sauvegard\xe9es pour un apprentissage personnalis\xe9"}),0===n.length?(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 text-center",children:[(0,M.jsx)(b,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,M.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Aucune question enregistr\xe9e"}),(0,M.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Cliquez sur l'\xe9toile pendant vos quiz pour sauvegarder des questions"})]}):(0,M.jsxs)("div",{className:"space-y-6",children:[u.length>0&&(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,M.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-full text-sm font-bold",children:"CSP"}),(0,M.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u.length," question",u.length>1?"s":""]})]}),(0,M.jsx)("div",{className:"space-y-3",children:u.map((e,t)=>(0,M.jsx)(Vf,{question:e,index:t,isExpanded:s.has(e.id),onToggleExpand:()=>l(e.id),onRemove:()=>o(e.id)},e.id))})]}),c.length>0&&(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,M.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-3 py-1 rounded-full text-sm font-bold",children:"CR"}),(0,M.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.length," question",c.length>1?"s":""]})]}),(0,M.jsx)("div",{className:"space-y-3",children:c.map((e,t)=>(0,M.jsx)(Vf,{question:e,index:t,isExpanded:s.has(e.id),onToggleExpand:()=>l(e.id),onRemove:()=>o(e.id)},e.id))})]})]})]})})},Bf=e=>{let{examType:t,onBack:n,onStartCategoryQuiz:i}=e;const[s,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=C(),n=new Set(e[t]||[]),r={};yf.questionsDB.forEach(e=>{e.tags.includes(t)&&(r[e.category]||(r[e.category]={total:0,learned:0}),r[e.category].total++,n.has(e.id)&&r[e.category].learned++)});const i=Object.entries(r).map(e=>{let[t,n]=e;return{name:t,total:n.total,learned:n.learned,percentage:Math.round(n.learned/n.total*100)}}).sort((e,t)=>e.name.localeCompare(t.name,"fr",{sensitivity:"base"}));a(i)},[t]);const o=s.reduce((e,t)=>e+t.total,0),l=s.reduce((e,t)=>e+t.learned,0),u=o>0?Math.round(l/o*100):0;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-8",children:[(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Accueil"})]}),(0,M.jsxs)("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white",children:["Progression ",t]}),(0,M.jsx)("div",{className:"w-12 md:w-20"})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-8 shadow-lg border-2 mb-4 md:mb-8 ".concat("CSP"===t?"border-blue-500":"border-purple-500"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h2",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:["Progression globale ",t]}),(0,M.jsxs)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400",children:[l," / ",o," questions \xe9tudi\xe9es"]})]}),(0,M.jsxs)("div",{className:"text-3xl md:text-5xl font-bold ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"),children:[u,"%"]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 md:h-4",children:(0,M.jsx)("div",{className:"h-3 md:h-4 rounded-full transition-all ".concat("CSP"===t?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:"".concat(u,"%")}})})]}),(0,M.jsx)("h2",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white mb-3 md:mb-4",children:"Progression par cat\xe9gorie"}),(0,M.jsx)("div",{className:"space-y-3 md:space-y-4",children:s.map((e,n)=>(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-all",children:[(0,M.jsxs)("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("h3",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white mb-1",children:e.name}),(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[(0,M.jsxs)("span",{children:[e.total," questions"]}),(0,M.jsx)("span",{children:"\u2022"}),(0,M.jsxs)("span",{className:"CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:[e.learned," \xe9tudi\xe9es"]})]})]}),(0,M.jsxs)("div",{className:"text-right",children:[(0,M.jsxs)("div",{className:"text-2xl md:text-3xl font-bold ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"),children:[e.percentage,"%"]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:[e.learned,"/",e.total]})]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 md:h-3 mb-3 md:mb-4",children:(0,M.jsx)("div",{className:"h-2 md:h-3 rounded-full transition-all ".concat("CSP"===t?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:"".concat(e.percentage,"%")}})}),(0,M.jsxs)("button",{onClick:()=>i(t,e.name),className:"w-full flex items-center justify-between px-3 md:px-4 py-2 md:py-3 rounded-xl border-2 transition-all group ".concat("CSP"===t?"border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30":"border-purple-200 dark:border-purple-800 hover:border-purple-400 dark:hover:border-purple-600 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30"),children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,M.jsx)(f,{className:"w-4 h-4 md:w-5 md:h-5 ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400")}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base ".concat("CSP"===t?"text-blue-700 dark:text-blue-300":"text-purple-700 dark:text-purple-300"),children:"Pratiquer cette cat\xe9gorie"})]}),(0,M.jsx)(g,{className:"w-4 h-4 md:w-5 md:h-5 transition-transform group-hover:translate-x-1 ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400")})]})]},n))}),(0,M.jsxs)("div",{className:"mt-4 md:mt-8 rounded-2xl p-4 md:p-6 border ".concat("CSP"===t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"),children:[(0,M.jsx)("h3",{className:"font-bold mb-2 text-sm md:text-base ".concat("CSP"===t?"text-blue-900 dark:text-blue-300":"text-purple-900 dark:text-purple-300"),children:"\ud83d\udca1 Conseil"}),(0,M.jsx)("p",{className:"text-xs md:text-sm ".concat("CSP"===t?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"),children:"Concentrez-vous sur les cat\xe9gories o\xf9 votre progression est la plus faible pour maximiser vos chances de r\xe9ussite \xe0 l'examen."})]})]})})},Hf=e=>{let{examType:t,onBack:n,onNavigateToPractice:i}=e;const[s,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=C(),n=new Set(e[t]||[]),r={};yf.questionsDB.forEach(e=>{e.tags.includes(t)&&(r[e.category]||(r[e.category]={total:0,learned:0}),r[e.category].total++,n.has(e.id)&&r[e.category].learned++)});const i=Object.entries(r).map(e=>{let[t,n]=e;return{name:t,total:n.total,learned:n.learned,percentage:Math.round(n.learned/n.total*100)}}).sort((e,t)=>e.name.localeCompare(t.name,"fr",{sensitivity:"base"}));a(i)},[t]);const o=s.reduce((e,t)=>e+t.total,0),l=s.reduce((e,t)=>e+t.learned,0),u=o>0?Math.round(l/o*100):0;return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-8",children:[(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,M.jsx)(mf,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,M.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Statistiques"})]}),(0,M.jsxs)("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white",children:["D\xe9tails ",t]}),(0,M.jsx)("div",{className:"w-12 md:w-20"})]}),(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-8 shadow-lg border-2 mb-4 md:mb-8 ".concat("CSP"===t?"border-blue-500":"border-purple-500"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h2",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:["Progression globale ",t]}),(0,M.jsxs)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400",children:[l," / ",o," questions \xe9tudi\xe9es"]})]}),(0,M.jsxs)("div",{className:"text-3xl md:text-5xl font-bold ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"),children:[u,"%"]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 md:h-4",children:(0,M.jsx)("div",{className:"h-3 md:h-4 rounded-full transition-all ".concat("CSP"===t?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:"".concat(u,"%")}})})]}),(0,M.jsx)("button",{onClick:i,className:"w-full mb-4 md:mb-8 rounded-2xl p-4 md:p-6 shadow-lg border-2 transition-all hover:shadow-xl hover:scale-105 group ".concat("CSP"===t?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700 hover:border-blue-500 dark:hover:border-blue-500":"bg-purple-50 dark:bg-purple-900/20 border-purple-300 dark:border-purple-700 hover:border-purple-500 dark:hover:border-purple-500"),children:(0,M.jsxs)("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:[(0,M.jsx)(f,{className:"w-5 h-5 md:w-6 md:h-6 ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400")}),(0,M.jsx)("span",{className:"text-base md:text-lg font-bold ".concat("CSP"===t?"text-blue-900 dark:text-blue-300":"text-purple-900 dark:text-purple-300"),children:"Pratiquer par cat\xe9gorie"}),(0,M.jsx)("span",{className:"text-base md:text-lg",children:"\u2192"})]})}),(0,M.jsxs)("h2",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white mb-3 md:mb-4 flex items-center gap-2",children:[(0,M.jsx)(Pf,{className:"w-4 h-4 md:w-5 md:h-5 ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400")}),"Statistiques par cat\xe9gorie"]}),(0,M.jsx)("div",{className:"space-y-3 md:space-y-4",children:s.map((e,n)=>(0,M.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 md:p-6 shadow-lg border border-gray-100 dark:border-gray-700",children:[(0,M.jsxs)("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("h3",{className:"font-bold text-base md:text-lg text-gray-900 dark:text-white mb-1",children:e.name}),(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[(0,M.jsxs)("span",{children:[e.total," questions"]}),(0,M.jsx)("span",{children:"\u2022"}),(0,M.jsxs)("span",{className:"CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:[e.learned," \xe9tudi\xe9es"]})]})]}),(0,M.jsxs)("div",{className:"text-right",children:[(0,M.jsxs)("div",{className:"text-2xl md:text-3xl font-bold ".concat("CSP"===t?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"),children:[e.percentage,"%"]}),(0,M.jsxs)("div",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:[e.learned,"/",e.total]})]})]}),(0,M.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 md:h-3",children:(0,M.jsx)("div",{className:"h-2 md:h-3 rounded-full transition-all ".concat("CSP"===t?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-purple-500 to-purple-600"),style:{width:"".concat(e.percentage,"%")}})})]},n))}),(0,M.jsxs)("div",{className:"mt-4 md:mt-8 rounded-2xl p-4 md:p-6 border ".concat("CSP"===t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"),children:[(0,M.jsx)("h3",{className:"font-bold mb-2 text-sm md:text-base ".concat("CSP"===t?"text-blue-900 dark:text-blue-300":"text-purple-900 dark:text-purple-300"),children:"\ud83d\udcca Statistiques"}),(0,M.jsxs)("p",{className:"text-xs md:text-sm ".concat("CSP"===t?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"),children:["Cette page affiche votre progression d\xe9taill\xe9e par cat\xe9gorie pour l'examen ",t,'. Les questions sont marqu\xe9es comme "\xe9tudi\xe9es" une fois que vous y avez r\xe9pondu dans un quiz.']})]})]})})},Qf=u("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Gf=e=>{let{onInstall:t,onClose:n}=e;const r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return(0,M.jsxs)("div",{className:"fixed bottom-20 left-20 right-20 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-2xl shadow-2xl z-50 animate-slideUp",children:[(0,M.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(Qf,{className:"w-6 h-6 flex-shrink-0"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"font-bold text-lg",children:"Installer l'application"}),(0,M.jsx)("div",{className:"text-sm text-white/90 mt-1",children:r?(0,M.jsxs)(M.Fragment,{children:["Sur Safari: Appuyez sur ",(0,M.jsx)("span",{className:"font-bold",children:"Partager"})," ","puis ",(0,M.jsx)("span",{className:"font-bold",children:"\"Sur l'\xe9cran d'accueil\""})]}):"Acc\xe9dez \xe0 l'app hors ligne et sur votre \xe9cran d'accueil"})]})]}),(0,M.jsx)("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors ml-2 flex-shrink-0",children:(0,M.jsx)(vf,{className:"w-5 h-5"})})]}),!r&&(0,M.jsx)("button",{onClick:t,className:"w-full bg-white text-blue-600 py-3 rounded-xl font-bold hover:bg-gray-50 transition-colors",children:"Installer maintenant"})]})},Wf=u("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Kf=u("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Jf=u("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Xf=u("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]),Yf=e=>{let{onBack:t,onLoginSuccess:n}=e;const[i,s]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1);return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,M.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,M.jsxs)("div",{className:"mb-8",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-bold mb-6 transition-all",children:[(0,M.jsx)(Wf,{className:"w-5 h-5"}),"Retour"]}),(0,M.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:i?"Cr\xe9er un compte":"Connexion"}),(0,M.jsx)("p",{className:"text-gray-600",children:i?"Synchronisez vos donn\xe9es sur tous vos appareils":"Acc\xe9dez \xe0 vos donn\xe9es depuis n'importe quel appareil"})]}),f&&(0,M.jsxs)("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)(Nf,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,M.jsx)("p",{className:"text-sm text-red-800",children:f})]}),(0,M.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[(0,M.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),a&&l){if(i){if(l!==d)return void g("Les mots de passe ne correspondent pas");if(l.length<6)return void g("Le mot de passe doit contenir au moins 6 caract\xe8res")}y(!0);try{const e=i?await lf(a,l):await uf(a,l);e.success?n(e.user,p):e.error.includes("email-already-in-use")?g("Cette adresse email est d\xe9j\xe0 utilis\xe9e"):e.error.includes("invalid-email")?g("Adresse email invalide"):e.error.includes("user-not-found")?g("Aucun compte trouv\xe9 avec cette adresse email"):e.error.includes("wrong-password")?g("Mot de passe incorrect"):e.error.includes("weak-password")?g("Le mot de passe est trop faible"):g(e.error)}catch(t){g("Une erreur est survenue. Veuillez r\xe9essayer.")}finally{y(!1)}}else g("Veuillez remplir tous les champs")},className:"space-y-4",children:[i&&(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom (optionnel)"}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,M.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"Votre nom",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all"})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)(Kf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,M.jsx)("input",{type:"email",value:a,onChange:e=>o(e.target.value),placeholder:"votre@email.com",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",required:!0})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,M.jsx)("input",{type:"password",value:l,onChange:e=>u(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",required:!0})]})]}),i&&(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)(Jf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,M.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all",required:!0})]})]}),(0,M.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Chargement...":i?"Cr\xe9er mon compte":"Se connecter"})]}),(0,M.jsx)("div",{className:"mt-4 text-center",children:(0,M.jsx)("button",{onClick:()=>{s(!i),g("")},className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:i?"Vous avez d\xe9j\xe0 un compte ? Connectez-vous":"Pas encore de compte ? Inscrivez-vous"})})]}),(0,M.jsxs)("div",{className:"relative mb-6",children:[(0,M.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,M.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,M.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,M.jsx)("span",{className:"px-4 bg-gradient-to-br from-blue-50 via-white to-purple-50 text-gray-500 font-semibold",children:"OU"})})]}),(0,M.jsxs)("button",{onClick:async()=>{g(""),y(!0);try{const e=await cf();e.success?n(e.user):e.error.includes("popup-closed-by-user")?g("Connexion annul\xe9e"):e.error.includes("popup-blocked")?g("Veuillez autoriser les fen\xeatres popup pour cette fonctionnalit\xe9"):g("Erreur lors de la connexion avec Apple")}catch(e){g("Une erreur est survenue avec Apple Sign-In")}finally{y(!1)}},disabled:v,className:"w-full bg-black hover:bg-gray-900 text-white py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed mb-6",children:[(0,M.jsx)(Xf,{className:"w-5 h-5"}),"Continuer avec Apple"]}),(0,M.jsx)("button",{onClick:t,className:"w-full text-gray-600 hover:text-gray-800 py-3 rounded-xl font-semibold transition-all",children:"Continuer sans compte"}),(0,M.jsx)("div",{className:"mt-8 p-4 bg-blue-50 rounded-xl",children:(0,M.jsxs)("p",{className:"text-xs text-blue-900 text-center",children:[(0,M.jsx)("strong",{children:"\ud83d\udd12 S\xe9curit\xe9:"})," Votre mot de passe est chiffr\xe9 et jamais stock\xe9 en clair. Nous utilisons Firebase pour garantir la s\xe9curit\xe9 de vos donn\xe9es."]})})]})})},$f=u("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Zf=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return console.error("Cannot upload: No user ID provided"),{success:!1,error:"No user ID"};try{const n=hm(of,"users",e),r={stats:k(),quizHistory:T(),wrongAnswers:P(),savedQuestions:j(),answeredQuestions:C(),lastSyncTimestamp:Date.now()},i=localStorage.getItem("userName");return t?r.userName=t:i&&(r.userName=i),await function(e,t,n){e=_a(e,cm);const r=_a(e.firestore,gm),i=Jm(e.converter,t,n);return nf(r,[Pm(Lm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vu.none())])}(n,r,{merge:!0}),console.log("Local data uploaded to Firestore successfully"),{success:!0}}catch(n){return console.error("Error uploading local data:",n),{success:!1,error:n.message}}},eg=async e=>{if(!e)return console.error("Cannot download: No user ID provided"),{success:!1,error:"No user ID"};try{var t;const r=hm(of,"users",e),i=await function(e){e=_a(e,cm);const t=_a(e.firestore,gm);return tm(vm(t),e._key).then(n=>rf(t,e,n))}(r);if(!i.exists())return console.log("No cloud data found. Uploading local data..."),await Zf(e);const s=i.data();return console.log("Replacing local data with cloud data..."),s.stats&&S(s.stats),s.quizHistory&&I(s.quizHistory),s.wrongAnswers&&R(s.wrongAnswers),s.savedQuestions&&q(s.savedQuestions),s.answeredQuestions&&(n=s.answeredQuestions,N(n)),s.userName?(localStorage.setItem("userName",s.userName),console.log("Restored userName from cloud:",s.userName)):console.log("No userName in cloud data"),console.log("Cloud data downloaded successfully"),console.log("Wrong answers count:",(null===(t=s.wrongAnswers)||void 0===t?void 0:t.length)||0),{success:!0,userName:s.userName}}catch(r){return console.error("Error downloading cloud data:",r),{success:!1,error:r.message}}var n},tg=async(e,t,n)=>{if(!e)return{success:!0,skipped:!0};try{const r=hm(of,"users",e);return await function(e,t,n){e=_a(e,cm);const r=_a(e.firestore,gm),i=Lm(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=ve(t))||t instanceof xm?qm(i,"updateDoc",e._key,t,n,o):jm(i,"updateDoc",e._key,t),nf(r,[s.toMutation(e._key,Vu.exists(!0))])}(r,{[t]:n,lastSyncTimestamp:Date.now()}),console.log("Synced ".concat(t," to Firestore")),{success:!0}}catch(r){return"not-found"===r.code?await Zf(e):(console.error("Error syncing ".concat(t,":"),r),{success:!1,error:r.message})}},ng=e=>{let{user:t,userName:n,onBack:i,onUpdateUserName:s}=e;const[a,o]=(0,r.useState)(n||""),[l,u]=(0,r.useState)((null===t||void 0===t?void 0:t.email)||""),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)("");return(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,M.jsxs)("div",{className:"max-w-2xl mx-auto p-4 md:p-6",children:[(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsxs)("button",{onClick:i,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-bold mb-4 transition-all",children:[(0,M.jsx)(Wf,{className:"w-5 h-5"}),"Retour"]}),(0,M.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Mon Profil"}),(0,M.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"G\xe9rez vos informations personnelles"})]}),v&&(0,M.jsxs)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/30 border-2 border-red-200 dark:border-red-800 rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)(Nf,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,M.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300",children:v})]}),b&&(0,M.jsxs)("div",{className:"mb-6 bg-green-50 dark:bg-green-900/30 border-2 border-green-200 dark:border-green-800 rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)(xf,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),(0,M.jsx)("p",{className:"text-sm text-green-800 dark:text-green-300",children:b})]}),(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-4",children:(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,M.jsx)(c,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Nom d'utilisateur"]}),(0,M.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Votre nom",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all"})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,M.jsx)(Kf,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Adresse email"]}),(0,M.jsx)("input",{type:"email",value:l,onChange:e=>u(e.target.value),placeholder:"votre@email.com",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all"})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,M.jsx)(Jf,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Nouveau mot de passe"]}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),placeholder:"Minimum 6 caract\xe8res",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all"}),(0,M.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),placeholder:"Confirmez le mot de passe",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-blue-500 focus:outline-none transition-all"})]})]})]})}),(0,M.jsxs)("button",{onClick:async()=>{g(!0),y(""),x("");const e=[];let r=!1;try{if(a.trim()&&a!==n&&(r=!0,e.push("nom"),af.currentUser&&await ei(af.currentUser,{displayName:a}),localStorage.setItem("userName",a),await Zf(t.uid,a),s(a)),l.trim()&&l!==t.email&&(r=!0,e.push("email"),await function(e,t){const n=ve(e);return It(n.auth.app)?Promise.reject(rn(n.auth)):ti(n,t,null)}(af.currentUser,l)),d||p){if(!d||!p)return y("Veuillez remplir les deux champs du mot de passe"),void g(!1);if(d.length<6)return y("Le nouveau mot de passe doit contenir au moins 6 caract\xe8res"),void g(!1);if(d!==p)return y("Les mots de passe ne correspondent pas"),void g(!1);r=!0,e.push("mot de passe"),await function(e,t){return ti(ve(e),null,t)}(af.currentUser,d),h(""),m("")}if(!r)return y("Aucune modification \xe0 enregistrer"),void g(!1);x("Profil mis \xe0 jour avec succ\xe8s! (".concat(e.join(", "),")")),setTimeout(()=>x(""),3e3)}catch(i){console.error("Error updating profile:",i),"auth/requires-recent-login"===i.code?y("Pour des raisons de s\xe9curit\xe9, veuillez vous d\xe9connecter et vous reconnecter avant de modifier votre profil."):"auth/email-already-in-use"===i.code?y("Cet email est d\xe9j\xe0 utilis\xe9 par un autre compte"):"auth/invalid-email"===i.code?y("Email invalide"):"auth/weak-password"===i.code?y("Le mot de passe est trop faible"):y("Erreur lors de la mise \xe0 jour du profil")}finally{g(!1)}},disabled:f,className:"w-full py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center gap-2 ".concat(f?"bg-gray-300 dark:bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg hover:scale-105"),children:[(0,M.jsx)($f,{className:"w-5 h-5"}),f?"Enregistrement...":"Enregistrer"]}),(0,M.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-xl",children:(0,M.jsxs)("p",{className:"text-xs text-blue-900 dark:text-blue-300 text-center",children:[(0,M.jsx)("strong",{children:"\ud83d\udd12 Note de s\xe9curit\xe9:"})," Pour modifier votre email ou mot de passe, vous devrez peut-\xeatre vous reconnecter pour des raisons de s\xe9curit\xe9."]})})]})})},rg=u("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ig=async e=>{try{const t=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ve(e),ka("collection","path",t),e instanceof om){const n=ya.fromString(t,...r);return Ca(n),new dm(e,null,n)}{if(!(e instanceof cm||e instanceof dm))throw new $s(Ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ya.fromString(t,...r));return Ca(n),new dm(e.firestore,null,n)}}(of,"feedback"),n={type:e.type||"suggestion",rating:e.rating||0,message:e.message,email:e.email,userName:e.userName||"Anonyme",userId:e.userId||null,userAgent:e.userAgent||"",platform:e.platform||"",status:"new",createdAt:new Am("serverTimestamp"),submittedAt:e.timestamp},r=await function(e,t){const n=_a(e.firestore,gm),r=hm(e),i=Jm(e.converter,t);return nf(n,[Pm(Lm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vu.exists(!1))]).then(()=>r)}(t,n);return console.log("Feedback submitted successfully with ID:",r.id),{success:!0,feedbackId:r.id}}catch(t){return console.error("Error submitting feedback:",t),{success:!1,error:t.message}}},sg={APP_STORE_ID:"YOUR_APP_ID",get APP_STORE_REVIEW_URL(){return"itms-apps://itunes.apple.com/app/id".concat(this.APP_STORE_ID,"?action=write-review")},APP_NAME:"Examen Civique - Vibe Study",BUNDLE_ID:"com.linhnh.examencivique",FIREBASE_PROJECT_ID:"examen-civique-app-41c05"},ag=e=>{let{onBack:t,user:n,userName:i}=e;const[s,a]=(0,r.useState)("suggestion"),[o,l]=(0,r.useState)(0),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[x,k]=(0,r.useState)(!1);return f?(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-6 flex items-center justify-center",children:(0,M.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 text-center",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,M.jsx)(xf,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),(0,M.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Merci pour votre feedback!"}),(0,M.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Votre message a \xe9t\xe9 envoy\xe9 avec succ\xe8s. Nous l'examinerons rapidement."}),(0,M.jsx)("button",{onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg",children:"Retour \xe0 l'accueil"})]})}):(0,M.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-6",children:(0,M.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,M.jsxs)("div",{className:"mb-8",children:[(0,M.jsxs)("button",{onClick:t,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-bold mb-6 transition-all",children:[(0,M.jsx)(Wf,{className:"w-5 h-5"}),"Retour"]}),(0,M.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,M.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center",children:(0,M.jsx)(w,{className:"w-7 h-7 text-white"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Envoyer un feedback"}),(0,M.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Votre avis nous aide \xe0 am\xe9liorer l'application"})]})]})]}),v&&(0,M.jsxs)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-xl p-4 flex items-start gap-3",children:[(0,M.jsx)(Nf,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,M.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300",children:v})]}),(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 md:p-8",children:(0,M.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y(""),u.trim())if(n||d.trim()){m(!0);try{const e={type:s,rating:o,message:u.trim(),email:n?n.email:d.trim(),userName:n?i||"Utilisateur":"Anonyme",userId:n?n.uid:null,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,platform:navigator.platform},r=await ig(e);r.success?(g(!0),c(""),h(""),l(0),setTimeout(()=>{t()},2e3)):y(r.error||"Erreur lors de l'envoi du feedback")}catch(r){y("Une erreur est survenue. Veuillez r\xe9essayer.")}finally{m(!1)}}else y("Veuillez entrer votre email");else y("Veuillez entrer votre message")},className:"space-y-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Type de feedback"}),(0,M.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"bug",label:"Signaler un bug",icon:"\ud83d\udc1b",color:"red"},{value:"suggestion",label:"Suggestion",icon:"\ud83d\udca1",color:"blue"},{value:"question",label:"Question",icon:"\u2753",color:"purple"},{value:"compliment",label:"Compliment",icon:"\u2764\ufe0f",color:"green"}].map(e=>(0,M.jsxs)("button",{type:"button",onClick:()=>a(e.value),className:"p-3 rounded-xl border-2 transition-all ".concat(s===e.value?"border-".concat(e.color,"-500 bg-").concat(e.color,"-50 dark:bg-").concat(e.color,"-900/20"):"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,M.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,M.jsx)("div",{className:"text-xs font-semibold ".concat(s===e.value?"text-".concat(e.color,"-700 dark:text-").concat(e.color,"-300"):"text-gray-700 dark:text-gray-300"),children:e.label})]},e.value))})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Note globale de l'application (optionnel)"}),(0,M.jsxs)("div",{className:"flex gap-2",children:[[1,2,3,4,5].map(e=>(0,M.jsx)("button",{type:"button",onClick:()=>{l(e),k(!0)},className:"transition-all hover:scale-110",children:(0,M.jsx)(b,{className:"w-8 h-8 ".concat(e<=o?"text-yellow-500 fill-yellow-500":"text-gray-300 dark:text-gray-600")})},e)),o>0&&(0,M.jsx)("button",{type:"button",onClick:()=>l(0),className:"ml-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Effacer"})]})]}),!n&&(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Votre email (pour recevoir une r\xe9ponse)"}),(0,M.jsx)("input",{type:"email",value:d,onChange:e=>h(e.target.value),placeholder:"votre@email.com",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 dark:bg-gray-900 dark:text-white rounded-xl focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none transition-all",required:!0})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Votre message"}),(0,M.jsx)("textarea",{value:u,onChange:e=>c(e.target.value),placeholder:"D\xe9crivez votre suggestion, bug, question ou commentaire...",rows:"6",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 dark:bg-gray-900 dark:text-white rounded-xl focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none transition-all resize-none",required:!0}),(0,M.jsx)("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Plus vous donnez de d\xe9tails, mieux nous pourrons vous aider!"})]}),(0,M.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-4 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?"Envoi en cours...":(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(rg,{className:"w-5 h-5"}),"Envoyer le feedback"]})})]})}),x&&(0,M.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>k(!1),children:(0,M.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full p-6 animate-scale-in",onClick:e=>e.stopPropagation(),children:5===o?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"text-center mb-4",children:(0,M.jsx)("span",{className:"text-4xl",children:"\u2b50\u2b50\u2b50\u2b50\u2b50"})}),(0,M.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-3",children:"Merci pour votre excellente note!"}),(0,M.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 text-center mb-6",children:"Cela nous ferait tr\xe8s plaisir si vous pouviez laisser un avis sur l'App Store pour soutenir l'application \ud83d\udc9b"}),(0,M.jsxs)("div",{className:"flex gap-3",children:[(0,M.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",children:"Plus tard"}),(0,M.jsx)("a",{href:sg.APP_STORE_REVIEW_URL,onClick:()=>k(!1),className:"flex-1 px-4 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white rounded-xl font-semibold text-center transition-all",children:"Noter sur l'App Store"})]})]}):4===o?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"text-center mb-4",children:(0,M.jsx)("span",{className:"text-4xl",children:"\ud83d\ude0a"})}),(0,M.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-3",children:"Merci pour votre note!"}),(0,M.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 text-center mb-6",children:"Qu'est-ce qui pourrait rendre votre exp\xe9rience encore meilleure? Vos suggestions nous aident \xe0 atteindre l'excellence! \ud83d\udc99"}),(0,M.jsx)("button",{onClick:()=>k(!1),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all",children:"D'accord!"})]}):o>=1&&o<=3?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"text-center mb-4",children:(0,M.jsx)("span",{className:"text-4xl",children:"\ud83d\udc99"})}),(0,M.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-3",children:"Merci pour votre retour honn\xeate"}),(0,M.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 text-center mb-6",children:"N'h\xe9sitez pas \xe0 d\xe9tailler ce qui ne vous satisfait pas dans le message. Vos suggestions nous aident \xe0 progresser!"}),(0,M.jsx)("button",{onClick:()=>k(!1),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold transition-all",children:"Compris, merci!"})]}):null})})]})})},og=()=>{const[e,t]=(0,r.useState)("home"),[n,i]=(0,r.useState)("CSP"),[s,a]=(0,r.useState)({total:0,correct:0,streak:0,bestStreak:0}),[o,l]=(0,r.useState)(0),[u,c]=(0,r.useState)(0),[d,h]=(0,r.useState)(15),[p,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),[N,E]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=localStorage.getItem("userName");e&&(E(e),console.log("Loaded userName from localStorage:",e))},[]),(0,r.useEffect)(()=>{const e=hf(async e=>{if(C(e),e){console.log("Auth user:",e.email);const t=localStorage.getItem("userName");console.log("Saved name in localStorage:",t),t?E(t):e.displayName&&E(e.displayName),console.log("User authenticated, syncing data...");const n=await eg(e.uid);if(n.success){const e=k();e&&a(e),n.userName?(console.log("Setting userName from Firebase:",n.userName),E(n.userName),localStorage.setItem("userName",n.userName)):console.log("No userName in syncResult")}}});return()=>e()},[]),(0,r.useEffect)(()=>{const e=k();e&&a(e);const t=e=>{e.preventDefault(),y(e),g(!0)};window.addEventListener("beforeinstallprompt",t);const n=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!n&&setTimeout(()=>g(!0),3e3),()=>window.removeEventListener("beforeinstallprompt",t)},[]);const _=()=>{t("home"),l(0)};return(0,M.jsxs)(U,{children:["login"===e&&(0,M.jsx)(Yf,{onBack:_,onLoginSuccess:async(e,n)=>{C(e),n?(E(n),localStorage.setItem("userName",n),await Zf(e.uid,n)):e.displayName&&(E(e.displayName),localStorage.setItem("userName",e.displayName),await Zf(e.uid,e.displayName)),t("home")}}),"profile"===e&&(0,M.jsx)(ng,{user:w,userName:N,onBack:_,onUpdateUserName:e=>E(e)}),"feedback"===e&&(0,M.jsx)(ag,{user:w,userName:N,onBack:_}),"home"===e&&(0,M.jsx)(pf,{stats:s,user:w,userName:N,onStartQuiz:e=>{i(e),t("quiz-setup")},onStartExamen:e=>{i(e),t("examen")},onViewStats:()=>t("stats"),onReviewWrong:()=>t("review"),onViewSavedQuestions:()=>t("saved-questions"),onViewCategoryProgress:e=>{i(e),t("category-progress")},onLogin:()=>t("login"),onViewProfile:()=>t("profile"),onFeedback:()=>t("feedback")}),"quiz-setup"===e&&(0,M.jsx)(wf,{examType:n,onStart:e=>{h(e),t("quiz")},onBack:_}),"quiz"===e&&(0,M.jsx)(bf,{stats:s,currentStreak:o,quizType:n,totalQuestions:d,onUpdateStats:e=>{S(e),a(e)},onStreakUpdate:l,onComplete:async e=>{c(e);const r={type:n,mode:"Practice",score:e,total:d,passed:e>=Math.ceil(.8*d)};if(L(r),w){const e=JSON.parse(localStorage.getItem("quizHistory")||"[]");tg(w.uid,"quizHistory",e).catch(e=>{console.error("Failed to sync quiz data:",e)})}t("result")},onBack:_}),"result"===e&&(0,M.jsx)(Sf,{score:u,currentStreak:o,onBackHome:_,totalQuestions:d}),"examen"===e&&(0,M.jsx)(Ef,{examType:n,onBack:_,onComplete:async e=>{m(e);const r={type:n,mode:"Examen Blanc",score:e.score,total:e.total,passed:e.passed,timeSpent:e.timeSpent};if(L(r),w){const e=JSON.parse(localStorage.getItem("quizHistory")||"[]");tg(w.uid,"quizHistory",e).catch(e=>{console.error("Failed to sync exam data:",e)})}t("examen-result")}}),"examen-result"===e&&(0,M.jsx)(Lf,{result:p,onBackHome:_}),"stats"===e&&(0,M.jsx)(Of,{stats:s,onBack:_,onViewCategoryProgress:e=>{i(e),t("category-stats")}}),"review"===e&&(0,M.jsx)(Ff,{onBack:_}),"saved-questions"===e&&(0,M.jsx)(zf,{onBack:_}),"category-progress"===e&&(0,M.jsx)(Bf,{examType:n,onBack:_,onStartCategoryQuiz:(e,n)=>{i(e),x(n),t("quiz")}}),"category-stats"===e&&(0,M.jsx)(Hf,{examType:n,onBack:()=>t("stats"),onNavigateToPractice:()=>t("category-progress")}),f&&(0,M.jsx)(Gf,{onInstall:async()=>{v&&(v.prompt(),await v.userChoice,y(null)),g(!1)},onClose:()=>g(!1)})]})};i.createRoot(document.getElementById("root")).render((0,M.jsx)(r.StrictMode,{children:(0,M.jsx)(og,{})}))})();
//# sourceMappingURL=main.b03e98e7.js.map